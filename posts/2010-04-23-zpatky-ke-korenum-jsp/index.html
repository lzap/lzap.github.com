<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>Zpátky ke kořenům - JSP</title><meta name=description content="engineer in pyjama"><meta name=keywords content="blog,lzap,lukáš,zapletal,linux,tech,oldblog"><meta property="og:url" content="https://blog.zapletalovi.com/posts/2010-04-23-zpatky-ke-korenum-jsp/"><meta property="og:type" content="website"><meta property="og:title" content="Zpátky ke kořenům - JSP"><meta property="og:description" content="engineer in pyjama"><meta property="og:image" content="/images/avatar_rh_512.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Zpátky ke kořenům - JSP"><meta name=twitter:description content="engineer in pyjama"><meta property="twitter:domain" content="https://blog.zapletalovi.com/posts/2010-04-23-zpatky-ke-korenum-jsp/"><meta property="twitter:url" content="https://blog.zapletalovi.com/posts/2010-04-23-zpatky-ke-korenum-jsp/"><meta name=twitter:image content="/images/avatar_rh_512.jpg"><link rel=canonical href=https://blog.zapletalovi.com/posts/2010-04-23-zpatky-ke-korenum-jsp/><link rel=stylesheet type=text/css href=https://blog.zapletalovi.com/css/normalize.min.css media=print onload='this.media="all"'><link rel=stylesheet type=text/css href=https://blog.zapletalovi.com/css/main.css><link disabled id=dark-theme rel=stylesheet href=https://blog.zapletalovi.com/css/dark.css><script src=https://blog.zapletalovi.com/js/svg-injector.min.js></script>
<script src=https://blog.zapletalovi.com/js/feather-icons.min.js></script>
<script src=https://blog.zapletalovi.com/js/main.js></script>
<script type=text/javascript>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-16034952-1"]),_gaq.push(["_trackPageview"]),function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}()</script></head><body><script type=text/javascript>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://blog.zapletalovi.com><img src=https://blog.zapletalovi.com/images/avatar_rh_512.jpg alt=avatar></a></div><div class=nav-title><a class=nav-brand href=https://blog.zapletalovi.com>Lukáš Zapletal</a></div><div class=nav-links><div class=nav-link><a href=https://blog.zapletalovi.com/posts/>Posts</a></div><div class=nav-link><a href=https://blog.zapletalovi.com/me/>About me</a></div><div class=nav-link><a href=https://blog.zapletalovi.com/contact/>Contact</a></div><div class=nav-link><a href=https://blog.zapletalovi.com/tags/>Tags</a></div><div class=nav-link><a href=https://github.com/lzap><span data-feather=github></span></a></div><div class=nav-link><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></div><div class=nav-link><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></div><div class=nav-link><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></div><div class=nav-link><a href=https://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only></span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span id=hamburger-menu-toggle-screen-reader-target class=sr-only>menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://blog.zapletalovi.com/posts/>Posts</a></li><li class=nav-item><a href=https://blog.zapletalovi.com/me/>About me</a></li><li class=nav-item><a href=https://blog.zapletalovi.com/contact/>Contact</a></li><li class=nav-item><a href=https://blog.zapletalovi.com/tags/>Tags</a></li><li class=nav-item><a href=https://github.com/lzap><span data-feather=github></span></a></li><li class=nav-item><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></li><li class=nav-item><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></li><li class=nav-item><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></li><li class=nav-item><a href=https://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only>theme</span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>Zpátky ke kořenům - JSP</h1><small role=doc-subtitle></small><p class=post-date>April 23, 2010</p><ul class=post-tags><li class=post-tag><a href=https://blog.zapletalovi.com/tags/oldblog>oldblog</a></li></ul></div><div class=post-content><p>Když jsou deštivé dny, pracuji na novém (supertajném) projektu, který poběží na Google App Engine (Java) infrastruktuře (dále jen GAE). Toto běhové prostředí je trošku specifické a od tradičních J2EE webových serverů jako je Tomcat, Jetty, JBoss nebo Glassfish se liší tím, že aplikace z paměti odstraňuje. To J2EE servery normálně nedělají (i když by mohly), což způsobilo, že si programátoři (zejména tvůrci webových frameworků) s rychlostí startu aplikací hlavu nedělají.<br><br>V GAE je to problém – pokud určitou dobu nepřijde webové aplikaci nový požadavek, Google aplikaci „stáhne“ a ta pak musí znovu naběhnout. Pokud tedy používáte webový framework, kterému chvíli trvá, než se zinicializuje, je tu problém. Uživatelé pak mohou web opustit, protože čekat 20 vteřin na zobrazení stránky (další již servery vracejí rychle) prostě nechce. Nedejbože když použijete technologie jako jsou EJB nebo Spring.<br><br>Když jsem si vybíral webový framework, který bych pro svoji aplikaci použil, překvapil jsem možná sám sebe. Mojí hlavní podmínkou bylo, že to nesmí být AJAX UI (Google Web Toolkit, ZKoss a jiné) – povaha aplikace to nedovoluje. Potřeboval jsem tedy „klasický“ webový stack, který by byl flexibilní pro vývoj, ale zároveň mocný a zejména ryhchle startoval.<br><br>K mému velkému překvapení to nevyhrál můj původně hlavní favorit – Apache Wicket. Na diskuzních skupinách jsem si totiž mohl přečíst spoustu příspěvků na téma pomalého startu při provozu na GAE. Developeři se v podstatě spokojili s číslem kolem 7 sekund. Jakkoli je to stack přitažlivý, musel jsem hledat jinde.<br><br>Zkoušel jsem se mrknout na Grails. Jazyk Groovy jsem si kdysi prošel v tutoriálu, novým věcem se nebráním. Když jsem si ale přečetl, kolik problémů měli uživatelé s uploadem na GAE, dlouhou inicializací a celkovým výkonem. Jakkoli je to výborná technologie, o kterou se v budoucnu určitě budu zajímat (nejen já), pro můj účel se nehodila.<br><br>Při tom všem hledání jsem narazil na Play Framework, což je v podstatě obrovský posun zpět k tomu, jak se webové aplikace psaly dříve. Autoři záměrně porušují některé zažité zvyklosti ve světě serverové Javy (např. jména balíčků, zapouzdření) ve prospěch rychlejšího a elegantnějšího vývoje. A daří se jim to – framework na mě udělal velmi silný dojem. Start: asi 3 vteřiny (aktuální trunk z Bazaaru). Diskvalifikovala ho jediná věc – šablony se píší v Groovy a ačkoliv jsou pak kompilovány, rychlost tohoto jazyka není na JDK6 stále ideální. Každý bit a každá milisekunda se na GAE tvrdě platí, takže proč nehledat dál.<br><br>O stacku Stripes jsem slyšel už dříve, také jsem si v něm zkoušel Hello World. Musím říct, že je to ideální framework pro můj projekt. Knihovna má 490 kB, závislosti jen na commons-logging.jar a cos.jar, přičemž druhý jmenovaný (multipart encoder) je nepovinný a na GAE dokonce nepoužitelný (soubory se na GAE aplikace nahrávají trošku jinak). Celkem méně než 600 kB. Stripes je velmi snadný na naučení, přitom je elegantní, jednoduchý (anotace) a startuje bleskově – pod 1 vteřinu (jedno kolik máte Action tříd).<br><br>Stripes používá pro prezentační vrstvu JSP. Ano, Java Server Pages – technologii, která byla ve verzi 1.0 propadákem, ale poté (1.1) byla konsolidována, znovu oživena a představuje základ dalšímu stupni (JSF). Tato technologie je však mocná – díky JSP (a standardu/implementace JSTL – dva soubory o celkové velikosti 400 kB) lze bezproblémově a elegantně psát prezentační vrstvu. Stripes používá klasický MVC model, takže použití JSP se přímo nabízí. Lze jej ale integrovat s jinými prezentačními frameworky.<br><br>Na rozdíl od jiných prezentačních technologií má JSP obrovské výhody. Skoro všichni JSP umí (alespoň se s nimi setkali), programátorské nástroje mají špičkovou podporu JSP a vytvořené šablony jsou zkompilovány (JSP→Servlet→class). Jsou tedy výkonné. Už dávno jsou pryč doby, kdy JSP byla vlastně jen specifikace, ve které bylo vše rozdrobené a každý si to dělal jinak. Díky JSTL a také Stripes tagům je práce jednoduchá a jazyk EL byl v předposlední verzi JSP sjednocen.<br><br>Celé vývojové prostředí jsem měl nastavené během chvilky – není divu, je to přece J2EE. Nastavení web.xml mě nemohlo překvapit, stejně jako nahrání dvou „konfiguračních“ souborů do CLASSPATH. Pomocí nich jsem nastavil logování (commons-logging → JUL v GAE) a překladové zprávy (Resources). Ještě zbývala poslední věc – vytvoření dummy implementace pro Multipart Wrapper, který není v GAE povolen (používá temp soubor) a jeho nastavení. Sečteno a podtrženo: 5 minut a všemu rozumím. Ne když člověku pod rukama doslova „vyroste“ adresářová struktura, kde u 60 % souborů člověk pomalu neví, proč tam jsou. Celková velikost včetně knihovny a závislostí: 1 MB.<br><br>Člověk by si říkal, že použití JSP je krok zpátky. Udivilo mě, že to tak není. Krásně se s tím dělá. Lépe než kdy jindy.<br><br><i>Tento zápisek vznikl převodem z mého starého blogu. Ne všechny texty byly takto převedeny, kompletní archiv již není k dispozici.</i></p></div></div></main><footer class=footer><span>&copy; 2022 Lukáš Zapletal, CC BY 4.0</span>
<span>Built with <a href=https://gohugo.io>hugo</a>, template <a target=_blank href=https://github.com/526avijitgupta/gokarna>gokarna</a></span></footer></body></html>