<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>Vim use case - fast edit in buffers</title><meta name=description content="engineer in pyjama"><meta name=keywords content="blog,lzap,lukáš,zapletal,linux,tech,fedora,vim"><meta property="og:url" content="https://blog.zapletalovi.com/posts/2012-12-10-vim-use-case-fast-edit-in-buffers/"><meta property="og:type" content="website"><meta property="og:title" content="Vim use case - fast edit in buffers"><meta property="og:description" content="engineer in pyjama"><meta property="og:image" content="/images/avatar_rh_512.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Vim use case - fast edit in buffers"><meta name=twitter:description content="engineer in pyjama"><meta property="twitter:domain" content="https://blog.zapletalovi.com/posts/2012-12-10-vim-use-case-fast-edit-in-buffers/"><meta property="twitter:url" content="https://blog.zapletalovi.com/posts/2012-12-10-vim-use-case-fast-edit-in-buffers/"><meta name=twitter:image content="/images/avatar_rh_512.jpg"><link rel=canonical href=https://blog.zapletalovi.com/posts/2012-12-10-vim-use-case-fast-edit-in-buffers/><link rel=stylesheet type=text/css href=https://blog.zapletalovi.com/css/normalize.min.css media=print onload='this.media="all"'><link rel=stylesheet type=text/css href=https://blog.zapletalovi.com/css/main.css><link disabled id=dark-theme rel=stylesheet href=https://blog.zapletalovi.com/css/dark.css><script src=https://blog.zapletalovi.com/js/svg-injector.min.js></script>
<script src=https://blog.zapletalovi.com/js/feather-icons.min.js></script>
<script src=https://blog.zapletalovi.com/js/main.js></script>
<script type=text/javascript>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-16034952-1"]),_gaq.push(["_trackPageview"]),function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}()</script></head><body><script type=text/javascript>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://blog.zapletalovi.com><img src=https://blog.zapletalovi.com/images/avatar_rh_512.jpg alt=avatar></a></div><div class=nav-title><a class=nav-brand href=https://blog.zapletalovi.com>Lukáš Zapletal</a></div><div class=nav-links><div class=nav-link><a href=https://blog.zapletalovi.com/posts/>Posts</a></div><div class=nav-link><a href=https://blog.zapletalovi.com/me/>About me</a></div><div class=nav-link><a href=https://blog.zapletalovi.com/contact/>Contact</a></div><div class=nav-link><a href=https://blog.zapletalovi.com/tags/>Tags</a></div><div class=nav-link><a href=https://github.com/lzap><span data-feather=github></span></a></div><div class=nav-link><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></div><div class=nav-link><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></div><div class=nav-link><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></div><div class=nav-link><a href=https://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only></span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span id=hamburger-menu-toggle-screen-reader-target class=sr-only>menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://blog.zapletalovi.com/posts/>Posts</a></li><li class=nav-item><a href=https://blog.zapletalovi.com/me/>About me</a></li><li class=nav-item><a href=https://blog.zapletalovi.com/contact/>Contact</a></li><li class=nav-item><a href=https://blog.zapletalovi.com/tags/>Tags</a></li><li class=nav-item><a href=https://github.com/lzap><span data-feather=github></span></a></li><li class=nav-item><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></li><li class=nav-item><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></li><li class=nav-item><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></li><li class=nav-item><a href=https://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only>theme</span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>Vim use case - fast edit in buffers</h1><small role=doc-subtitle></small><p class=post-date>December 10, 2012</p><ul class=post-tags><li class=post-tag><a href=https://blog.zapletalovi.com/tags/linux>linux</a></li><li class=post-tag><a href=https://blog.zapletalovi.com/tags/fedora>fedora</a></li><li class=post-tag><a href=https://blog.zapletalovi.com/tags/vim>vim</a></li></ul></div><div class=post-content><p><p>My second topic has something do to with workflow I use everyday. I often need
to edit a file(s), commit to git (usually amending the last one), build and
install a package and test it. Often when I am trying my patch that fixes some
bug or something.</p><p>I use tabs when doing regular feature coding. Tabs are great feature of Vim
and works pretty well, but they do not play very well with many files opened.
This is where buffers comes in.</p><p>Buffers are essentially files being edited, or just piece of memory for
unsaved buffers (e.g. quick fix is also a buffer). You can work with them
effectively and they are documented in the &ldquo;Editing with multiple windows and
buffers&rdquo; section of the Vim documentation.</p><p>Simply put, you can open multiple files in Vim (vim file1 file2 &mldr;) and all
files will be &ldquo;magically&rdquo; available as buffers. To list all buffers just use
<em>:ls</em> command, to jump on particular buffer use :Nb where N is index of the
buffer starting from one (for instance :5b). To jump to the next or previous
buffer use <em>:bn</em> (:bnext) and <em>:bp</em> (:bprevious) respectively.</p><p>This is the total minimum to know about buffers. You can do much more with
them, I highly recommend to search the web and read Vim documentation. As I
use them quite often, I have mapped the following combinations for buffers:</p><pre><code>map &lt;leader&gt;j :bnext&lt;CR&gt;
map &lt;leader&gt;k :bprevious&lt;CR&gt;
map &lt;leader&gt;q :b#&lt;CR&gt;
</code></pre><p>Leader key is very special key Vim use for user-defined combinations. Many
Vim users, including me, have leader set to comma key:</p><pre><code>let mapleader = &quot;,&quot;
</code></pre><p>So the final combination I use is, yes you guess it: ,j ,k and ,q. The last
command just switches between last used weapon - I mean buffer. Good old
Counter Strike times :-)</p><p>Okay, back to buffers, here comes the tip. I often need to edit last commited
file(s) from git. You can do this with buffers and simple trick I googled the
other day. Put the following into your ~/.gitconfig</p><pre><code>fshow = ! sh -c 'git show --pretty=&quot;format:&quot; --name-only $1 | grep -v &quot;^$&quot; | uniq | sed -e &quot;s#^#`git rev-parse --show-toplevel`/#&quot;' -
edit  = ! sh -c '$EDITOR `git fshow $1`' -
</code></pre><p>Suppose you do this:</p><pre><code>touch fileA fileB
git add file*; git commit -a &quot;blah&quot;
touch fileX
git add file*; git commit -a &quot;blah&quot;
</code></pre><p>Now, to edit latest fileX real quick, just issue</p><pre><code>git edit
</code></pre><p>And Vim loads the latest commited file into the first buffer. Thats the
default one, you can start editing immediately. Now, to load all three files
just do this:</p><pre><code>git edit HEAD^..
</code></pre><p>Use what you know about buffers to navigate them. To load all changed files
from last ten commits, do</p><pre><code>git edit HEAD~10..
</code></pre><p>I often edit the latest file (git edit) amending the latest commit to
overwrite my change when I test it.</p></p></div></div></main><footer class=footer><span>&copy; 2022 Lukáš Zapletal, CC BY 4.0</span>
<span>Built with <a href=https://gohugo.io>hugo</a>, template <a target=_blank href=https://github.com/526avijitgupta/gokarna>gokarna</a></span></footer></body></html>