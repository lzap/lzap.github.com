<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>How to reach your Fedora/RHEL behind NAT</title><meta name=description content="engineer in pyjama"><meta name=keywords content="blog,lzap,lukáš,zapletal,linux,tech,fedora"><meta property="og:url" content="http://blog.zapletalovi.com/posts/2013-11-27-how-to-reach-your-fedorarhel-behind-nat/"><meta property="og:type" content="website"><meta property="og:title" content="How to reach your Fedora/RHEL behind NAT"><meta property="og:description" content="engineer in pyjama"><meta property="og:image" content="/images/avatar_rh_512.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="How to reach your Fedora/RHEL behind NAT"><meta name=twitter:description content="engineer in pyjama"><meta property="twitter:domain" content="http://blog.zapletalovi.com/posts/2013-11-27-how-to-reach-your-fedorarhel-behind-nat/"><meta property="twitter:url" content="http://blog.zapletalovi.com/posts/2013-11-27-how-to-reach-your-fedorarhel-behind-nat/"><meta name=twitter:image content="/images/avatar_rh_512.jpg"><link rel=canonical href=http://blog.zapletalovi.com/posts/2013-11-27-how-to-reach-your-fedorarhel-behind-nat/><link rel=stylesheet type=text/css href=http://blog.zapletalovi.com/css/normalize.min.css media=print onload='this.media="all"'><link rel=stylesheet type=text/css href=http://blog.zapletalovi.com/css/main.css><link disabled id=dark-theme rel=stylesheet href=http://blog.zapletalovi.com/css/dark.css><script src=http://blog.zapletalovi.com/js/svg-injector.min.js></script>
<script src=http://blog.zapletalovi.com/js/feather-icons.min.js></script>
<script src=http://blog.zapletalovi.com/js/main.js></script>
<script type=text/javascript>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-16034952-1"]),_gaq.push(["_trackPageview"]),function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}()</script></head><body><script type=text/javascript>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=http://blog.zapletalovi.com><img src=http://blog.zapletalovi.com/images/avatar_rh_512.jpg alt=avatar></a></div><div class=nav-title><a class=nav-brand href=http://blog.zapletalovi.com>Lukáš Zapletal</a></div><div class=nav-links><div class=nav-link><a href=http://blog.zapletalovi.com/posts/>Posts</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/me/>About me</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/contact/>Contact</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/tags/>Tags</a></div><div class=nav-link><a href=https://github.com/lzap><span data-feather=github></span></a></div><div class=nav-link><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></div><div class=nav-link><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></div><div class=nav-link><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></div><div class=nav-link><a href=http://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only></span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span id=hamburger-menu-toggle-screen-reader-target class=sr-only>menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=http://blog.zapletalovi.com/posts/>Posts</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/me/>About me</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/contact/>Contact</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/tags/>Tags</a></li><li class=nav-item><a href=https://github.com/lzap><span data-feather=github></span></a></li><li class=nav-item><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></li><li class=nav-item><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></li><li class=nav-item><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></li><li class=nav-item><a href=http://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only>theme</span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>How to reach your Fedora/RHEL behind NAT</h1><small role=doc-subtitle></small><p class=post-date>November 27, 2013</p><ul class=post-tags><li class=post-tag><a href=http://blog.zapletalovi.com/tags/linux>linux</a></li><li class=post-tag><a href=http://blog.zapletalovi.com/tags/fedora>fedora</a></li></ul></div><div class=post-content><p><p>I am using an excellent open-source tunneling solution called PageKite for
about an year now. It&rsquo;s a small utility written in Python with almost zero
dependencies (okay there is one) and it enables you to reach various ports
behind NAT. More on the <a href=https://pagekite.net>PageKite.net</a> which also
provides subscription-based service for those who do not want to run their own
man-in-the-middle server (which is needed for this to operate). By the way
they datacenters are spread over whole world with excellent Europe coverage.</p><p>After decent testing time, I pushed PageKite into EPEL 5 and 6 (it is already
included in Fedora repos). Installation and setup is ultra easy:</p><pre><code># yum -y install pagekite
</code></pre><p>In the PageKite.net service, create your account and create new &ldquo;kite&rdquo;. That
is basically a subdomain which will be used for your machine. Now edit this
file:</p><pre><code># vim /etc/pagekite.d/10_account.rc
</code></pre><p>Set your &lsquo;kitename&rsquo; (which you created recently) and &lsquo;kitesecret&rsquo; token and
delete &lsquo;abort_not_configured&rsquo; line. We want to enable SSH tunneling:</p><pre><code># mv /etc/pagekite.d/80_sshd.rc.sample /etc/pagekite.d/80_sshd.rc
</code></pre><p>If you want to tunnel HTTP, do this:</p><pre><code># mv /etc/pagekite.d/80_httpd.rc.sample /etc/pagekite.d/80_httpd.rc
</code></pre><p>You can tunnel any other protocol, read PageKite documentation for more. Start
the thing:</p><pre><code># service pagekite start
</code></pre><p>Logs are here:</p><pre><code># tail /var/log/pagekite/pagekite.log -f
</code></pre><p>It&rsquo;s the time to connect via your new tunnel. It is not that straightforward
as you may expect, but you need to tune your ssh client configuration a bit:</p><pre><code># vim ~/.ssh/config
...
Host *.pagekite.me
    CheckHostIP no
    ProxyCommand /usr/bin/corkscrew %h 443 %h %p
...
</code></pre><p>I am using corkscrew tool which is a TCP tunneling solution via HTTP, which
works great with PageKite. There are other options, but this one is the
easiest and the most reliable. You will need to install the corkscrew tool (I
am on Fedora):</p><pre><code># yum -y install corkscrew
</code></pre><p>Work done!</p><pre><code># ssh yourkite-yourname.pagekite.me
</code></pre><p>Nice, isn&rsquo;t it? Now, if you find out how to tunnel
<a href=http://mosh.mit.edu/>mosh</a> protocol, let me know bellow.</p></p></div></div></main><footer class=footer><span>&copy; 2022 Lukáš Zapletal, CC BY 4.0</span>
<span>Built with <a href=https://gohugo.io>hugo</a>, template <a target=_blank href=https://github.com/526avijitgupta/gokarna>gokarna</a></span></footer></body></html>