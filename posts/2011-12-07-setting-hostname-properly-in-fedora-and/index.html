<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>Setting hostname properly in Fedora and Red Hat</title><meta name=description content="engineer in pyjama"><meta name=keywords content="blog,lzap,lukáš,zapletal,linux,tech,hostname,fedora,rhel"><meta property="og:url" content="http://blog.zapletalovi.com/posts/2011-12-07-setting-hostname-properly-in-fedora-and/"><meta property="og:type" content="website"><meta property="og:title" content="Setting hostname properly in Fedora and Red Hat"><meta property="og:description" content="engineer in pyjama"><meta property="og:image" content="/images/avatar_rh_512.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Setting hostname properly in Fedora and Red Hat"><meta name=twitter:description content="engineer in pyjama"><meta property="twitter:domain" content="http://blog.zapletalovi.com/posts/2011-12-07-setting-hostname-properly-in-fedora-and/"><meta property="twitter:url" content="http://blog.zapletalovi.com/posts/2011-12-07-setting-hostname-properly-in-fedora-and/"><meta name=twitter:image content="/images/avatar_rh_512.jpg"><link rel=canonical href=http://blog.zapletalovi.com/posts/2011-12-07-setting-hostname-properly-in-fedora-and/><link rel=stylesheet type=text/css href=http://blog.zapletalovi.com/css/normalize.min.css media=print onload='this.media="all"'><link rel=stylesheet type=text/css href=http://blog.zapletalovi.com/css/main.css><link disabled id=dark-theme rel=stylesheet href=http://blog.zapletalovi.com/css/dark.css><script src=http://blog.zapletalovi.com/js/svg-injector.min.js></script>
<script src=http://blog.zapletalovi.com/js/feather-icons.min.js></script>
<script src=http://blog.zapletalovi.com/js/main.js></script>
<script type=text/javascript>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-16034952-1"]),_gaq.push(["_trackPageview"]),function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}()</script></head><body><script type=text/javascript>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=http://blog.zapletalovi.com><img src=http://blog.zapletalovi.com/images/avatar_rh_512.jpg alt=avatar></a></div><div class=nav-title><a class=nav-brand href=http://blog.zapletalovi.com>Lukáš Zapletal</a></div><div class=nav-links><div class=nav-link><a href=http://blog.zapletalovi.com/posts/>Posts</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/me/>About me</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/contact/>Contact</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/tags/>Tags</a></div><div class=nav-link><a href=https://github.com/lzap><span data-feather=github></span></a></div><div class=nav-link><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></div><div class=nav-link><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></div><div class=nav-link><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></div><div class=nav-link><a href=http://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only></span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span id=hamburger-menu-toggle-screen-reader-target class=sr-only>menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=http://blog.zapletalovi.com/posts/>Posts</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/me/>About me</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/contact/>Contact</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/tags/>Tags</a></li><li class=nav-item><a href=https://github.com/lzap><span data-feather=github></span></a></li><li class=nav-item><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></li><li class=nav-item><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></li><li class=nav-item><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></li><li class=nav-item><a href=http://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only>theme</span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>Setting hostname properly in Fedora and Red Hat</h1><small role=doc-subtitle></small><p class=post-date>December 7, 2011</p><ul class=post-tags><li class=post-tag><a href=http://blog.zapletalovi.com/tags/hostname>hostname</a></li><li class=post-tag><a href=http://blog.zapletalovi.com/tags/fedora>fedora</a></li><li class=post-tag><a href=http://blog.zapletalovi.com/tags/rhel>rhel</a></li></ul></div><div class=post-content><p><p>I have been playing with hostnames yesterday and I had to stop for a while today doing a little research. Setting up a hostname is not a hard task, in Fedora and Red Hat it's a matter of editing one file:</p><pre><code># grep HOSTNAME /etc/sysconfig/network<br>HOSTNAME=test.lan<br></code></pre><p>Here you set the whole FQDN. If you ever seen entries like DOMAINNAME in this file, they are wrong for Fedora or RHEL. If you want to change hostname without rebooting few steps are necessary:</p><pre><code># hostname test.lan<br># service network restart<br></code></pre><p>I skipped one simple, yet important step - setting <em>/etc/hosts</em>. It differs for situations when you use DHCP or not.</p><p><strong>Clients with DHCP</strong></p><p>With properly configured DHCP server, hostname should be propagated or defined by network administrator, there is no need of adding hostname to the <em>/etc/hosts</em>. For clients, it is really not necessary. Trust me. Keep only localhost there, walk your dog, enjoy life.</p><p><strong>Servers with static IP</strong></p><p>This is totally different scenario - server with static IP address must have entry in the <em>/etc/hosts</em> file in the following format (assuming a random class C address):</p><pre><code># grep test /etc/hosts<br>192.168.1.1 test.lan test<br></code></pre><p>Please note the order matters. You must keep the following order: <em>ipaddress fqdn hostname</em>. I recommend to do a check-up after adding entries:</p><pre><code># hostname <br>test.lan<br># hostname -s<br>test<br># hostname -f<br>test.lan<br></code></pre><p>With the incorrect order you will see <em>hostname -f</em> returning non-fully qualified response:</p><pre><code># grep test /etc/hosts<br>192.168.1.1 test test.lan # incorrect order<br># hostname -f<br>test<br></code></pre><p>The key for this behavior is in the manual page of hostname command:</p><p>The function gethostname(2) is used to get the hostname. When the hostname -a, -d, -f or -i is called will gethostbyname(3) be called. The difference in gethostname(2) and gethostbyname(3) is that gethostbyname(3) is network aware, so it consults /etc/nsswitch.conf and /etc/host.conf to decide whether to read information in /etc/sysconfig/network or /etc/hosts.</p><p><strong>Servers with DHCP</strong></p><p>Wait a minute! A server without static IP address? Does it make sense? Well, in the cloud it is not unusual to provision servers configured with DHCP. But cloud providers usually allow customers to reserve IPs for a while so it does not change. If this is your case, I recommend to stick with the <em>servers with static IP</em> rule. If the IP address changes rapidly, I would recomment <em>clients with DHCP</em> rule, but make sure hostname command returns correct answers for both -s and -f options, as seen above.</p><p>In the latter case, contact your cloud provider asking how to set up hostname properly. Sometimes in testing environments servers with IPs delivered by DHCP servers do not have proper DNS setup. And you can have a service that insists on having hostname resolved. In this case, only in this case, I would recommend adding loop back hostname entry:</p><pre><code># grep test /etc/hosts<br>127.0.0.1 test.lan test<br></code></pre><p>Again, keep the right order and make sure it does not mess up services on that box. Be prepared to see "Cannot determine hostname" warning when starting Apache for example.</p></p></div></div></main><footer class=footer><span>&copy; 2022 Lukáš Zapletal, CC BY 4.0</span>
<span>Built with <a href=https://gohugo.io>hugo</a>, template <a target=_blank href=https://github.com/526avijitgupta/gokarna>gokarna</a></span></footer></body></html>