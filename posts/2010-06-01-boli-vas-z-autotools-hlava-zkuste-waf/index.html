<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>Bolí vás z autotools hlava? Zkuste waf!</title><meta name=description content="engineer in pyjama"><meta name=keywords content="blog,lzap,lukáš,zapletal,linux,tech,waf,unix"><meta property="og:url" content="http://blog.zapletalovi.com/posts/2010-06-01-boli-vas-z-autotools-hlava-zkuste-waf/"><meta property="og:type" content="website"><meta property="og:title" content="Bolí vás z autotools hlava? Zkuste waf!"><meta property="og:description" content="engineer in pyjama"><meta property="og:image" content="/images/avatar_rh_512.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Bolí vás z autotools hlava? Zkuste waf!"><meta name=twitter:description content="engineer in pyjama"><meta property="twitter:domain" content="http://blog.zapletalovi.com/posts/2010-06-01-boli-vas-z-autotools-hlava-zkuste-waf/"><meta property="twitter:url" content="http://blog.zapletalovi.com/posts/2010-06-01-boli-vas-z-autotools-hlava-zkuste-waf/"><meta name=twitter:image content="/images/avatar_rh_512.jpg"><link rel=canonical href=http://blog.zapletalovi.com/posts/2010-06-01-boli-vas-z-autotools-hlava-zkuste-waf/><link rel=stylesheet type=text/css href=http://blog.zapletalovi.com/css/normalize.min.css media=print onload='this.media="all"'><link rel=stylesheet type=text/css href=http://blog.zapletalovi.com/css/main.css><link disabled id=dark-theme rel=stylesheet href=http://blog.zapletalovi.com/css/dark.css><script src=http://blog.zapletalovi.com/js/svg-injector.min.js></script>
<script src=http://blog.zapletalovi.com/js/feather-icons.min.js></script>
<script src=http://blog.zapletalovi.com/js/main.js></script>
<script type=text/javascript>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-16034952-1"]),_gaq.push(["_trackPageview"]),function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}()</script></head><body><script type=text/javascript>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=http://blog.zapletalovi.com><img src=http://blog.zapletalovi.com/images/avatar_rh_512.jpg alt=avatar></a></div><div class=nav-title><a class=nav-brand href=http://blog.zapletalovi.com>Lukáš Zapletal</a></div><div class=nav-links><div class=nav-link><a href=http://blog.zapletalovi.com/posts/>Posts</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/me/>About me</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/contact/>Contact</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/tags/>Tags</a></div><div class=nav-link><a href=https://github.com/lzap><span data-feather=github></span></a></div><div class=nav-link><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></div><div class=nav-link><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></div><div class=nav-link><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></div><div class=nav-link><a href=http://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only></span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span id=hamburger-menu-toggle-screen-reader-target class=sr-only>menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=http://blog.zapletalovi.com/posts/>Posts</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/me/>About me</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/contact/>Contact</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/tags/>Tags</a></li><li class=nav-item><a href=https://github.com/lzap><span data-feather=github></span></a></li><li class=nav-item><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></li><li class=nav-item><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></li><li class=nav-item><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></li><li class=nav-item><a href=http://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only>theme</span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>Bolí vás z autotools hlava? Zkuste waf!</h1><small role=doc-subtitle></small><p class=post-date>June 1, 2010</p><ul class=post-tags><li class=post-tag><a href=http://blog.zapletalovi.com/tags/waf>waf</a></li><li class=post-tag><a href=http://blog.zapletalovi.com/tags/linux>linux</a></li><li class=post-tag><a href=http://blog.zapletalovi.com/tags/unix>unix</a></li></ul></div><div class=post-content><p>Přiznám se, že autotools znám jen zběžně. Používat jej (configure & make & make install) umím, vytvořit menší projekt o několika souborech také. Ale "hrabat" se ve velkém projektu plném vychytávek a jiných maker, tak to jsem doslova obestlaný manuály, dokumentací a info stránkami. Existuje něco podobně mocného, jako autotools, ale přesto přenositelného a se stejnými možnostmi? Ano. Waf.<br><br>Obrovskou výhodou autotools (jinými slovy ./configure & make & make install) je fakt, že ke svému běhu potřebují jen shell (sh). Díky autotools lze kompilovat programy na odlišných UNIXových systémech i jinde. Dnes je situace jiná - není třeba zas tak velké přenositelnosti. Typicky se autor programu snaží docílit překladu na Linuxu, MacOS a Windows. Když se program přeloží bez větších obtíží na BSD, je to bonus. Shell jako minimum je prostě overkill. Waf potřebuje jen Python, který k němu lze snadno přiložit.<br><br>Tématem zápisku je <a href=http://code.google.com/p/waf/>waf</a> - miniaturní skript (méně než 100 kB), který ke svému běhu potřebuje pouze interpret Pythonu verze 2.3 nebo vyšší (až do verze 3.1), případně Jython. To řada systémů splňuje bez problémů, případně lze Python k programu připojit (např jython.jar).<br><br>V tomto jediném souboru (skriptu) je všechno, co potřebujete. Po prvním spuštění se Waf rozbalí do skrytého adresáře s projektem&nbsp;(.waf-verze-hash - jsou to soubory v Pythonu) a poté se již nerozbaluje. Umí vše, co se od takového nástroje očekává.<br><br>Skript waf je&nbsp;<a href=http://freehackers.org/~tnagy/wafbook/index.html>velice mocný</a>&nbsp;a plně zastoupí autotools (autoconf, automake, configure, make, make install). Psaní build skriptů je snadné, k základům postačí pár minut čtení dokumentace.<br><br>Waf přináší mnoho nových a zajímavých vlastností. Kromě nadstandardních balíčkovacích a testovacích možností nabízí napojení na server kontinuální integrace. Můžete si aktivovat vlastní ccache, nebo si nastavit barvy výstupu na konzoli včetně progress baru. Waf je vysoce rozšiřitelný a pokud umíte základy Pythonu, psaní build skriptů bude hračkou.<br><br>Na několika velkých projektech jsem si již ověřil, že jakmile se posunete za hranice obyčejného sestavování a chcete víc, vždy se pak snažíte "naroubovat" jiné nástroje a postupy na utility typu GNU Make nebo Apache Maven/Ant. Výsledky pak někdy nejsou ideální. Waf je na budoucí rozšiřování nejen připraven, on vlastně k tomu svým návrhem vybízí. A díky Pythonu jsou skripty lépe přenositelné než kdy jindy.<br><br>Když už začnete experimentovat s Wafem, zkuste také velmi pěkné odlehčené programovací prostředí (IDE) pojmenované Geanie. Je podobně jako Waf nenáročné, přesto nabízí mnoho zajímavých funkcí. Ačkoli s Wafem nesouvisí, při brouzdání jsem na něj narazil.<br><br>Waf je zajjímavý nástroj a možná může vyřešit váš problém.</p></div></div></main><footer class=footer><span>&copy; 2022 Lukáš Zapletal, CC BY 4.0</span>
<span>Built with <a href=https://gohugo.io>hugo</a>, template <a target=_blank href=https://github.com/526avijitgupta/gokarna>gokarna</a></span></footer></body></html>