<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>Configure journal on your Fedora</title><meta name=description content="engineer in pyjama"><meta name=keywords content="blog,lzap,lukáš,zapletal,linux,tech,fedora"><meta property="og:url" content="http://blog.zapletalovi.com/posts/2015-04-01-configure-journal-on-your-fedora/"><meta property="og:type" content="website"><meta property="og:title" content="Configure journal on your Fedora"><meta property="og:description" content="engineer in pyjama"><meta property="og:image" content="/images/avatar_rh_512.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Configure journal on your Fedora"><meta name=twitter:description content="engineer in pyjama"><meta property="twitter:domain" content="http://blog.zapletalovi.com/posts/2015-04-01-configure-journal-on-your-fedora/"><meta property="twitter:url" content="http://blog.zapletalovi.com/posts/2015-04-01-configure-journal-on-your-fedora/"><meta name=twitter:image content="/images/avatar_rh_512.jpg"><link rel=canonical href=http://blog.zapletalovi.com/posts/2015-04-01-configure-journal-on-your-fedora/><link rel=stylesheet type=text/css href=http://blog.zapletalovi.com/css/normalize.min.css media=print onload='this.media="all"'><link rel=stylesheet type=text/css href=http://blog.zapletalovi.com/css/main.css><link disabled id=dark-theme rel=stylesheet href=http://blog.zapletalovi.com/css/dark.css><script src=http://blog.zapletalovi.com/js/svg-injector.min.js></script>
<script src=http://blog.zapletalovi.com/js/feather-icons.min.js></script>
<script src=http://blog.zapletalovi.com/js/main.js></script>
<script type=text/javascript>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-16034952-1"]),_gaq.push(["_trackPageview"]),function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}()</script></head><body><script type=text/javascript>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=http://blog.zapletalovi.com><img src=http://blog.zapletalovi.com/images/avatar_rh_512.jpg alt=avatar></a></div><div class=nav-title><a class=nav-brand href=http://blog.zapletalovi.com>Lukáš Zapletal</a></div><div class=nav-links><div class=nav-link><a href=http://blog.zapletalovi.com/posts/>Posts</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/me/>About me</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/contact/>Contact</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/tags/>Tags</a></div><div class=nav-link><a href=https://github.com/lzap><span data-feather=github></span></a></div><div class=nav-link><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></div><div class=nav-link><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></div><div class=nav-link><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></div><div class=nav-link><a href=http://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only></span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span id=hamburger-menu-toggle-screen-reader-target class=sr-only>menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=http://blog.zapletalovi.com/posts/>Posts</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/me/>About me</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/contact/>Contact</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/tags/>Tags</a></li><li class=nav-item><a href=https://github.com/lzap><span data-feather=github></span></a></li><li class=nav-item><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></li><li class=nav-item><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></li><li class=nav-item><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></li><li class=nav-item><a href=http://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only>theme</span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>Configure journal on your Fedora</h1><small role=doc-subtitle></small><p class=post-date>April 1, 2015</p><ul class=post-tags><li class=post-tag><a href=http://blog.zapletalovi.com/tags/linux>linux</a></li><li class=post-tag><a href=http://blog.zapletalovi.com/tags/fedora>fedora</a></li></ul></div><div class=post-content><p><p>I was busy last couple of months, but I am doing fine. Recently, I noticed
that journald system logs on my laptop got bigger recently. By default systemd
eats ten per cent of the size of the file system. That is too much on my 256
MB SSD drive.</p><pre><code># journalctl --disk-usage
Journals take up 1.8G on disk.
</code></pre><p>Configuration is trivial and fully documented in the journald.conf(5) manual
page. My idea is to keep half-a-gig of logs or entries with maximum age of two
months. And I don&rsquo;t want to forward to syslog (klog and console) anymore to
save more space:</p><pre><code># grep -v '^#' /etc/systemd/journald.conf

[Journal]
SystemMaxUse=500M
MaxRetentionSec=2month
ForwardToSyslog=no
ForwardToKMsg=no
ForwardToConsole=no
</code></pre><p>Time to restart journald I guess.</p><pre><code># sudo systemctl restart systemd-journald.service
</code></pre><p>I had some coredumps in my log and this is a laptop so there are not that many
entries every month, so it&rsquo;s no surprise that disk usage is smaller.</p><pre><code># journalctl --disk-usage
Journals take up 224.0M on disk.
</code></pre><p>Time to do cleanup of syslog log files:</p><pre><code># sudo rm -v /var/log/*{gz,-[0-9][0-9]*}
removed ‘/var/log/cron-20150309’
removed ‘/var/log/cron-20150317’
removed ‘/var/log/cron-20150323’
removed ‘/var/log/cron-20150330’
removed ‘/var/log/dnf.log-20150319’
...
</code></pre><p>And I am not going to use syslog anymore on this laptop.</p><pre><code># sudo systemctl stop rsyslog.service
# sudo systemctl disable rsyslog.service
</code></pre><p>Let&rsquo;s shrink syslog files to let&rsquo;s say thousand of bytes.</p><pre><code># sudo truncate --size 1000 /var/log/{messages,secure,maillog,cron,spooler,boot.log,dnf.log,fedup.log,firewalld,lastlog,upgrade.log,wtmp,yum.log}
</code></pre><p>I could go even further by uninstalling <em>rsyslog</em> package, but I will leave
that on my system for now. Cheers!</p></p></div></div></main><footer class=footer><span>&copy; 2022 Lukáš Zapletal, CC BY 4.0</span>
<span>Built with <a href=https://gohugo.io>hugo</a>, template <a target=_blank href=https://github.com/526avijitgupta/gokarna>gokarna</a></span></footer></body></html>