<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>Ruby 1.9 MRI vs Google Dart 0.2 TP</title><meta name=description content="engineer in pyjama"><meta name=keywords content="blog,lzap,lukáš,zapletal,linux,tech,ruby,dart"><meta property="og:url" content="http://blog.zapletalovi.com/posts/2012-11-07-ruby-19-mri-vs-google-dart-02-tp/"><meta property="og:type" content="website"><meta property="og:title" content="Ruby 1.9 MRI vs Google Dart 0.2 TP"><meta property="og:description" content="engineer in pyjama"><meta property="og:image" content="/images/avatar_rh_512.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Ruby 1.9 MRI vs Google Dart 0.2 TP"><meta name=twitter:description content="engineer in pyjama"><meta property="twitter:domain" content="http://blog.zapletalovi.com/posts/2012-11-07-ruby-19-mri-vs-google-dart-02-tp/"><meta property="twitter:url" content="http://blog.zapletalovi.com/posts/2012-11-07-ruby-19-mri-vs-google-dart-02-tp/"><meta name=twitter:image content="/images/avatar_rh_512.jpg"><link rel=canonical href=http://blog.zapletalovi.com/posts/2012-11-07-ruby-19-mri-vs-google-dart-02-tp/><link rel=stylesheet type=text/css href=http://blog.zapletalovi.com/css/normalize.min.css media=print onload='this.media="all"'><link rel=stylesheet type=text/css href=http://blog.zapletalovi.com/css/main.css><link disabled id=dark-theme rel=stylesheet href=http://blog.zapletalovi.com/css/dark.css><script src=http://blog.zapletalovi.com/js/svg-injector.min.js></script>
<script src=http://blog.zapletalovi.com/js/feather-icons.min.js></script>
<script src=http://blog.zapletalovi.com/js/main.js></script>
<script type=text/javascript>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-16034952-1"]),_gaq.push(["_trackPageview"]),function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}()</script></head><body><script type=text/javascript>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=http://blog.zapletalovi.com><img src=http://blog.zapletalovi.com/images/avatar_rh_512.jpg alt=avatar></a></div><div class=nav-title><a class=nav-brand href=http://blog.zapletalovi.com>Lukáš Zapletal</a></div><div class=nav-links><div class=nav-link><a href=http://blog.zapletalovi.com/posts/>Posts</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/me/>About me</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/contact/>Contact</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/tags/>Tags</a></div><div class=nav-link><a href=https://github.com/lzap><span data-feather=github></span></a></div><div class=nav-link><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></div><div class=nav-link><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></div><div class=nav-link><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></div><div class=nav-link><a href=http://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only></span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span id=hamburger-menu-toggle-screen-reader-target class=sr-only>menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=http://blog.zapletalovi.com/posts/>Posts</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/me/>About me</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/contact/>Contact</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/tags/>Tags</a></li><li class=nav-item><a href=https://github.com/lzap><span data-feather=github></span></a></li><li class=nav-item><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></li><li class=nav-item><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></li><li class=nav-item><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></li><li class=nav-item><a href=http://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only>theme</span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>Ruby 1.9 MRI vs Google Dart 0.2 TP</h1><small role=doc-subtitle></small><p class=post-date>November 7, 2012</p><ul class=post-tags><li class=post-tag><a href=http://blog.zapletalovi.com/tags/linux>linux</a></li><li class=post-tag><a href=http://blog.zapletalovi.com/tags/ruby>ruby</a></li><li class=post-tag><a href=http://blog.zapletalovi.com/tags/dart>dart</a></li></ul></div><div class=post-content><p><p>Ok, I know I know. Those are not tests, but I was just trying out Dart
language tonight and I wanted to share this. Such a young language, but driven
by V8 Google team, is that fast.</p><p>This is my Ruby version compiled about four weeks ago. By MRI I mean Matz
Reference Implementation, the widely used Ruby VM. There are more and faster,
but not much.</p><pre><code>$ ruby --version
ruby 1.9.3p286 (2012-10-12 revision 37165) [x86_64-linux]
</code></pre><p>And this is Dart I just downloaded today, compiled one week ago. By TP I mean
Technology Preview. This is work in progress for sure.</p><pre><code>$ dart --version
Dart VM version: 0.2.2.1_14493_chrome-bot (Fri Nov  2 11:25:18 2012)
</code></pre><p>Now the &ldquo;fight&rdquo; code for Ruby:</p><pre><code>$ cat fib.rb
def fib(n)
    n &lt; 2 ? n : fib(n-1) + fib(n-2)
end
for i in 1..40
    f = fib i
    puts &quot;#{i} + #{f}&quot;
end
</code></pre><p>And the same for Dart:</p><pre><code>$ cat fib.dart 
int fib(int n) {
   if (n &lt; 2) return n;
   return fib(n - 1) + fib(n - 2);
}
main() {
  for (int i = 0; i &lt;= 40; i++) {
    var f = fib(i);
    print(&quot;$i = $f&quot;);
  }
}
</code></pre><p>Again, this says really nothing. But what can stop me from running this? ;-)</p><pre><code>$ time ruby fib.rb
1 + 1
2 + 1
3 + 2
4 + 3
5 + 5
6 + 8
7 + 13
8 + 21
9 + 34
10 + 55
11 + 89
12 + 144
13 + 233
14 + 377
15 + 610
16 + 987
17 + 1597
18 + 2584
19 + 4181
20 + 6765
21 + 10946
22 + 17711
23 + 28657
24 + 46368
25 + 75025
26 + 121393
27 + 196418
28 + 317811
29 + 514229
30 + 832040
31 + 1346269
32 + 2178309
33 + 3524578
34 + 5702887
35 + 9227465
36 + 14930352
37 + 24157817
38 + 39088169
39 + 63245986
40 + 102334155

real    1m9.215s
user    1m6.852s
sys 0m0.035s
</code></pre><p>A minute and ten. Not bad. Now let&rsquo;s have a look on Dart.</p><pre><code>$ time dart fib.dart 
0 = 0
1 = 1
2 = 1
3 = 2
4 = 3
5 = 5
6 = 8
7 = 13
8 = 21
9 = 34
10 = 55
11 = 89
12 = 144
13 = 233
14 = 377
15 = 610
16 = 987
17 = 1597
18 = 2584
19 = 4181
20 = 6765
21 = 10946
22 = 17711
23 = 28657
24 = 46368
25 = 75025
26 = 121393
27 = 196418
28 = 317811
29 = 514229
30 = 832040
31 = 1346269
32 = 2178309
33 = 3524578
34 = 5702887
35 = 9227465
36 = 14930352
37 = 24157817
38 = 39088169
39 = 63245986
40 = 102334155

real    0m3.936s
user    0m3.767s
sys 0m0.006s
</code></pre><p>Four seconds. Wait, four seconds? Hmmm, does this mean Dart VM is faster than Ruby VM?
Not necessarily. Does this mean optimizer in Dart is better than in Ruby? Hell yeah!</p></p></div></div></main><footer class=footer><span>&copy; 2022 Lukáš Zapletal, CC BY 4.0</span>
<span>Built with <a href=https://gohugo.io>hugo</a>, template <a target=_blank href=https://github.com/526avijitgupta/gokarna>gokarna</a></span></footer></body></html>