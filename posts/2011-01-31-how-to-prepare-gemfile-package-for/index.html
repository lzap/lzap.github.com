<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>How to prepare a gemfile package for Fedora</title><meta name=description content="engineer in pyjama"><meta name=keywords content="blog,lzap,lukáš,zapletal,linux,tech,fedora,english"><meta property="og:url" content="http://blog.zapletalovi.com/posts/2011-01-31-how-to-prepare-gemfile-package-for/"><meta property="og:type" content="website"><meta property="og:title" content="How to prepare a gemfile package for Fedora"><meta property="og:description" content="engineer in pyjama"><meta property="og:image" content="/images/avatar_rh_512.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="How to prepare a gemfile package for Fedora"><meta name=twitter:description content="engineer in pyjama"><meta property="twitter:domain" content="http://blog.zapletalovi.com/posts/2011-01-31-how-to-prepare-gemfile-package-for/"><meta property="twitter:url" content="http://blog.zapletalovi.com/posts/2011-01-31-how-to-prepare-gemfile-package-for/"><meta name=twitter:image content="/images/avatar_rh_512.jpg"><link rel=canonical href=http://blog.zapletalovi.com/posts/2011-01-31-how-to-prepare-gemfile-package-for/><link rel=stylesheet type=text/css href=http://blog.zapletalovi.com/css/normalize.min.css media=print onload='this.media="all"'><link rel=stylesheet type=text/css href=http://blog.zapletalovi.com/css/main.css><link disabled id=dark-theme rel=stylesheet href=http://blog.zapletalovi.com/css/dark.css><script src=http://blog.zapletalovi.com/js/svg-injector.min.js></script>
<script src=http://blog.zapletalovi.com/js/feather-icons.min.js></script>
<script src=http://blog.zapletalovi.com/js/main.js></script>
<script type=text/javascript>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-16034952-1"]),_gaq.push(["_trackPageview"]),function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}()</script></head><body><script type=text/javascript>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=http://blog.zapletalovi.com><img src=http://blog.zapletalovi.com/images/avatar_rh_512.jpg alt=avatar></a></div><div class=nav-title><a class=nav-brand href=http://blog.zapletalovi.com>Lukáš Zapletal</a></div><div class=nav-links><div class=nav-link><a href=http://blog.zapletalovi.com/posts/>Posts</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/me/>About me</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/contact/>Contact</a></div><div class=nav-link><a href=http://blog.zapletalovi.com/tags/>Tags</a></div><div class=nav-link><a href=https://github.com/lzap><span data-feather=github></span></a></div><div class=nav-link><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></div><div class=nav-link><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></div><div class=nav-link><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></div><div class=nav-link><a href=http://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only></span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span id=hamburger-menu-toggle-screen-reader-target class=sr-only>menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=http://blog.zapletalovi.com/posts/>Posts</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/me/>About me</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/contact/>Contact</a></li><li class=nav-item><a href=http://blog.zapletalovi.com/tags/>Tags</a></li><li class=nav-item><a href=https://github.com/lzap><span data-feather=github></span></a></li><li class=nav-item><a href=https://mastodon.social/@lzap><img class=svg-inject src=/svg/icons/mastodon.svg></a></li><li class=nav-item><a href=https://twitter.com/lzap><span data-feather=twitter></span></a></li><li class=nav-item><a href=https://www.buymeacoffee.com/lzap><span data-feather=coffee></span></a></li><li class=nav-item><a href=http://blog.zapletalovi.com/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only>theme</span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>How to prepare a gemfile package for Fedora</h1><small role=doc-subtitle></small><p class=post-date>January 31, 2011</p><ul class=post-tags><li class=post-tag><a href=http://blog.zapletalovi.com/tags/fedora>fedora</a></li><li class=post-tag><a href=http://blog.zapletalovi.com/tags/english>english</a></li></ul></div><div class=post-content><p>It's a piece of cake to create a gemfile RPM package using the gem2rpm tool, but <a href=http://fedoraproject.org/wiki/Packaging/Ruby>Fedora Package Guidelines for Ruby</a> compliance is not that straightforward. Let me explain basic issues a packager will be facing to.<br><br>The fist part is a duck soup. Really. Set the gem2rpm against downloaded <a href=http://rubygems.org>gem</a> file. Most likely you'll need to redirect it's standard output to a file. That's your starting point spec file. So far, so good, isn't it?<br><br>Now the fun starts.<br><br><ul><li>Define sitelib and sitearch macros. <a href=https://github.com/lzap/acts_as_audited/commit/5afd6dd93f050d90d73c7851db4fdc6a2734c0bb>Example</a>.</li><li>Use %global instead of %define for all the others. <a href=https://github.com/lzap/acts_as_audited/commit/3a9fb048d0e45d97a144e2646154b311614ea507>Example</a>.</li><li>Add ruby(abi) requirement. <a href=https://github.com/lzap/acts_as_audited/commit/c313c9fc2a3b38b249da42aa171ab1607e28bc5e>Example</a>.</li><li>The gem2rpm tool starts with Requires only. If the gem has any build requirements you will need to convert them. The best place to find build requirements is the <a href=http://rubygems.org>gem</a> homepage. <a href=https://github.com/lzap/acts_as_audited/commit/c313c9fc2a3b38b249da42aa171ab1607e28bc5e>Example</a>.</li><li>Both %prep and %build sections should all be gone. <a href=https://github.com/lzap/acts_as_audited/commit/9336a514c85dc53ccd9f12f38671256352e3e89d>Example</a>.</li><li>The tool doesn't use macro in the files section. You can. <a href=https://github.com/lzap/acts_as_audited/commit/c8352d7eba66faf86ba320dbe304390f82bf54a6>Example</a>.</li><li>Both build root and clean sections are not necessarry for modern Fedoras. Wipe them out not blinking your eye. <a href=https://github.com/lzap/acts_as_audited/commit/5fe2c568e72c8072b377e48f87af4b2bfaab07f7>Example</a>.</li><li>You can cleanup the spec file at last. <a href=https://github.com/lzap/acts_as_audited/commit/762efd67dbf0a7791b176b092bad6c975c52f22a>Example</a>.</li><li>Checkout the upstream license as the gem2rpm puts "GPLv2 or Ruby" constrant there.</li></ul><br>This is not an universal blueprint. It only works for gems without native libraries or special artifacts. It has been prepared with Fedora 14 guidelines. Please note the guidelines can change in the future.<br><br>That's all folks!</p></div></div></main><footer class=footer><span>&copy; 2022 Lukáš Zapletal, CC BY 4.0</span>
<span>Built with <a href=https://gohugo.io>hugo</a>, template <a target=_blank href=https://github.com/526avijitgupta/gokarna>gokarna</a></span></footer></body></html>