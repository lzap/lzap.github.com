---
layout: post
title: Aliasy na yum
date: 2010-08-28
tags:
- fedora
---

<h1>{{ page.title }}</h1>
Nadefinoval jsem si dnes pár aliasů týkajících se práce s balíčky ve Fedoře. Podobně jako v Ubuntu mám aliasy agi nebo agu, ve Fedoře je to (dejte na konec souboru .bashrc):<br /><br /><pre>alias ycu="sudo yum check-update"<br />alias ys="sudo yum search"<br />alias yys="sudo yum -C search"<br />alias yi="sudo yum install"<br />alias yyi="sudo yum -y install"<br />alias yyyi="sudo yum -Cy install"<br />alias yu="sudo yum update"<br />alias yyu="sudo yum -y update"<br />alias yr="sudo yum remove"<br />alias yyr="sudo yum -y remove"<br />alias ypr="sudo yum provides"<br />alias ylast="rpm -qa --last | head -30"</pre><br />Všimněte si yy* příkazů, které instalují balíček bez dotazu. A také yyyi aliasu, který je trošku "přes ruku", ale v rámci zachování logičnosti jsem jej nastavil právě takto. Znamená "nemám čas - neaktualizuj metadata a ihned balík instaluj".<br /><br />U vyhledávání (ys, yys) jsem záměrně použil sudo, i když by to nebylo potřeba. Je to z toho důvodu, že při lokálním spuštění může yum znovu obnovovat metadata, což je jisté zdržení. Databáze uživatele root je obvykle aktuálnější.<br /><br />Rád bych si ještě zřídil zkratku na odinstalaci balíčku včetně všech konfiguračních souborů (něco jako <i>apt-get remove --purge pkg</i>). Nápady?<br /><br />Na závěr malý tip. Pokud chcete používat pro práci s yumem <b>sudo</b> (nemáte rádi otevřený root terminál celý den), stačí jen (jako root):<br /><br /><i># visudo</i><br /><br />Nyní odkomentujte řádek<br /><br /><i>Cmnd_Alias SOFTWARE = /bin/rpm, /usr/bin/up2date, /usr/bin/yu</i><br /><br />a soubor uložte. Pak stačí jen:<br /><br /><i># echo "lzap ALL = SOFTWARE" > /etc/sudoers.d/yum<br /># chmod 0440 /etc/sudoers.d/yum</i><br /><br />Řetězec "lzap" <b>nahraďte uživatelem</b>, kterému chcete dát právo. Případně skupinu, ale ta musí být ve formátu <i>%skupina</i>. Můžete také odkomentovat více skupin, v základní instalaci systému Fedora jich je několik: NETWORKING, SOFTWARE, SERVICES, STORAGE, DELEGATING, PROCESSES, LOCATE a DRIVERS.<br /><br />Tímto způsobem má vybraný uživatel (skupina) právo spouštět jen některé příkazy. Určitě není vhodné "povolit si všechno". Pokud nechcete dokola zadávat heslo, můžete editovat řádek (visudo):<br /><br /><i>Defaults requiretty</i><br /><br />a přidat tam toto<br /><br /><i>Defaults requiretty,!tty_tickets,timestamp_timeout=-1</i><br /><br />Pokud sudo nechcete, u výše uvedených aliasů ani neuvádějte na začátku příkaz sudo. A jaké yum-aliasy používáte na Red Hat systémech vy?