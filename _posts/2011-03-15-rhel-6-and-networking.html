---
layout: post
title: RHEL 6 and networking
date: 2011-03-15
tags:
- rhel
- english
---

<h1>{{ page.title }}</h1>
To someone surprise <b>Red Hat Enterprise Linux 6</b> does not configure network when you do the default minimal installation. You can still make the Anaconda installer to do it for you but you need to hit Configure network button on the domain name setting page. If you forget you don't have a network. Tough luck.<br /><br />Since RHEL6 use NetworkManager by default users that just installed text-only server can be surprised twice as their <i>/etc/sysconfig/network-scripts/ifcfg-eth0</i> can look like:<br /><br /><i>DEVICE="eth0"<br />HWADDR="XX:XX:XX:XX:XX:XX"<br />NM_CONTROLLED="yes"<br />ONBOOT="no"</i><br /><br />By setting ONBOOT to "yes" <b>does not change a thing</b>! Since there is no NetworkManager the interface cannot magically go up. What you need to do is to add BOOTPROTO="dhcp" or BOOTPROTO="static" respectively. It does not matter if you change NM_CONTROLLED to "no" or "yes" because, again, it has not been installed with the default (or minimal) server installation. On the other hand you can set it to "no" just in case you install it later on.<br /><br />Now, what you really need it this:<br /><br /><i>DEVICE="eth0"<br />HWADDR="XX:XX:XX:XX:XX:XX"<br />NM_CONTROLLED="no"<br />ONBOOT="yes"<br />BOOTPROTO="dhcp"</i><br /><br />for DHCP configuration. For static one do something like:<br /><br /><i>DEVICE="eth0"<br />HWADDR="XX:XX:XX:XX:XX:XX"<br />NM_CONTROLLED="no"<br />ONBOOT="yes"<br />BOOTPROTO="static"<br />IPADDR=XXX.XXX.XXX.XXX<br />NETMASK=XXX.XXX.XXX.XXX</i><br /><br />Please note you cannot set both DNS1 and DNS2 here because this setting is solely for PPP connections. You need to update your <i>/etc/resolv.conf</i> adding "nameserver XXX.XXX.XXX.XXX" line(s). And don't forget to set GATEWAY="XXX.XXX.XXX.XXX" in the <i>/etc/sysconfig/network</i> config file! Now:<br /><br /><i>service network restart</i><br /><br />You are done. One more trick today. No internet and you are not sure about the options in ifcfg-eth0 or network sysconfig files? Everything is documented! Just remember this file: <i>/usr/share/doc/initscripts-*/sysconfig.txt</i>. I know this can be pretty challenging thus I recommend just to remember <i>sysconfig.txt</i> and find it with slocate or GNU find. Or train the <i>rpm -qd initscripts</i> command which shows all the documentation files from the initscripts RPM packages. Use the force, Luke.