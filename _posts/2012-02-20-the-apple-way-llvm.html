---
layout: post
title: The Apple way - LLVM
date: 2012-02-20
tags:
- gcc
- fedora
- phoronix
- llvm
---

<h1>{{ page.title }}</h1>
<br />There is a very <a href="http://lists.fedoraproject.org/pipermail/devel/2012-February/thread.html#162793">interesting discussion</a> on the Fedora devel mailing list about LLVM and GCC compilators started with short reaction on <b>Apple's migration to LLVM</b> in their Xcode development environment. The original author <a href="http://lists.fedoraproject.org/pipermail/devel/2012-February/162793.html">asks</a> if llvm is ready to do same for several important linux packages.<br /><br />Fedora developers were confused with that statement asking <b>what is the point</b>. Matthew Garrett <a href="http://lists.fedoraproject.org/pipermail/devel/2012-February/162809.html">pointed out</a> there are already some packages in Fedora which are being built with LLVM, but there is no plan for whole migration to LLVM. Also because the kernel does not support it by default. And that was the starting point, <a href="http://lists.fedoraproject.org/pipermail/devel/2012-February/162814.html">Rahul Sundaram</a> plays with the idea:<br /><blockquote class="tr_bq"><i>LLVM can be used to build the kernel and what Linus does doesn't matter as much (kernel is important but only one component) as showing that Fedora on the whole will actually benefit from moving to LLVM. For that, LLVM has to so much better than GCC and someone has to do the work within Fedora to show that it is the case.</i></blockquote><div>Developers agreed on the opinion Apple is trying to avoid GCC because it is licensed under GNU GPL while LLVM has much more permissive BSD one. Somebody linked recent changes in the CUPS printing subsystem which are inappropriate for Linux, but Apple is now paying the lead CUPS developer. But this is nothing unusual, even Red Hat is able to put strong direction for software under their control. The good thing it is still open-source software - <b>everybody can fix, patch, fork</b>. Some pople hate forking, but belive me, it is so natural open-source process. By the way nobody forked CUPS - there is no reason to do it right now.<br /><br />The most interesting reply is not about licenses, but rather about <b>quality</b>:</div><div><blockquote class="tr_bq"><i>The another usual mistake when people compare speed of GCC and LLVM is to use -O2 for the both compilers. But the true is that -O1 of GCC is -O2 of LLVM with the point of code generation quality. The compiler speed of GCC with -O1 is the same as for LLVM with -O2. You can find the latest comparison of LLVM and GCC on <a href="http://vmakarov.fedorapeople.org/spec/">http://vmakarov.fedorapeople.org/spec/</a> (see 2011 comparison at the bottom of the left frame).</i></blockquote></div><div>What we see here is a <b>Phoronix effect</b>. Michael, the Phoronix author, created extraordinary open-source test suite (Phoronix Test Suite - PTS) and he writes &nbsp;lots of interesting articles. His work are inestimale for the community - for example tracking those regression bugs really helped to give it poppularity and I really appreciate what he does. +1</div><div><br />On the other hand, he runs an <b>e-zine</b>. He writes about things that people follow. One example is LLVM. So many articles about this awesome technology, so many graphs. People start to think LLVM performs better than GCC. Plain truth? It is not.<br /><br />Apple creates awesome things. But <b>awesome things are not always the best things</b>.</div>