<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>fedora on Lukáš Zapletal</title><link>http://blog.zapletalovi.com/tags/fedora/</link><description>Recent content in fedora on Lukáš Zapletal</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 10 Nov 2022 00:00:00 +0000</lastBuildDate><atom:link href="http://blog.zapletalovi.com/tags/fedora/index.xml" rel="self" type="application/rss+xml"/><item><title>Why Mastodon instances are difficult to scale</title><link>http://blog.zapletalovi.com/posts/2022-11-10-why-mastodon-instances-are-difficult-to-scale/</link><pubDate>Thu, 10 Nov 2022 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2022-11-10-why-mastodon-instances-are-difficult-to-scale/</guid><description>Mastodon, the free, open-source social network server based on ActivityPub is written in Ruby on Rails and the network is experiencing influx of new users. Mastodon administrators are finding how difficult and costly is to scale Ruby on Rails applications the hard way. I&amp;rsquo;ve spent a deacde working on a large Ruby on Rails project, much larger than Mastodon. Let me quickly describe what is going on. Disclaimer: This post is solely based on my experience with scaling other Ruby on Rails applications, take this with a grain of salt.</description></item><item><title>Apache2 http logging into journald ring buffer</title><link>http://blog.zapletalovi.com/posts/2022-11-07-apache2-http-logging-into-journald-ring-buffer/</link><pubDate>Mon, 07 Nov 2022 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2022-11-07-apache2-http-logging-into-journald-ring-buffer/</guid><description>My webserver at home has several services including Mastodon. And I use Apache2 for web content and as a reverse web proxy, however, this system is configured to log all hits in /var/log/httpd. Both disks in my server are SSD and I do not want to let it to rotate hundreds of megabytes of access logs every week full of bots trying to find security hole in wordpress or other known software (which is not even running on my site).</description></item><item><title>Lightweight Mastodon instance: gotosocial</title><link>http://blog.zapletalovi.com/posts/2022-11-06-lightweight-mastodon-instance-gotosocial/</link><pubDate>Sun, 06 Nov 2022 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2022-11-06-lightweight-mastodon-instance-gotosocial/</guid><description>If you need a lightweight Mastodon instance, I have a tip for you: GoToSocial is an ActivityPub backend written in Go, no dependencies needed, lightweight (well, 50MB binary) and can store data in either SQLite3 or Postgres.
The setup is well documented, you can download pre-built binary, create an empty directory, configure database connection and just run it. It has a built-in support for Let&amp;rsquo;s Encrypt, however, if you already have a domain with existing web server and Let&amp;rsquo;s Encrypt certificate, you can turn this feature off.</description></item><item><title>HTTP UEFI Boot with TianoCore libvirt</title><link>http://blog.zapletalovi.com/posts/2022-11-05-http-uefi-boot-with-tianocore-libvirt/</link><pubDate>Sat, 05 Nov 2022 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2022-11-05-http-uefi-boot-with-tianocore-libvirt/</guid><description>One of the new features in EFI 2.x is &amp;ldquo;HTTP Boot&amp;rdquo; also known as &amp;ldquo;UEFI HTTP Boot&amp;rdquo; or &amp;ldquo;UEFI Boot&amp;rdquo;. Let&amp;rsquo;s explore how you can use it in your environment, I will show everything on a Fedora server running KVM/QEMU with Open Virtual Machine Firmware (OVFM) TianoCore implementation.
First, we will need a Linux environment, that is in my case Fedora 35 Server Edition with libvirt installed. To serve HTTP files, I will use Apache2 httpd and iPXE as the bootloader, but this should also work with Grub2:</description></item><item><title>Send warning email when your drive is dying</title><link>http://blog.zapletalovi.com/posts/2022-10-22-send-warning-email-when-your-drive-is-dying/</link><pubDate>Sat, 22 Oct 2022 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2022-10-22-send-warning-email-when-your-drive-is-dying/</guid><description>My Samsung 870 EVO 2TB SDD is dying after 13 months of basic workstation operation. Looks like some problem with a large batch because I found many other users complaining on forums. I am going for RMA. Fortunately, I restored from my backup.
Lesson learned: SMART needs to be monitored on my home servers, this is not the first time and I was lucky enough to see the errors in the system journal in advance.</description></item><item><title>SQL joins really explained</title><link>http://blog.zapletalovi.com/posts/2022-09-02-sql-joins-really-explained/</link><pubDate>Fri, 02 Sep 2022 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2022-09-02-sql-joins-really-explained/</guid><description>I&amp;rsquo;ve got asked how SQL joins really work. Let me explain real quick, imagine a database of student with a simple (1:N) relationship, a city students are from. I will use the tiny SQLite3 database system, you can do this too:
$ sqlite3 joins.sqlite3 SQLite version 3.36.0 2021-06-18 18:36:39 Enter &amp;quot;.help&amp;quot; for usage hints. Create tables city and student:
sqlite&amp;gt; create table city (id integer, name text); sqlite&amp;gt; create table student (id integer, name text, city_id integer); Insert few rows:</description></item><item><title>Easy VM access with routed libvirt mode</title><link>http://blog.zapletalovi.com/posts/2022-02-23-easy-vm-access-with-routed-libvirt-mode/</link><pubDate>Wed, 23 Feb 2022 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2022-02-23-easy-vm-access-with-routed-libvirt-mode/</guid><description>By default, libvirt comes with a virtual network called &amp;ldquo;default&amp;rdquo; that is configured with NAT. That is a very sane default configuration, VMs are accessible from the host machine directly and they can also access internet via NAT. Many people, however, want to access VMs from outside - typically when libvirt is used as a server hypervisor. You will find many blog posts explaining how to setup a bridge. Configuration of bridge is complex, you need to shut down the main connection and it is a challenge for users who only have SSH access to the machine.</description></item><item><title>Two DHCP servers in a libvirt network</title><link>http://blog.zapletalovi.com/posts/2022-02-23-two-dhcp-servers-in-a-libvirt-network/</link><pubDate>Wed, 23 Feb 2022 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2022-02-23-two-dhcp-servers-in-a-libvirt-network/</guid><description>I write provisioning software that needs to integrate with DHCP servers. Libvirt is a great Linux virtual environment for development, but by default it runs its own DHCP server (dnsmasq). That is a very good feature for spawning ad-hoc VMs which get their IPs easily. But I want also to manage some VMs with my own DHCP server. How to do this?
It&amp;rsquo;s possible to configure libvirt&amp;rsquo;s dnsmasq to ignore pre-reserved host entries.</description></item><item><title>Fast backups of Fedora with btrbk</title><link>http://blog.zapletalovi.com/posts/2022-01-25-fast-backups-of-fedora-with-btrbk/</link><pubDate>Tue, 25 Jan 2022 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2022-01-25-fast-backups-of-fedora-with-btrbk/</guid><description>Last year, I did full reinstall of my workstation in order to change from XFS to BTRFS file system, which is now the default in Fedora Workstation. The plans were simple - I wanted to achieve fast backups. And one year later, I finally got to setting it up. Here is how to do it.
Scenario is simple, a host with BTRFS filesystem, a USB drive connected and also formatted as BTRFS for ultra-fast snapshots/backups.</description></item><item><title>A sane vim configuration for Fedora</title><link>http://blog.zapletalovi.com/posts/2021-11-11-a-sane-vim-configuration-for-fedora/</link><pubDate>Thu, 11 Nov 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-11-11-a-sane-vim-configuration-for-fedora/</guid><description>When you start Vim with the --clean option, it shows up in &amp;ldquo;vanilla&amp;rdquo; mode. No plugins, no configuration, just back to the roots. I have collected a ton of configuration statements over the years some of them dating from MS-DOS or Windows 3.1. Here is the deal: I am going to start from scratch to find a good starting-point configuration with just plugins which are available in Fedora 35. Will I survive a week of coding?</description></item><item><title>Fedora Silverlight: not only for your grandma</title><link>http://blog.zapletalovi.com/posts/2021-11-11-fedora-silverlight-not-only-for-your-grandma/</link><pubDate>Thu, 11 Nov 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-11-11-fedora-silverlight-not-only-for-your-grandma/</guid><description>Fedora Silverblue: not only for your grandma I have migrated my grandparents to Fedora Silverblue, previously they used CentOS. I was impressed how everything worked well and I like where Fedora is going overall. Less pre-installed software, I am hoping for more packages to be dropped - Evolution backend, on-line accounts, Maps and others. Overall, it works great.
Setting up Fedora Silverblue was easy, installation smooth. Then I had to ensure screen does not lock (they hate this):</description></item><item><title>Denormalizing PostgreSQL join tables</title><link>http://blog.zapletalovi.com/posts/2021-08-30-denormalizing-postgres-join-tables/</link><pubDate>Mon, 30 Aug 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-08-30-denormalizing-postgres-join-tables/</guid><description>Foreman OpenSCAP plugin stores security scanner results in Foreman&amp;rsquo;s PostgreSQL database providing integrated UI, API and CLI experience. To simplify our use case, let&amp;rsquo;s assume that each report has many-to-many association to security rules with some result (pass or fail). This gives us two main SQL tables: report and rule and a join table between them. For simplicity, let&amp;rsquo;s ignore the result which should be an extra column in the join table.</description></item><item><title>Finding the right cost for bcrypt/pbkdf2</title><link>http://blog.zapletalovi.com/posts/2021-05-11-finding-the-right-cost-for-bcryptpbkdf2/</link><pubDate>Tue, 11 May 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-05-11-finding-the-right-cost-for-bcryptpbkdf2/</guid><description>Foreman uses bcrypt with variable cost as the default password hashing approach, but I learned that bcrypt is not approved for passwords by NIST the other day. Before finishing my patch, I wanted to see what are the sane iteration counts for PBKDF2-HMAC-SHA algorithm which is approved by NIST. Here are results to give you rough estimation from my Intel NUC i3 8th gen running i3-8109U, a CPU from 2018:</description></item><item><title>Crop and resize video to get rid of borders</title><link>http://blog.zapletalovi.com/posts/2021-04-19-crop-and-resize-video-to-get-rid-of-borders/</link><pubDate>Mon, 19 Apr 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-04-19-crop-and-resize-video-to-get-rid-of-borders/</guid><description>We stream our community demos on youtube via Google Meet and there are borders on each side which makes the content to be smaller and less readable. Luckily, it is in the middle of the screen, so the following command will crop the image to its 1/1.29 of the size, stretch it back to 720p and reencodes it for YouTube copying the audio stream.
ffmpeg -i intput.mp4 -vf &amp;quot;crop=iw/1.29:ih/1.29,scale=-1:720&amp;quot; -y output.</description></item><item><title>FreeIPA and Foreman Proxy development setup</title><link>http://blog.zapletalovi.com/posts/2021-04-12-freeipa-and-foreman-proxy-development-setup/</link><pubDate>Mon, 12 Apr 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-04-12-freeipa-and-foreman-proxy-development-setup/</guid><description>I have been avoiding this for like ten years now, but today is the day when I will setup a FreeIPA with Foreman Proxy for development and testing purposes and here are my notes.
The goal is to deploy a libvirt VM with IPA server and Foreman Proxy intergated with it. The domain will be ipa.lan and the host named ipa.ipa.lan. This is NOT how you should deploy production Foreman FreeIPA integration!</description></item><item><title>Enable serial console for libvirt</title><link>http://blog.zapletalovi.com/posts/2021-03-31-enable-serial-console-in-libvirt/</link><pubDate>Wed, 31 Mar 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-03-31-enable-serial-console-in-libvirt/</guid><description>QEMU/KVM libvirt virtual machine can be acessed via serial console. When a new VM is created, serial console device is created. However to fully utilize this, several steps are needed on the guest machine.
The first option is to start getty service on serial console to get a login prompt when system finishes booting. This is as easy as:
# systemctl enable --now serial-getty@ttyS0.service To access serial console via libvirt command line do:</description></item><item><title>Letsencrypt a Fedora server</title><link>http://blog.zapletalovi.com/posts/2021-03-31-letsencrypt-a-fedora-server/</link><pubDate>Wed, 31 Mar 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-03-31-letsencrypt-a-fedora-server/</guid><description>I was looking for a simple letsencrypt tutorial for my home server running Fedora but it looks like the official (and quite capable) certbot is not availble in Fedora repos. So I have decided to go a more simple route of using acme-tiny shell script which is present and does the same, at least if you are running Apache httpd.
First off, install Apache httpd, SSL support and acme script itself:</description></item><item><title>The Lounge web IRC client in Fedora</title><link>http://blog.zapletalovi.com/posts/2021-03-31-the-lounge-web-irc-client-in-fedora/</link><pubDate>Wed, 31 Mar 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-03-31-the-lounge-web-irc-client-in-fedora/</guid><description>My graphics card died and thanks to COVID and Bitcoin, it will be a long wait until it&amp;rsquo;s back. I am on Mac M1 at the moment and it looks like there are not many good IRC clients on MacOS.
Let&amp;rsquo;s run a simple web-based IRC client which can also work as a bouncer (no need of ZNC). I randomly selected one which is called The Lounge, looks nice and works okay for me.</description></item><item><title>Thunderbolt bridge connection in Fedora 33</title><link>http://blog.zapletalovi.com/posts/2021-02-27-thunderbolt-bridge-connection-in-fedora-33/</link><pubDate>Sat, 27 Feb 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-02-27-thunderbolt-bridge-connection-in-fedora-33/</guid><description>My home network is extremely slow, because I have CAT5e cables everywhere. I was wondering if I can use Thunderbolt ports which I have both on the new Mac M1 and Intel NUC with Fedora. So without my breath, since some Thunderbolt docks are known to brick the new Macs, I connected the two guys. And it worked automatically!
Fedora&amp;rsquo;s (33) kernel automatically recognized thunderbolt0 device and NetworkManager created a new connection named &amp;ldquo;Wired connection 1&amp;rdquo;.</description></item><item><title>What is waking my HDD up in Linux</title><link>http://blog.zapletalovi.com/posts/2021-02-22-what-is-waking-my-hdd-up-in-linux/</link><pubDate>Mon, 22 Feb 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-02-22-what-is-waking-my-hdd-up-in-linux/</guid><description>When my disks wake up during the day, I am angry. I want silence, so I started investigating which process makes them to do that. I suspect that something is browsing Samba share, but to confirm I created this simple SystemTap script:
# cat syscall_open.stp #!/usr/bin/env stap # # System-wide strace-like tool for catching file open syscalls. # # Usage: stap syscall_open filename_regexp # probe syscall.open* { if (filename =~ @1) { printf(&amp;quot;%s(%d) opened %s\n&amp;quot;, execname(), pid(), filename) } } It&amp;rsquo;s as easy as starting this up and waiting until the process is found.</description></item><item><title>Installing Unifi Controller on Fedora 33</title><link>http://blog.zapletalovi.com/posts/2021-02-21-installing-unifi-controller-on-fedora-33/</link><pubDate>Sun, 21 Feb 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-02-21-installing-unifi-controller-on-fedora-33/</guid><description>Installing Unifi Controller in Fedora 33 is easy. Step one: install MongoDB from the official site since it is no longer available in Fedora due to licensing reasons. Use EL8 version which appears to work fine:
# dnf install ./mongodb-org-server-4.4.4-1.el8.x86_64.rpm If you haven&amp;rsquo;t enabled RPMFusion repository, do it:
# dnf install https://mirrors.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirrors.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm Install the controller:
# dnf install unifi For some reason, unifi has hardcoded path to java alternatives symlink which did not work on the initial start (/usr/lib/jvm/jre-1.</description></item><item><title>Remove rsyslog and use journald in Fedora</title><link>http://blog.zapletalovi.com/posts/2021-02-21-journald-on-fedora/</link><pubDate>Sun, 21 Feb 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-02-21-journald-on-fedora/</guid><description>I am reinstalling my home server from scratch, I want to start using BTRFS which seems like a great fit for what I am doing (NAS, backups). Installation was smooth, no problems, however I noticed that Fedora Server 33 installed both journald and rsyslogd and journal was configured to do persistent logging.
You know, this is weird. On Red Hat Enterprise Linux 7 and 8, journald is configured in volatile mode and it&amp;rsquo;s set to forward all logs to syslog.</description></item><item><title>Use btrfs compression in Fedora 33</title><link>http://blog.zapletalovi.com/posts/2021-02-21-use-btrfs-compression-in-fedora-33/</link><pubDate>Sun, 21 Feb 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-02-21-use-btrfs-compression-in-fedora-33/</guid><description>Btrfs have been available in Fedora for quite some time and starting from Fedora 33, new installations of Workstation edition use it by default. Btrfs is pretty capable file system with lots of options, let&amp;rsquo;s take a look on one aspect: transparent per-file compression.
There&amp;rsquo;s little bit of misunderstanding how this works and some people recommend to mount with compress option. This is actually not necessary and I would actually strongly suggest NOT to use this option.</description></item><item><title>Helper script for easy cherry picks with git</title><link>http://blog.zapletalovi.com/posts/2021-02-19-helper-script-for-easy-cherry-picks-with-git/</link><pubDate>Fri, 19 Feb 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-02-19-helper-script-for-easy-cherry-picks-with-git/</guid><description>After many, many manual cherry picks, I&amp;rsquo;ve decided to put together a short script. It&amp;rsquo;s fully interactive and hopefully self-explanatory.
[lzap@box foreman]$ git xcp Looks like you want to cherry-pick, huh?! Branch you want to pick INTO: 2.4-stable Branch you want to pick FROM: develop Allright, allright, here is the menu: bb1a931b6 Fixes #31064 - sequence helper macro 089e232c0 Fixes #31830 - support children in SkeletonLoader component ed70741fa Fixes #31882 - set ENC var hostname to shortname 6c3794cf1 Refs #31720 - Apply @ezr-ondrej suggestions from code review d43eba522 Refs #31720 - address comments and add links 809e6eec5 Refs #31720 - Apply tbrisker suggestions 0cc6abbb4 Fixes #31720 - add first draft doc 648f72365 Fixes #31873 - Expose edit permissions in api index layout 9ad6b1a25 Refs #30215 - mark string for translation 24d2df594 Fixes #31855 - add ellipsis with tooltip for long setting values Commits separated by space or enter to give up: 0cc6abbb4 809e6eec5 d43eba522 Hit ENTER to push, Ctrl-C to interrupt.</description></item><item><title>Booting S390x libvirt VMs over network</title><link>http://blog.zapletalovi.com/posts/2021-02-02-booting-s390x-libvirt-vms-over-network/</link><pubDate>Tue, 02 Feb 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-02-02-booting-s390x-libvirt-vms-over-network/</guid><description>I am exploring S390x provisioning support for Foreman and it looks like network booting S390x virtual machines could be a good start. Foreman can be used with or without libvirt compute resource to either run and customize an image via SSH finish template or booting from network.
In QEMU environment, s390-ccw firmware is utilized to boot the operating system which is not as flexible as on Intel, but thanks to the recent work of Red Hat and IBM engineers in 2018 it offers two ways of booting from network via DHCP/BOOTP protocols.</description></item><item><title>Disabling Tracker in Fedora</title><link>http://blog.zapletalovi.com/posts/2021-02-02-disabling-tracker-in-fedora/</link><pubDate>Tue, 02 Feb 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-02-02-disabling-tracker-in-fedora/</guid><description>I have realized that one of the tracker processes is dying every few seconds on my Fedora 33, I got ton of ABRT reports and system log filled with stacktraces. Bugs happen, however I don&amp;rsquo;t actually utilize this tool very much. Searching in contacts, files, browser history, photos, documents of files is nothing I use. There are also other Gnome features which might stop working such as Boxes offering ISO files, audio player suggesting music or File browser&amp;rsquo;s advanced features like tagging of files.</description></item><item><title>Raspbery Pi as a Brother print server</title><link>http://blog.zapletalovi.com/posts/2021-02-01-raspbery-pi-as-a-brother-print-server/</link><pubDate>Mon, 01 Feb 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-02-01-raspbery-pi-as-a-brother-print-server/</guid><description>This is a tutorial on how to use Raspberry Pi as a print server. In my case it&amp;rsquo;s RPi 4 with Brother 7065DN.
The first step is to download a Raspbian image, I suggest the &amp;ldquo;headless&amp;rdquo; image which does not have a graphical environment. In my case, I downloaded a 64bit image which is still in alpha because I wanted to be prepared for the future.
Write the image to a SD card, I am on Fedora Linux so I use dd command:</description></item><item><title>Demux, mux and cut MP4 in ffmpeg</title><link>http://blog.zapletalovi.com/posts/2021-01-20-demux-mux-and-cut-mp4-in-ffmpeg/</link><pubDate>Wed, 20 Jan 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-01-20-demux-mux-and-cut-mp4-in-ffmpeg/</guid><description>With the upcoming COVID-19 open-source conferences season, we record presentations and screencasts almost on daily basis. Sometimes, it&amp;rsquo;s needed to trim a MP4 video without reencoding the content. It&amp;rsquo;s easy with ffmpeg, option --s specifies start in format of 00:00:00.000 or just 0 as number of seconds, option -t represents length of the desired section:
ffmpeg -ss 0 -i video-orig.mp4 -t 00:20:51.000 -c copy video-cut.mp4 Sometimes video and audio needs to be separated into individual files (aka demuxed).</description></item><item><title>Install RHEL 8.3 for free production use in a VM</title><link>http://blog.zapletalovi.com/posts/2021-01-20-install-rhel-83-for-free-production-use-in-kvm/</link><pubDate>Wed, 20 Jan 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-01-20-install-rhel-83-for-free-production-use-in-kvm/</guid><description>In January 2021, Red Hat announced that Red Hat Enterprise Linux can be used at no cost for up to 16 production servers. In this article, I want to provide step-by-step instructions on how to install RHEL 8.3 in a VM.
First off, download the official and updated QCOW2 image named rhel-8.3-x86_64-kvm.qcow2 (the name will likely change later as RHEL moves to higher versions). Creating an account on the Red Hat Portal is free, there is an integration with 3rd party authorization services like GitHub, Twitter or Facebook, however for successful host registration username and password needs to be created.</description></item><item><title>Normalizing audio and video files</title><link>http://blog.zapletalovi.com/posts/2021-01-13-normalizing-audio-and-video-files/</link><pubDate>Wed, 13 Jan 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-01-13-normalizing-audio-and-video-files/</guid><description>To normalize audio or video files without reencoding video stream, use ffmpeg-normalize script. In Fedora, it is available in the python3-ffmpeg-normalize package.
Usage is very simple:
ffmpeg-normalize a_file.wav a_file.mp4 a_file.mkv By default, the output stream will be PCM at 192kHz which will usually be a bit overkill. For example, I often record screencast with speech and before uploading to YouTube it&amp;rsquo;s a good idea to normalize and encode the audio channel into 44.</description></item><item><title>RHEL/CentOS 8 shim kernel signatures</title><link>http://blog.zapletalovi.com/posts/2021-01-04-rhelcentos-8-shim-kernel-signatures/</link><pubDate>Mon, 04 Jan 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-01-04-rhelcentos-8-shim-kernel-signatures/</guid><description>Due to hardening within the Red Hat Enterprise Linux 8 kernel, which was released as part of the CVE-2020-10713 update, previous Red Hat Enterprise Linux 8 kernel versions have not been added to shim’s allow list. If you are running with Secure Boot enabled, and the user needs to boot to an older kernel version, its hash must be manually enrolled into the trust list. This is achieved by executing the following commands:</description></item><item><title>Swap mouse buttons via key shortcut in Gnome</title><link>http://blog.zapletalovi.com/posts/2020-12-02-swap-mouse-buttons-via-key-shortcut-in-gnome/</link><pubDate>Wed, 02 Dec 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-12-02-swap-mouse-buttons-via-key-shortcut-in-gnome/</guid><description>Gnome provides an easy way to swap mouse buttons which is a useful feature for left-handed people. I am right-handed, however I am trying to swap mouse in my hands to compensate and prevent injury. Swapping buttons via Mouse and Touchpad settings is slow and clunky.
You will find many tutorials on how to swap buttons from the command line but these are XOrg or xinput remappings. I wanted to do it consistently so Gnome is not confused and also the Mouse and Touchpad dialog or other applications work properly.</description></item><item><title>Backup your keys from Authy to cleartext</title><link>http://blog.zapletalovi.com/posts/2020-10-19-backup-your-keys-from-authy-to-cleartext/</link><pubDate>Mon, 19 Oct 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-10-19-backup-your-keys-from-authy-to-cleartext/</guid><description>I&amp;rsquo;ve been using Authy for my 2FA and I am happy with it, it&amp;rsquo;s on my iPhone, iPad, Apple Watch and also Fedora desktop. But the desktop app is quite slow, it&amp;rsquo;s Chrome web app wrapped as a Snap Linux application in the end. When I want my token, I want it NOW, instantly in my clipboard. So I started seeking a cli utility. There is no official app from Authy, so I have decided to export my keys in clear text.</description></item><item><title>Enable video acceleration on Intel IGP in Fedora</title><link>http://blog.zapletalovi.com/posts/2020-10-16-enable-vaapi-on-intel/</link><pubDate>Fri, 16 Oct 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-10-16-enable-vaapi-on-intel/</guid><description>If you have a laptop with Intel integrated card and it gets little bit hot when watching YouTube or running BlueJeans or Google Meet, you should try this guide to enable video-acceleration API (VAAPI). This will work with Fedora 32+ with updates applied (Firefox 81+).
To find out if your hardware meets requirements for this article, do this:
$ lspci | grep VGA 00:02.0 VGA compatible controller: Intel Corporation UHD Graphics 620 (rev 07) This ThinkPad X1 has Intel IGP.</description></item><item><title>Creating Windows 10 bootable USB drive</title><link>http://blog.zapletalovi.com/posts/2020-09-22-creating-windows-10-bootable-usb-drive/</link><pubDate>Tue, 22 Sep 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-09-22-creating-windows-10-bootable-usb-drive/</guid><description>I had to update firmware for my super-ultra-wide LG monitor, however the utility only works in Windows and requires USB-C PC or laptop. I have one, but it&amp;rsquo;s Fedora only. Luckily, there is a way how to install Windows 10 to USB hdd (or flash).
First of, download Windows 10 ISO from Microsoft&amp;rsquo;s website. I&amp;rsquo;ve used MediaCreationTool.exe utility which prepared the ISO for me in about half an hour.
Next up it&amp;rsquo;s this wonderful freeware tool called Rufus.</description></item><item><title>Foreman development setup with libvirt 2020</title><link>http://blog.zapletalovi.com/posts/2020-09-22-foreman-development-setup-with-libvirt-2020/</link><pubDate>Tue, 22 Sep 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-09-22-foreman-development-setup-with-libvirt-2020/</guid><description>Thanks to dnsmasq DHCP Foreman plugin, development setup for provisioning can be little bit easier. After git checkout of Foreman core, Smart Proxy and Smart Proxy DHCP Dnsmasq plugin, perform creation of initial directory structure:
# DEVELOPER=lzap # mkdir /var/lib/libvirt/dnsmasq/foreman-default # chown $DEVELOPER:dnsmasq /var/lib/libvirt/dnsmasq/foreman-default # touch /var/lib/dnsmasq/foreman-default.leases # chown $DEVELOPER:dnsmasq /var/lib/dnsmasq/foreman-default.leases # mkdir /var/lib/dnsmasq/tftp # chown $DEVELOPER:dnsmasq /var/lib/dnsmasq/tftp/ # setfacl -m u:$DEVELOPER:r-- /var/lib/libvirt/dnsmasq/default.conf Copy PXELinux files, this will work also for Grub2 or iPXE:</description></item><item><title>Overriding Gnome application command arguments</title><link>http://blog.zapletalovi.com/posts/2020-09-03-overriding-gnome-application-command-arguments/</link><pubDate>Thu, 03 Sep 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-09-03-overriding-gnome-application-command-arguments/</guid><description>Google Chrome 85, which I use as a secondary browser, introduced a regresion for AMD GPUs and I have to provide it a command line option in order to mitigate the problem. I was trying to find if there is any way to override or redefine just the Exec line of the desktop entry (app.desktop file) but it looks like it can&amp;rsquo;t be done.
The solution is to copy desktop entry specification from /usr/share/applications to home folder.</description></item><item><title>Prevent virt-manager from asking password</title><link>http://blog.zapletalovi.com/posts/2020-08-21-prevent-virt-manager-from-asking-password/</link><pubDate>Fri, 21 Aug 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-08-21-prevent-virt-manager-from-asking-password/</guid><description>Everytime I start virt-manager, the tool I use on an every-day basis, it asks for the root password. Because I use LVM for my VMs, I need to use system libvirt. Well, it&amp;rsquo;s pretty easy to get rid of this. All I need to do is to add myself to the &amp;ldquo;libvirt&amp;rdquo; group. Tested on Fedora.
Run this as the user who needs to be added. Do not run this in &amp;ldquo;root shell&amp;rdquo; otherwise you add &amp;ldquo;root&amp;rdquo; to the group which is not a terrible thing to do, except it will not work like you intented:</description></item><item><title>Dropping Feedburner update RSS ATOM URL</title><link>http://blog.zapletalovi.com/posts/2020-08-06-dropping-feedburner---update-rss-atom-url/</link><pubDate>Thu, 06 Aug 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-08-06-dropping-feedburner---update-rss-atom-url/</guid><description>Hey, I am dropping Google Feedburner, please update the URL of the feed if you are reading this in your RSS. The new URL is:
https://lukas.zapletalovi.com/atom.xml The old URL will continue work, but after Google acquired Feedburner the service did not see much development and features are being rather removed. Migrate today if you want to keep reading those random Linux + FOSS + devops notes of mine.</description></item><item><title>ASUS B350 PLUS EFI settings for Linux</title><link>http://blog.zapletalovi.com/posts/2020-08-05-asus-b350-plus-efi-settings-for-linux/</link><pubDate>Wed, 05 Aug 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-08-05-asus-b350-plus-efi-settings-for-linux/</guid><description>It&amp;rsquo;s been two years on my Ryzen 1700, 32GB RAM and Saphire 5600XT however after Fedora reinstallation after (another) SSD failure I started experiencing random hangs of the graphical subsystem (I could still ssh to my workstation). Some people recommended turning off IOMMU, so I took the opportunity to upgrade to latest EFI firmware and review all my settings. These are the best (and safest) ASUS B350-PLUS changed firmware settings optimized for Linux from my own experience.</description></item><item><title>Restore Windows EFI boot entry</title><link>http://blog.zapletalovi.com/posts/2020-07-21-restore-windows-efi-boot-entry/</link><pubDate>Tue, 21 Jul 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-07-21-restore-windows-efi-boot-entry/</guid><description>I experienced a SSD failure this Monday, both my root volume and /home was lost, I had to do a full reinstall and backup restore. Duplicity saved me once again, I had a daily backup of my home, unfortunately it was a full Fedora 32 reinstall.
Anyway, with the data I also lost the ESP parition where I had Windows bootloader. While Fedora Linux works fine, I am unable to boot my Windows where I have few things for fun, mostly games and audio production software.</description></item><item><title>Force PulseAudio to ignore a card</title><link>http://blog.zapletalovi.com/posts/2020-07-01-force-pulseaudio-to-ignore-a-card/</link><pubDate>Wed, 01 Jul 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-07-01-force-pulseaudio-to-ignore-a-card/</guid><description>My workstation is dualboot with Windows 10 for gaming and audio recording, but when I want to quickly record an idea I definitely don&amp;rsquo;ŧ want to leave my work environment which is Linux. I have few USB cards dedicated for music recording, but when I connect one of them, PulseAudio takes over.
PulseAudio is great for a desktop experience, but when it comes to music you want something pretty different. For example, to record a guitar with minimum latency, ALSA needs to be used directly without any man in the middle.</description></item><item><title>On git master, main and inclusion</title><link>http://blog.zapletalovi.com/posts/2020-06-19-on-git-master-main-and-inclusion/</link><pubDate>Fri, 19 Jun 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-06-19-on-git-master-main-and-inclusion/</guid><description>All I can say is that I find some words like whiltelist, blacklist and master/slave awful. I do realize that the context in git might not be racist, however I am trying to be nice-by-default person. I won&amp;rsquo;t comment more on the situation as this blog is strictly non-political. So let&amp;rsquo;s be technical in that regard:
If one of your projects rename master to main and you are having hard time checking out the mainline branch, I have a tip for you:</description></item><item><title>Linux desktop notifications on your smart phone or watch</title><link>http://blog.zapletalovi.com/posts/2020-03-10-linux-desktop-notifications-on-your-smart-phone-or-watch/</link><pubDate>Tue, 10 Mar 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-03-10-linux-desktop-notifications-on-your-smart-phone-or-watch/</guid><description>I use i3wm with dunst for desktop notifications, but last couple of weeks I missed few meetings due to missed notification bubble from my calendar. I think it&amp;rsquo;s the new Super Ultra Wide LG monitor that is so huge that I actually miss notifications in the corner. Granted, I could have configured it to appear in the middle of the screen, I wanted some better solution for cases when I am having a coffee or doing something in the kitchen when one arrives.</description></item><item><title>Fedora 31 and AMD Radeon 5600 XT</title><link>http://blog.zapletalovi.com/posts/2020-03-04-fedora-31-and-amd-radeon-5600-xt/</link><pubDate>Wed, 04 Mar 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-03-04-fedora-31-and-amd-radeon-5600-xt/</guid><description>I have upgraded my RX 560 to much more powerful 5600 XT. Thanks to 7nm technology, this beast draws 7W on idle and both fans are turned off similarly to my old 560 (4W idle) while it can deliver robust performance up to 160W after BIOS update (I have the launch model before AMD knew about NVidia price cuts).
When I booted my Fedora 31 however, I did not get it into X.</description></item><item><title>Linux as a L2 VLAN switch</title><link>http://blog.zapletalovi.com/posts/2020-02-19-linux-as-a-l2-vlan-switch/</link><pubDate>Wed, 19 Feb 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-02-19-linux-as-a-l2-vlan-switch/</guid><description>I needed to join two segments of virtual LAN together via a linux bridge. That&amp;rsquo;s an easy task for Linux, however problem was that one segment was a VLAN (with id of 13) and the other segment was native (VLAN 0). I struggled hard figuring out the proper commands with NetworkManager until Beniamino Galvani of Red Hat put me on the right track.
Assuming that enp2s0 uses tagged frames and enp1s0 doesn&amp;rsquo;t, enabling VLAN filtering can do the trick:</description></item><item><title>AAAA DNS record in libvirt</title><link>http://blog.zapletalovi.com/posts/2020-01-31-aaaa-dns-record-in-libvirt/</link><pubDate>Fri, 31 Jan 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-01-31-aaaa-dns-record-in-libvirt/</guid><description>Hello, for some time now it&amp;rsquo;s possible to create AAAA DNS records in a libvirt virtual network. It&amp;rsquo;s very similar to creating A records (or host records) and they are meant for allocating IP addresses to hosts but since libvirt uses dnsmasq which handles both DHCP and DNS records, you can take advantage for this and create arbitrary records.
This is useful if you want to do PXE or UEFI HTTP Boot provisioning in an IPv6 only virtual network with full DNS working setup for example because of X.</description></item><item><title>Messing with CentOS 8 kickstart in libvirt</title><link>http://blog.zapletalovi.com/posts/2020-01-23-messing-with-centos-8-kickstart-in-libvirt/</link><pubDate>Thu, 23 Jan 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-01-23-messing-with-centos-8-kickstart-in-libvirt/</guid><description>Today, I was learning some practical details about Dracut, Anaconda and NetworkManager. In short, the conclusion is we will stick with generating ifcfg scripts in Foreman but I just wanted to share the command which I used to quickly provision RHEL 8.0 to test generated networking configuration.
I created a kickstart script for RHEL 8 / CentOS 8 and published it over HTTP:
text network --device=enp1s0 --activate --bootproto=dhcp --noipv6 --hostname ks-test firewall --enabled url --url=&amp;quot;http://mirror.</description></item><item><title>Setting a firewalld zone for libvirt network</title><link>http://blog.zapletalovi.com/posts/2020-01-14-setting-a-firewalld-zone-for-libvirt-network/</link><pubDate>Tue, 14 Jan 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-01-14-setting-a-firewalld-zone-for-libvirt-network/</guid><description>All interfaces managed by libvirt (virbr0, virbr1 etc) are being put into frewalld zone called &amp;ldquo;libvirt&amp;rdquo;. This zone allows NAT however it&amp;rsquo;s set quite strict. Only few services are opened like ssh, http, https, dns, dhcp and icmp. In case you want to add a new service, the command is:
firewall-cmd --zone=libvirt --add-port=12345/tcp Alternatively, if you don&amp;rsquo;t care and use this network for some testing and you need to access all ports of the gateway, it&amp;rsquo;s possible to change the zone from &amp;ldquo;libvirt&amp;rdquo; to &amp;ldquo;trusted&amp;rdquo;.</description></item><item><title>Installing Unifi Controller on CentOS 8</title><link>http://blog.zapletalovi.com/posts/2020-01-13-installing-unifi-controller-on-centos-8/</link><pubDate>Mon, 13 Jan 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-01-13-installing-unifi-controller-on-centos-8/</guid><description>This tutorial covers installation of UniFi from RPMFusion repository on OpenJDK with MongoDB from official community repository. It kinda works, but I&amp;rsquo;ve hit few bugs here and there, therefore I&amp;rsquo;d suggest you to use &amp;ldquo;tarball&amp;rdquo; installation with Oracle JDK instead. I plan to do new blogpost on this topic soon - search my blog.
First, enable PowerTools CentOS repository:
dnf install dnf-plugins-core yum config-manager --set-enabled PowerTools You can enable all the official repositories as they contain pretty useful stuff, but it&amp;rsquo;s not needed:</description></item><item><title>Deploy PhotoPrism in CentOS 8</title><link>http://blog.zapletalovi.com/posts/2020-01-12-deploy-photoprism-in-centos-80/</link><pubDate>Sun, 12 Jan 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-01-12-deploy-photoprism-in-centos-80/</guid><description>PhotoPrism is a great web photo library and great fit for browsing and managing photos on a home NAS server I&amp;rsquo;ve recently built. It has some unique features like tagging photo using TensorFlow, however the most appealing features for me are slick interface, easy use and administration, support for RAW/HEIC formats (conversion to JPEG), ability to configure &amp;ldquo;read only&amp;rdquo; mode (my originals are never touched) and &amp;ldquo;photo stream&amp;rdquo; approach (all photos in one huge pile with search/tagging capabilities).</description></item><item><title>How to get rid of Activate web console in CentOS 8</title><link>http://blog.zapletalovi.com/posts/2020-01-11-how-to-get-rid-of-activate-web-console-in-centos-8/</link><pubDate>Sat, 11 Jan 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-01-11-how-to-get-rid-of-activate-web-console-in-centos-8/</guid><description>I guess you&amp;rsquo;ve seen this already:
$ ssh root@nas.local Activate the web console with: systemctl enable --now cockpit.socket Last login: Sat Jan 11 13:05:33 2020 from 192.168.1.137 # _ That&amp;rsquo;s why you are here, is it? Well, easy help:
rm -f /etc/issue.d/cockpit.issue /etc/motd.d/cockpit Problem solved. If you want it back, simply reinstall cockpit package. I am not sure if upgrade would put them back or not tho.</description></item><item><title>Samba and NFS shared folder on CentOS 8</title><link>http://blog.zapletalovi.com/posts/2020-01-11-samba-and-nfs-shared-folder-on-centos8/</link><pubDate>Sat, 11 Jan 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-01-11-samba-and-nfs-shared-folder-on-centos8/</guid><description>Setting up a shared (guest) read-write folder across Samba and NFS was a piece of cake on CentOS 8. I&amp;rsquo;ve also thrown Avahi daemon into the mix so all three platforms we have in our family can easily access our data. Here are my notes.
First of, I&amp;rsquo;ve put my ethernet into trusted zone because I don&amp;rsquo;t want to deal with firewall in my home network. I am running one on router.</description></item><item><title>Configuring HDD to spin down in Linux via SMART</title><link>http://blog.zapletalovi.com/posts/2020-01-08-configuring-hdd-to-spin-down-in-linux-via-smart/</link><pubDate>Wed, 08 Jan 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-01-08-configuring-hdd-to-spin-down-in-linux-via-smart/</guid><description>I had a chat with Standa Graf from Red Hat about the idle3ctl WD disks utility, looks like some WD disks do actually follow the SMART/APM parameter and the spindown timeout can be changed using the standardized utility. Standa showed me a nifty trick to do this automatically and he claims it works for all his internal and external (USB) drives. I am gonna share the trick here:
cat &amp;gt;/etc/udev/rules.d/69-hdparm.rules &amp;lt;&amp;lt;EOF ACTION==&amp;quot;add|change&amp;quot;, KERNEL==&amp;quot;sd[a-z]&amp;quot;, ATTR{queue/rotational}==&amp;quot;1&amp;quot;, RUN+=&amp;quot;/usr/sbin/smartctl --set apm,128 --set lookahead,on --set wcache,on --set standby,241 /dev/%k&amp;quot; EOF Unfortunately, my WD model (RED 2TB) does not accept the APM parameter and I need to stick with the idle3ctl utility:</description></item><item><title>Values for WD idle time in Linux</title><link>http://blog.zapletalovi.com/posts/2020-01-07-wd-idle-time-in-linux/</link><pubDate>Tue, 07 Jan 2020 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2020-01-07-wd-idle-time-in-linux/</guid><description>&lt;p>There is a tool called idle3ctl which can disable, get or set the idle3 timer
on Western Digital hard drives. Idle3ctl can be used as an alternative to the
official wdidle3.exe proprietary utility, without the need to reboot in a DOS
environement. Idle3ctl is an independant project, unrelated in any way to
Western Digital Corp.&lt;/p>
&lt;p>To set idle3 timer raw value, option -s must be used. Value must be an integer
between 1 and 255. The idle3 timer is set in 0.1s for the 1-128 range, and
in 30s for the 129-255 range. Example:&lt;/p>
&lt;pre>&lt;code># idle3ctl -s190 /dev/sdc
Idle3 timer set to 190 (0xbe)
Please power cycle your drive off and on for the new
setting to be taken into account. A reboot will not be enough!
# idle3ctl -g /dev/sdc
Idle3 timer set to 190 (0xbe)
&lt;/code>&lt;/pre>
&lt;p>Here is the snag, I had to do some math to be able to figure out the correct
value. So I created a table for you, so you don&amp;rsquo;t have to! Enjoy.&lt;/p></description></item><item><title>Easy libvirt IPv6 routed network</title><link>http://blog.zapletalovi.com/posts/2019-12-10-easy-libvirt-ipv6-routed-network/</link><pubDate>Tue, 10 Dec 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-12-10-easy-libvirt-ipv6-routed-network/</guid><description>This is a tutorial on how to create a routed IPv6 libvirt network for testing. Having a &amp;ldquo;default&amp;rdquo; NAT network, create a new one called &amp;ldquo;isolated&amp;rdquo; as isolated network (no upstream connectivity). Then create new VM with two network cards both in &amp;ldquo;default&amp;rdquo; and &amp;ldquo;isolated&amp;rdquo; networks. I used CentOS 8.0 but this would work with any distribution.
First off, create new account at https://www.tunnelbroker.net and you will be given an IPv6 network:</description></item><item><title>How to easily send e-mails via mailx</title><link>http://blog.zapletalovi.com/posts/2019-11-27-how-to-easily-send-e-mails-via-mailx/</link><pubDate>Wed, 27 Nov 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-11-27-how-to-easily-send-e-mails-via-mailx/</guid><description>So far I&amp;rsquo;ve been pretty fine with having postfix to relay my emails from command line, but today I&amp;rsquo;ve learned that the tool I use for sending emails from cron (mailx) can be easily configured to relay the mail directly. It&amp;rsquo;s super easy:
$ cat ~/.mailrc set smtp-use-starttls set smtp=smtp://smtp.xxx.redhat.com:587 set from=xxx@redhat.com That&amp;rsquo;s all. To test the delivery use -v option:
echo &amp;quot;How you doin?&amp;quot; | mail -v -s Test xxx@redhat.</description></item><item><title>Simple script to record a window and audio in Linux</title><link>http://blog.zapletalovi.com/posts/2019-11-25-simple-script-to-record-a-window-and-audio-in-linux/</link><pubDate>Mon, 25 Nov 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-11-25-simple-script-to-record-a-window-and-audio-in-linux/</guid><description>Works fine on X Window System for years, you asked, here you go. Will probably not work on Wayland, I haven&amp;rsquo;t tried. Tell me about it if you use it.
For the record, the script asks you to click on a window and then it starts recording it in slow frames per second with audio from the default device. Stop with Ctrl+C and then hit ENTER to merge audio+video into a single WebM stream suitable for youtube.</description></item><item><title>Testing TLS CA, server and client certs</title><link>http://blog.zapletalovi.com/posts/2019-09-05-testing-tls-ca-server-and-client-certs/</link><pubDate>Thu, 05 Sep 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-09-05-testing-tls-ca-server-and-client-certs/</guid><description>I need a X509 CA, server and client certificate quite often during my day-to-day work on Foreman, Smart Proxy and managed nodes. Up until now, I&amp;rsquo;ve been using &amp;ldquo;puppet cert&amp;rdquo; command which was pretty useful utility for simple X509 management, however it has been moved to puppet server package which I don&amp;rsquo;t want to install on my workstation.
Well, it turns out that in 2019 it&amp;rsquo;s still a challenge to figure out OpenSSL commands to generate certificates.</description></item><item><title>Hidden gem of Fedora: lbzip2</title><link>http://blog.zapletalovi.com/posts/2019-08-23-hidden-gem-of-fedora-lbzip2/</link><pubDate>Fri, 23 Aug 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-08-23-hidden-gem-of-fedora-lbzip2/</guid><description>Fedora carries a nifty utility for years which is called lbzip2. What it does? Well, an example is worth hundreds of words:
[lzap@box tmp]$ time tar -c linux-5.2.9/ | bzip2 -5 &amp;gt; /dev/null real 1m10,480s user 1m10,228s sys 0m1,705s [lzap@box tmp]$ time tar -c linux-5.2.9/ | lbzip2 -5 &amp;gt; /dev/null real 0m4,155s user 1m3,190s sys 0m1,581s This is my 8-core (16-threads) Ryzen CPU so pretty much a standard modern CPU and the difference is obvious.</description></item><item><title>Capture and playback UDP packets</title><link>http://blog.zapletalovi.com/posts/2019-08-13-capture-and-playback-udp-packets/</link><pubDate>Tue, 13 Aug 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-08-13-capture-and-playback-udp-packets/</guid><description>Generating some random statsd communication is easy, it&amp;rsquo;s text-based UDP protocol and all you need to have is netcat. However things change when statsd server is integrated with real application flodding it with thousands of packets of various attributes. For easier debugging, I was able to capture the traffic with tcpdump:
tcpdump -i lo udp port 8125 -w /tmp/statsd-from-foreman-devel.pcap That&amp;rsquo;s easy, however I was looking for a tool to actually replay the traffic anytime I want and I found tcpreplay.</description></item><item><title>ThinkPad X1 Carbon 6th gen on Fedora</title><link>http://blog.zapletalovi.com/posts/2019-07-23-thinkpad-x1-carbon-6th-gen-on-fedora/</link><pubDate>Tue, 23 Jul 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-07-23-thinkpad-x1-carbon-6th-gen-on-fedora/</guid><description>This is a quick post to have my installation notes on the record.
Step one: BIOS upgrade and settings Before I start, it is worth mentioning that it&amp;rsquo;s possible to seamlessly upgrade BIOS and firmware of this laptop directly from Software app in Fedora, however I want to upgrade BIOS to the latest possible version before I even attempt to install the OS. You can very likely skip this step, setup BIOS as recommended, install Fedora and then upgrade it using a single mouse click if you want.</description></item><item><title>Slow boot: LVM2 PV scan on device</title><link>http://blog.zapletalovi.com/posts/2019-06-11-slow-boot-lvm2-pv-scan-on-device/</link><pubDate>Tue, 11 Jun 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-06-11-slow-boot-lvm2-pv-scan-on-device/</guid><description>My workstation was sometimes slow to boot and got stuck at:
Start job is running for LVM PV Scan on device 0:1 ... Start job is running for activation of DM RAID sets ... It took me lot of time experimenting with settings, before you do that I suggest to do one simple workaround. The timeout for this systemd unit is actually set to infinite value, so it can easily get your PC or laptop stuck for hours as there is no way of interrupting this.</description></item><item><title>Configuring Eaton 3S UPS with Fedora 30</title><link>http://blog.zapletalovi.com/posts/2019-06-07-configuring-eaton-3s-ups-with-fedora-30/</link><pubDate>Fri, 07 Jun 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-06-07-configuring-eaton-3s-ups-with-fedora-30/</guid><description>First off, make sure your UPS is connected. On my system, I had to use a different USB port as it was disconnecting regularly for some reason - probably USB power issues which is funny since this is a power device:
# dmesg # lsusb Install and configure nut software:
# dnf -y install nut # grep ^MODE /etc/ups/nut.conf MODE=standalone # grep -v '^#' /etc/ups/ups.conf [eaton3s] driver=usbhid-ups port=auto # grep -v '^#' /etc/ups/upsmon.</description></item><item><title>Switching from i3status to barista</title><link>http://blog.zapletalovi.com/posts/2019-06-07-switching-from-i3status-to-barista/</link><pubDate>Fri, 07 Jun 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-06-07-switching-from-i3status-to-barista/</guid><description>I am a long-time i3wm user and I&amp;rsquo;ve been using i3status for a while now. However this software is very opinionated which is not a bad thing, however after upgrade to my new UPS I wanted to put battery on my bar as well as Ryzen temperature. Upstream did not like my patch, time to move on.
There is a nice i3bar called Barista available. What&amp;rsquo;s a bit strange (and I like it) is that it&amp;rsquo;s written in Go and you have to compile the bar yourself.</description></item><item><title>How to report a SELinux bug</title><link>http://blog.zapletalovi.com/posts/2019-06-04-how-to-report-a-selinux-bug/</link><pubDate>Tue, 04 Jun 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-06-04-how-to-report-a-selinux-bug/</guid><description>A friendly reminder how to report a SELinux bug. First off, find that there actually is a denial:
# ausearch -m AVC If there is, let&amp;rsquo;s create a good report. First, install additional tools. On EL7 do:
# yum -y install setools-console policycoreutils-python policycoreutils selinux-policy-devel On EL8 one package was renamed:
# yum -y install setools-console policycoreutils-devel policycoreutils selinux-policy-devel Now, generate interfaces for audit2allow:
# sepolgen-ifgen As the next step I actually recommend to turn off enforcing mode although it can sometimes generate lots of unrelated noise (if domains are not right).</description></item><item><title>LVM cache in six easy steps</title><link>http://blog.zapletalovi.com/posts/2019-05-20-lvm-cache-in-six-easy-steps/</link><pubDate>Mon, 20 May 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-05-20-lvm-cache-in-six-easy-steps/</guid><description>This article shows how to quickly create LVM cache in six quick step, and how to remove it properly. Before I start, little bit of warning: I do not recommend using LVM cache on raw SSD devices. Due to bug in Fedora 30 my cachepool volume was created with an incorrect cache chunk size which led to problems when I was trying to remove cache volume from the pool after SSD died.</description></item><item><title>Connecting a physical host to libvirt NAT network</title><link>http://blog.zapletalovi.com/posts/2019-02-19-connecting-a-physical-host-to-libvirt-nat-network/</link><pubDate>Tue, 19 Feb 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-02-19-connecting-a-physical-host-to-libvirt-nat-network/</guid><description>A customer sent me an industrial server for testing, pretty interesting stuff for trains, planes and boats. I have added a new PCIe NIC to my workstation and I wanted to put it inside my libvirt NAT network which I use for testing Foreman and Satellite.
Surpringlisly it was not easy to figure out this for me, luckily Patrick Talbert of Red Hat helped me to find a command that does exactly what I wanted:</description></item><item><title>Linux as NAT server in two easy steps</title><link>http://blog.zapletalovi.com/posts/2019-02-18-linux-as-nat-server-in-easy-steps/</link><pubDate>Mon, 18 Feb 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-02-18-linux-as-nat-server-in-easy-steps/</guid><description>There are many articles explaining how to do NAT and masquerading with Linux using iptables or other quite low-level tools. This is all not necessary these days, NetworkManager and firewalld can do the dirty work for us! If you have RHEL7, CentOS7 or any modern Fedora or pretty much anything which is more recent, it&amp;rsquo;s super easy.
In my scenario I want to NAT traffic from an internal network 192.168.199.0/24 to external (virtual NAT actually) network 192.</description></item><item><title>Set the default route via nmcli</title><link>http://blog.zapletalovi.com/posts/2019-02-18-set-the-default-route-via-nmcli/</link><pubDate>Mon, 18 Feb 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-02-18-set-the-default-route-via-nmcli/</guid><description>I&amp;rsquo;ve never researched anything about how route metric number work other than it&amp;rsquo;s probably &amp;ldquo;higher metric wins&amp;rdquo; (or the other way around?) Anyway, today I added new interface to one of my VMs and repatched it. My goal was to change the default route from eth0 to newly created eth1. NetworkManager has some rules to automatically detect these, however since I am unsure how all of this works I&amp;rsquo;ve decided to solve it this way.</description></item><item><title>Nice launcher for i3wm: xlunch</title><link>http://blog.zapletalovi.com/posts/2019-02-08-nice-launcher-for-i3wm-xlunch/</link><pubDate>Fri, 08 Feb 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-02-08-nice-launcher-for-i3wm-xlunch/</guid><description>I am happy user of i3 for some time now. About a year ago, I changed my app launcher from dmenu to xlunch and it&amp;rsquo;s been pretty fine experience. So let me share this with you.
There is no Fedora package for xlunch yet and I am too lazy to create one. Volunteers! But the installation is like:
git clone https://github.com/Tomas-M/xlunch cd xlunch sudo dnf install imlib2-devel libX11-devel make I don&amp;rsquo;t even bother to install it and keep this in the workspace directory, I assume the installation would go something like:</description></item><item><title>Delivering cron and logwatch emails to gmail in RHEL</title><link>http://blog.zapletalovi.com/posts/2018-09-19-delivering-cron-emails-to-gmail-in-rhel/</link><pubDate>Wed, 19 Sep 2018 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2018-09-19-delivering-cron-emails-to-gmail-in-rhel/</guid><description>One of my servers has no real DNS name, there is no MX record and I can hardly confiture postfix for e-mail delivery. While relaying e-mails to another SMTP server is an option, it&amp;rsquo;s actually not needed to configure MTA in order to get emails delivered from cron and logwatch. One can use MUA called mailx to do the job.
The goal is to avoid more complex configuration of postfix or (jeeeez) sendmail, so this is an alternative approach.</description></item><item><title>Switching to Universal Ctags</title><link>http://blog.zapletalovi.com/posts/2018-09-18-switching-to-universal-ctags/</link><pubDate>Tue, 18 Sep 2018 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2018-09-18-switching-to-universal-ctags/</guid><description>After some time spent with exuberant-ctags and ripper-tags, I am switching over to universal-ctags. Ruby language and other languages like Golang is vastly improved over to exuberant-ctags and even ripper-tags. Here are my git hooks which I use for all my project checkouts. It&amp;rsquo;s fast, fluent and works across all my projects.
For navigation I stick with Vim, sometimes I use fzf.vim plugin together with fzf for terminal.
For longer coding sessions, I am trying GNOME Builder which looks great and every single release it is catching up with Submlime Text 3, except it is fully open source and it has usable Vim emulation.</description></item><item><title>Tracing Ruby apps with PCP</title><link>http://blog.zapletalovi.com/posts/2018-03-21-tracing-ruby-apps-with-pcp/</link><pubDate>Wed, 21 Mar 2018 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2018-03-21-tracing-ruby-apps-with-pcp/</guid><description>PCP offers two APIs for instrumented applications. The first one to mention is MMV agent which uses memory mapped files for capturing high-resolution data with minimum performance impact. Currently available languages for MMV instrumentation include C/C++, Python and Perl plus native Java,Golang and Rust ports. A second agent and approach is called PMDA trace with its higher level API. It uses TCP sockets and a simple API for capturing time spent, counters, trace points and raw value observations.</description></item><item><title>On generating kickstart passwords</title><link>http://blog.zapletalovi.com/posts/2018-02-27-on-generating-kickstart-passwords/</link><pubDate>Tue, 27 Feb 2018 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2018-02-27-on-generating-kickstart-passwords/</guid><description>Although Fedora or RHEL kickstart accept root password in plain text, it&amp;rsquo;s not bad idea at all to encrypt them using standard Linux PAM mechanism. There used to be a utility which is no longer available. So I wrote a small script which does that. It is in Fedora 27+ now and on its way to EPEL7. Here is how to use it:
$ man pwkickstart NAME pwkickstart - generate kickstart passwords SYNOPSIS # pwkickstart Password: # md5 rootpw --iscrypted $1$SI$D964QyK1.</description></item><item><title>Accessing libvirt VMs via telnet</title><link>http://blog.zapletalovi.com/posts/2018-02-20-accessing-libvirt-vms-via-telnet/</link><pubDate>Tue, 20 Feb 2018 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2018-02-20-accessing-libvirt-vms-via-telnet/</guid><description>There are many &amp;ldquo;tricks&amp;rdquo; floating around how to connect to VM when you have a networking issue and ssh is not available. The idea is to use serial console to get shell access. Here is how to do this properly with RHEL7 host and guest.
First, create a VM with serial console configured with remote TCP server. There are multiple options, I find TCP server in &amp;rsquo;telnet&amp;rsquo; mode the most flexible configuration because most scripting languages has the protocol built-in.</description></item><item><title>Hidden gem of Fedora: virt-builder</title><link>http://blog.zapletalovi.com/posts/2018-02-06-hidden-gem-of-fedora-virt-builder/</link><pubDate>Tue, 06 Feb 2018 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2018-02-06-hidden-gem-of-fedora-virt-builder/</guid><description>Or I should say hidden gem of Fedora, CentOS and RHEL. This fantastic tool is part of package named libguestfs-tools-c and it&amp;rsquo;s fast image builder. To create Fedora 27 10GB image with root password set to &amp;ldquo;redhat&amp;rdquo;:
virt-builder fedora-27 --size=10G \ --root-password password:redhat To start the image use libvirt utility:
virt-install --import --name fedora --ram 2048 \ --disk path=fedora-27.img,format=raw --os-variant fedora27 To start Fedora 25 and immediately install Xfce desktop:</description></item><item><title>Definitive solution to libvirt guest naming</title><link>http://blog.zapletalovi.com/posts/2017-10-10-definitive-solution-to-libvirt-guest-naming/</link><pubDate>Tue, 10 Oct 2017 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2017-10-10-definitive-solution-to-libvirt-guest-naming/</guid><description>The answer is libvirt NSS. This is Fedora 26:
yum install libvirt-nss And enable the NSS module with two &amp;ldquo;libvirt&amp;rdquo; keywords:
# egrep ^host /etc/nsswitch.conf hosts: files libvirt libvirt_guest dns myhostname DNS resolution just works for all my libvirt guests now. NSS will figure it out according to dnsmasq DHCP records (hostname entry). If that&amp;rsquo;s not advertised by a guest, then it will use VM name. For FQDN you need to rename your VM names to include domain too, e.</description></item><item><title>Ryzen and Linux is a disaster (2017)</title><link>http://blog.zapletalovi.com/posts/2017-10-06-ryzen-and-linux-is-a-disaster-2017/</link><pubDate>Fri, 06 Oct 2017 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2017-10-06-ryzen-and-linux-is-a-disaster-2017/</guid><description>If you are reading this blog post in 2018 or later, chances are that AMD has fixed all Linux issues. But that was not the case months after launch in 2017. Also, I work at Red Hat, these lines are solely my own opinion blah blah. Let&amp;rsquo;s start, shall we?
Ryzen 7 series was introduced early March 2017, I bought parts for my Ryzen workstation beginning June 2017 thinking that few months will allow AMD to settle down and release necessary BIOS updates and CPU microcode upgrade.</description></item><item><title>EFI with libvirt in RHEL7</title><link>http://blog.zapletalovi.com/posts/2017-10-03-efi-with-libvirt-in-rhel7/</link><pubDate>Tue, 03 Oct 2017 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2017-10-03-efi-with-libvirt-in-rhel7/</guid><description>RHEL 7 does not ship with EFI firmware by default, at least version 7.4 I just tested with. There is easy help tho if you want to try EFI in libvirt which does not make much any other sense than for development purposes.
We will follow steps from Fedora Wiki but changed into RHEL context. Download firmware repository which have latest builds of EFI QEMU firmware and NVRAM images:
# wget -O /etc/yum.</description></item><item><title>CentOS and security updates</title><link>http://blog.zapletalovi.com/posts/2017-08-01-centos-and-security-updates/</link><pubDate>Tue, 01 Aug 2017 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2017-08-01-centos-and-security-updates/</guid><description>I often see articles, blog posts or even video tutorials on how to apply security-only errata in CentOS environments or set a cron job to do this regularly. While it can be very useful to keep components on a specific version and only updating those which has security fixes, it has one drawback.
It does not work in CentOS.
The thing is that yum-plugin-security plugin which is available in CentOS installs just fine and operates properly returning no security updates when people test this.</description></item><item><title>Git auto fetch script I run every day</title><link>http://blog.zapletalovi.com/posts/2017-07-17-git-auto-fetch-script-i-run-every-day/</link><pubDate>Mon, 17 Jul 2017 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2017-07-17-git-auto-fetch-script-i-run-every-day/</guid><description>I am &amp;ldquo;shutdowner&amp;rdquo;, meaning I always shutdown my laptop (now workstation) at the end of the day. I have a script to do that which sleeps 5 seconds (so I can change my mind - e.g. when I dig shell history incorrectly and quickly hit enter - it really happened yeah) and it is simple:
puts my monitors into standby mode applies all OS updates runs duplicity backup on my home folder fetches git repos filesystem sync call fstrim root volume poweroff I learned a trick I want to write about today from colleague of mine Mirek Suchý, but I think he runs it from cron (not a &amp;ldquo;shutdowner&amp;rdquo; guy).</description></item><item><title>Ryzen workstation build 2017</title><link>http://blog.zapletalovi.com/posts/2017-06-07-ryzen-workstation-build-2017/</link><pubDate>Wed, 07 Jun 2017 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2017-06-07-ryzen-workstation-build-2017/</guid><description>I&amp;rsquo;ve been waiting for so long, AMD RYZEN processors are here for some time and I was giving few months to vendors and community to settle down and release updates for their BIOSes, firmware and Linux drivers before I finally made my decision. My next machine for work is AMD RYZEN 1700, unbelievable value for the money! Eight cores, sixteen threads and only 65 watts with stock cooler that is silent and &amp;ldquo;cool&amp;rdquo; according to all reviews.</description></item><item><title>PulseAudio headset switcher</title><link>http://blog.zapletalovi.com/posts/2017-04-13-pulseaudio-headset-switcher/</link><pubDate>Thu, 13 Apr 2017 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2017-04-13-pulseaudio-headset-switcher/</guid><description>From time to time I encounter an embarrasing moment on meeting when new headset does not work. I purchased new one which only made some noise instead. I will return this back, but in the meantime I found a Logitech USB headset in my closet and it works pretty well, so I think I am gonna stick with it.
I created few aliases that will help me to switch PulseAudio default input and output to headset and back and forth.</description></item><item><title>XTerm Zen mode</title><link>http://blog.zapletalovi.com/posts/2016-10-14-xterm-zen-mode/</link><pubDate>Fri, 14 Oct 2016 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2016-10-14-xterm-zen-mode/</guid><description>I do lot of talks these days with some amount of shell live demos. Although it is easy to configure xterm for beamer (black on white, big font, fullscreen), I created an alias for that:
xterm -cm -fa Monospace -fs 32 -bg white -fg black -cr red -bc \ -bcf 200 -bcn 200 -xrm &amp;quot;allowColorOps false&amp;quot; -fullscreen \ -e &amp;quot;PS1='$ ' LC_ALL=C /bin/bash --norc --noprofile&amp;quot; And this is how it looks like:</description></item><item><title>Hidden feature of Fedora 24: Live PXE boot</title><link>http://blog.zapletalovi.com/posts/2016-08-16-hidden-feature-of-fedora-24-live-pxe-boot/</link><pubDate>Tue, 16 Aug 2016 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2016-08-16-hidden-feature-of-fedora-24-live-pxe-boot/</guid><description>Some time ago, I was trying to PXE-boot Fedora 20 LiveCD directly as a squashfs filesystem from TFTP server. It was not working, because one of the dracut modules was not included on the CD/DVD init RAM disk. I filed a bug, some time passed and it&amp;rsquo;s finally fixed.
Required steps to achieve Live Fedora from PXE:
download Fedora 24 Live DVD (or older) extract squashfs.img put it on HTTP site (/var/www/htdocs) extract vmlinuz and initrd.</description></item><item><title>Probing Ruby 2.0 apps with SystemTap in RHEL7</title><link>http://blog.zapletalovi.com/posts/2016-08-02-probing-ruby-20-apps-with-systemtap-in-rhel7/</link><pubDate>Tue, 02 Aug 2016 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2016-08-02-probing-ruby-20-apps-with-systemtap-in-rhel7/</guid><description>Few years ago, I wrote an article about SystemTap and Ruby in RHEL6. When RHEL 7.0 was released, things changed. It has Ruby 2.0 and the Ruby SystemTap API changed as well, therefore I am updating my old article today according to new changes.
Imagine you have a Ruby application that has some performance issues on a production server and it&amp;rsquo;s running RHEL 7.0 or newer. With SystemTap, you can easily peek into the running application and investigate bottlenecks or count memory objects.</description></item><item><title>Brother MFC L2700DW and Fedora 20-33</title><link>http://blog.zapletalovi.com/posts/2016-07-07-brother-mfc-l27000dw-and-fedora-23/</link><pubDate>Thu, 07 Jul 2016 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2016-07-07-brother-mfc-l27000dw-and-fedora-23/</guid><description>I bought this new device in order to have network printing and scanning and it works just fine. It was a pain to get it working tho. Here is a tutorial which was tested in Fedora 20 through 33.
Printing over network Add the printer using IPP protocol:
lpadmin -p Printer -E -v ipp://printer.home.lan -m everywhere It is possible to find printer&amp;rsquo;s URL via Bonjour:
lpinfo --include-schemes dnssd -v network dnssd://tiskarna.</description></item><item><title>Hidden gem of Fedora: git xcleaner</title><link>http://blog.zapletalovi.com/posts/2016-05-06-hidden-gem-of-fedora-git-xcleaner/</link><pubDate>Fri, 06 May 2016 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2016-05-06-hidden-gem-of-fedora-git-xcleaner/</guid><description>Fedora 22+ now provides new tool called git-xcleaner which helps deleting unused topic branches using TUI (text user interface). It also offers mechanisms for pre-selecting branches that can be safely removed.
Possible actions:
Merged
Command git branch &amp;ndash;merged is used to find a list of branches that are marked for deletion.
Messages
For each branch, tip commit message is compared against base history and if found, the branch is marked for deletion.</description></item><item><title>Upgraded to Jekyll 3.0</title><link>http://blog.zapletalovi.com/posts/2016-02-22-upgraded-to-jekyll-30/</link><pubDate>Mon, 22 Feb 2016 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2016-02-22-upgraded-to-jekyll-30/</guid><description>Github Pages now supports Jekyll 3.0 which has some backward incompatible features, so I have decided to upgrade. I was quite surprised when I realized I am still using Jekyll 1.0 and everything was working great so far!
What&amp;rsquo;s great about static pages is you decide when you upgrade your site. There are no security updates, it&amp;rsquo;s just bunch HTML and CSS. Upgrade was smooth, I only had to do two configuration changes and one layout change.</description></item><item><title>Served by CloudFlare</title><link>http://blog.zapletalovi.com/posts/2015-12-16-served-by-cloudflare/</link><pubDate>Wed, 16 Dec 2015 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2015-12-16-served-by-cloudflare/</guid><description>Starting today, my blog is being served through CloudFlare caching CDN. This means faster loading speeds, but what&amp;rsquo;s more important is valid SSL certificate through their SSL Free Termination service. I will switch all links to https by default and after few weeks if there are no issues reported, I will force HTTPS via redirect.
https://sheharyar.me/blog/free-ssl-for-github-pages-with-custom-domains/
And yeah, my blog now supports HTTP/2 and SPDY and other fancy things.
Please report issues via discussion or IRC or Google+.</description></item><item><title>Image based deployment via dd and nbd</title><link>http://blog.zapletalovi.com/posts/2015-11-20-image-based-deployment-via-dd-and-nbd/</link><pubDate>Fri, 20 Nov 2015 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2015-11-20-image-based-deployment-via-dd-and-nbd/</guid><description>My train to Pilsen had about 300+ people onboard and apparently super-modern ultra-fast WiFi technology can&amp;rsquo;t handle that many people. At least when administrator sets C class IPv4 network. People have cell phones, tablets and laptops. It&amp;rsquo;s no surprise that the DHCP server ran out of resources since I see like 500+ devices around.
Hey, Leo Express, I am looking at you!
Luckily, not being able to connect to the internet I started hacking discovery image.</description></item><item><title>Fedora 22 libvirt with bridge</title><link>http://blog.zapletalovi.com/posts/2015-09-24-fedora-22-libvirt-with-bridge/</link><pubDate>Thu, 24 Sep 2015 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2015-09-24-fedora-22-libvirt-with-bridge/</guid><description>Fedora 22 comes with libvirt and NetworkManager and it is pre-configured with &amp;ldquo;default&amp;rdquo; NAT network. That&amp;rsquo;s fine, until you want to reach the NATed servers from your LAN. By the way this works in CentOS 7 too.
Good solution is network interface bridging. It was always a pain to configure this, but in Fedora 21 most of bugs were fixed and now it is possible to configure everything via NetworkManager.</description></item><item><title>How to configure NFS firewall in RHEL7</title><link>http://blog.zapletalovi.com/posts/2015-09-11-how-to-configure-nfs-firewall-in-rhel7/</link><pubDate>Fri, 11 Sep 2015 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2015-09-11-how-to-configure-nfs-firewall-in-rhel7/</guid><description>If you intend to use NFSv4 protocol only, all you need to do is this:
firewall-cmd --permanent --zone public --add-service nfs firewall-cmd --reload But if you want to use NFSv3 protocol, things are more complicated.
firewall-cmd --permanent --zone public --add-service mountd firewall-cmd --permanent --zone public --add-service rpc-bind firewall-cmd --permanent --zone public --add-service nfs firewall-cmd --reload</description></item><item><title>Configure journal on your Fedora</title><link>http://blog.zapletalovi.com/posts/2015-04-01-configure-journal-on-your-fedora/</link><pubDate>Wed, 01 Apr 2015 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2015-04-01-configure-journal-on-your-fedora/</guid><description>I was busy last couple of months, but I am doing fine. Recently, I noticed that journald system logs on my laptop got bigger recently. By default systemd eats ten per cent of the size of the file system. That is too much on my 256 MB SSD drive.
# journalctl --disk-usage Journals take up 1.8G on disk. Configuration is trivial and fully documented in the journald.conf(5) manual page. My idea is to keep half-a-gig of logs or entries with maximum age of two months.</description></item><item><title>Speech compressor and limiter for your headset in Fedora</title><link>http://blog.zapletalovi.com/posts/2015-01-07-speech-compressor-and-limiter-for-your-headset-in-fedora/</link><pubDate>Wed, 07 Jan 2015 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2015-01-07-speech-compressor-and-limiter-for-your-headset-in-fedora/</guid><description>Last couple of months I&amp;rsquo;ve been using Google Hangouts and Bluejeans conferencing technologies more than my VoIP phone. I got used to crisp and clear voice from my Polycom and Platronics headset so I had a question.
Is it possible to achieve the same with my cheap USB Logitech headset which I use for this purpose? The obvious answer is &amp;ndash; yes.
This is tutorial how to setup PulseAudio in Fedora 20+ with LADSPA plugins to improve audio experiences for conferences.</description></item><item><title>EFI in QEMU KVM on Fedora 20</title><link>http://blog.zapletalovi.com/posts/2014-09-30-efi-in-qemu-kvm-on-fedora-20/</link><pubDate>Tue, 30 Sep 2014 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2014-09-30-efi-in-qemu-kvm-on-fedora-20/</guid><description>Last sprint, I was working on EFI PXE booting support for Foreman. Although I have a EFI-compatible PC in the house, I wanted a stable environment for development and testing. Virtualized, of course.
The best option is KVM/QEMU/libvirt triple which I use for regular Foreman development. I started googling around and spent a day modifying my distribution package. It did not work well. And then I stumbled upon familiar name, Laszlo Ersek from Red Hat, who helped me getting this rolling.</description></item><item><title>Tunnel into your libvirt NAT network with SOCKS</title><link>http://blog.zapletalovi.com/posts/2014-07-31-tunnel-into-your-libvirt-nat-network-with-socks/</link><pubDate>Thu, 31 Jul 2014 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2014-07-31-tunnel-into-your-libvirt-nat-network-with-socks/</guid><description>My development setup is based on two Fedora boxes: laptop and worstation situated in Red Hat office. Both machines are powerful enough to run few VMs, but to leverage hardware, I wanted to use libvirt virtual networks on both devices. The Xeon server is more capable of running nested KVM virtual appliances like oVirt or RHEV while laptop is good for local testing.
I have two virtual (NAT) libvirt networks called:</description></item><item><title>Track short lived processes with auditd</title><link>http://blog.zapletalovi.com/posts/2014-05-27-track-short-lived-processes-with-auditd/</link><pubDate>Tue, 27 May 2014 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2014-05-27-track-short-lived-processes-with-auditd/</guid><description>I had a hard time to find some more information about short lived processes when I was building Foreman SELinux policy for OpenStack Installer (Staypuft). I wanted to see process name and all the parameters for all possible processes spawned on my system. My plan was to write a SystemTap script, but thank to Mirek Grepl and Steve Grubb I learned much easier trick to do that. This assumes you have auditd daemon installed (RHEL/Fedoras are fine):</description></item><item><title>SystemTap as a system wide strace tool</title><link>http://blog.zapletalovi.com/posts/2014-05-16-systemtap-as-a-system-wide-strace-tool/</link><pubDate>Fri, 16 May 2014 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2014-05-16-systemtap-as-a-system-wide-strace-tool/</guid><description>I needed to find a process that was searching for several file patterns. I could use strace tool but since this one was a Apache2 module, I would need to hack startup scripts and probably create a wrapper script. There was another way of doing that - using SystemTap.
My problem was simple - I wanted to see process name, pid and full absolute path for a filename pattern. The goal was set, with little bit of googling, I was able to write this (not ideal and hacky) SystemTap script:</description></item><item><title>Virt builder quick provision script</title><link>http://blog.zapletalovi.com/posts/2014-05-15-virt-builder-quick-provision-script/</link><pubDate>Thu, 15 May 2014 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2014-05-15-virt-builder-quick-provision-script/</guid><description>Until now, I was using snap-guest tool together with Foreman to spawn my development/test virtual machines. I have been carefully monitoring (virt-builder)[http://libguestfs.org/virt-builder.1.html] tool in recent Fedoras and it looks like the version from Fedora 20 is finally usable for my scenarios (thanks Rich for fixing some annoying bugs for me).
Therefore I am happy to announce new tool called fvb which stands for Foreman-virt-builder. This little script is based around two little commands virt-builder/virt-install and it has grown to something bigger over last couple of months.</description></item><item><title>Hidden feature of Fedora 20 - pass cli manager</title><link>http://blog.zapletalovi.com/posts/2014-04-15-hidden-feature-of-fedora-20-pass-cli-manager/</link><pubDate>Tue, 15 Apr 2014 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2014-04-15-hidden-feature-of-fedora-20-pass-cli-manager/</guid><description>When it comes to password management, I&amp;rsquo;ve always been happy user of KeepassX for many years. But when I stumbled upon new and simple tool called &amp;ldquo;pass&amp;rdquo; and I realized that I use mouse (trackball actually) with only two applications: Google Chrome and, of course, KeepassX in my workflow (i3, mutt, vim, ssh).
This tool is basically a shell wrapper around gpg, git and few other tools:
# yum install pass pinentry-gtk It&amp;rsquo;s definitely not a monster tool, which I appreciate:</description></item><item><title>SELinux Puppet update in Fedora 20 and Rawhide</title><link>http://blog.zapletalovi.com/posts/2014-04-10-selinux-puppet-update-in-fedora-20-and-rawhide/</link><pubDate>Thu, 10 Apr 2014 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2014-04-10-selinux-puppet-update-in-fedora-20-and-rawhide/</guid><description>We are rolling out update of Puppet to 3.4.3 in Fedora 20 and Rawhide that adds one important change. We have found that puppet master was running unconfined, therefore the Puppet SELinux policy was not effective in Fedoras.
The puppet package update fixes one little issue (missing runtime dependency) and corrects startup wrappers for systemd which puts Puppet Master into correct SELinux domain puppetmaster_t. Since this has low security impact, we have decided to backport this change into Fedora 20 too.</description></item><item><title>Get any GDI printer to work on RHEL6</title><link>http://blog.zapletalovi.com/posts/2014-04-02-get-any-gdi-printer-to-work-on-rhel6/</link><pubDate>Wed, 02 Apr 2014 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2014-04-02-get-any-gdi-printer-to-work-on-rhel6/</guid><description>I was happy enough to get an old Konica Minolta 163 copy machine and printer. These devices can deliver black and white printouts at low prices. But this one is GDI only printer without overpriced network/cpu extension PCL card. What to do now?
Well, I have one license of Windows XP running in libvirt in the house. Oh, by the way Microsoft support is ending this month, what will I do?</description></item><item><title>Linux 3.13+ on Zyxel NSA 310</title><link>http://blog.zapletalovi.com/posts/2013-12-08-linux-313-on-zyxel-nsa-310/</link><pubDate>Sun, 08 Dec 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-12-08-linux-313-on-zyxel-nsa-310/</guid><description>I have already written an article about this Marwell Kirkwood device. This time, we are going to compile Linus tree kernel. Yes, almost everything have been already merged. Except LEDs.
It&amp;rsquo;s super easy now.
# make mrproper # make kirkwood_defconfig Creates clean and minimal setup for Kirwkood devices. I needed to make two changes - u-Boot on my device is old and does not support DTS enabled kernels, so I had to concatenate it.</description></item><item><title>How to reach your Fedora/RHEL behind NAT</title><link>http://blog.zapletalovi.com/posts/2013-11-27-how-to-reach-your-fedorarhel-behind-nat/</link><pubDate>Wed, 27 Nov 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-11-27-how-to-reach-your-fedorarhel-behind-nat/</guid><description>I am using an excellent open-source tunneling solution called PageKite for about an year now. It&amp;rsquo;s a small utility written in Python with almost zero dependencies (okay there is one) and it enables you to reach various ports behind NAT. More on the PageKite.net which also provides subscription-based service for those who do not want to run their own man-in-the-middle server (which is needed for this to operate). By the way they datacenters are spread over whole world with excellent Europe coverage.</description></item><item><title>How to backup/migrate entire partitions easily</title><link>http://blog.zapletalovi.com/posts/2013-11-14-how-to-backupmigrate-entire-partitions-easily/</link><pubDate>Thu, 14 Nov 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-11-14-how-to-backupmigrate-entire-partitions-easily/</guid><description>I needed something to migrate my NAS drive to a bigger one and I have stumbled upon fsarchiver - awesome tool which is in Fedora and super easy to use.
I connected my drive with existing data to my USB cradle and installed this masterpiece:
sudo yum -y install fsarchiver I saved partition(s) into one archive (fsa extension) with ultra-fast lzo compression (-z 1):
sudo fsarchiver savefs -z 1 migration.fsa /dev/sdc1 /dev/sdc2 I swapped the drive for a brand new one and after creation of exactly the same partition layout (not using LVM in this case) I migrated the data back:</description></item><item><title>How to TRIM your encrypted SSD in Fedora 19</title><link>http://blog.zapletalovi.com/posts/2013-11-14-how-to-trim-your-ssd-in-fedora-19/</link><pubDate>Thu, 14 Nov 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-11-14-how-to-trim-your-ssd-in-fedora-19/</guid><description>Few months ago I installed Fedora 19 on my new laptop with Samsung SSD and yesterday I found out TRIM is not enabled by default. I was installing using standard options with LVM/LUKS/ext4 partitions.
There were some problems in Fedora 18 with LUKS not propagating TRIM commands, but this was fixed in Fedora 19. On my system, TRIM commands propagate successfully. One just needs to make few changes in the configuration.</description></item><item><title>Installing Win XP/7/8 in RHEL6 KVM</title><link>http://blog.zapletalovi.com/posts/2013-11-08-installing-win-xp78-in-rhel6-kvm/</link><pubDate>Fri, 08 Nov 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-11-08-installing-win-xp78-in-rhel6-kvm/</guid><description>I was trying to install Windows XP system on a RHEL6 operating system using libvirt and I was surprised how smooth this was. Basically, it is very easy to do via virt-manager, but I had special requirements:
standard RHEL6 server only (not RHEV) libvirt via virt-install remote installation via Spice So the first step is to enable optional and supplementary channels for RHEL6:
subscription-manager repos --enable rhel-6-server-optional-rpms subscription-manager repos --enable rhel-6-server-supplementary-rpms Now, install virtualization packages.</description></item><item><title>Execute command during start with systemd</title><link>http://blog.zapletalovi.com/posts/2013-08-30-execute-command-during-start-with-systemd/</link><pubDate>Fri, 30 Aug 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-08-30-execute-command-during-start-with-systemd/</guid><description>I have installed extra bay adapter with HDD drive in my new T430s for purposes of storing big content (images, ISOs etc). But I don&amp;rsquo;t want to keep the disc spinning all the time (I mount it only when I need the content). It&amp;rsquo;s making noise and also eating battery.
There is no rc.local with systemd anymore (sure you can enable it) and I wanted to execute one simple command during start.</description></item><item><title>Hidden gems of xterm</title><link>http://blog.zapletalovi.com/posts/2013-07-17-hidden-gems-of-xterm/</link><pubDate>Wed, 17 Jul 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-07-17-hidden-gems-of-xterm/</guid><description>Last week I migrated from urxvt to xterm, because I noticed that beginning last year (2012), xterm can finally open URLs nicely. This feature was a blocker for me, since I read all my e-mails in mutt and I hate copying links.
During migration, I noticed several nice features of xterm so I decided to write a blog post about few of them. Let&amp;rsquo;s start.
Unicode support Xterm supports UTF-8 by default, you really do not need to do anything except starting it with -u8 option or using uxterm wrapper (which essentially does the same thing).</description></item><item><title>OpenVPN root down plugin update in Fedora 18</title><link>http://blog.zapletalovi.com/posts/2013-05-23-openvpn-root-down-plugin-update-in-fedora-18/</link><pubDate>Thu, 23 May 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-05-23-openvpn-root-down-plugin-update-in-fedora-18/</guid><description>You may noticed that with recent bunch of updates your OpenVPN client may stopped working. The error was:
Thu May 23 09:26:35 2013 PLUGIN_INIT: could not load plugin shared object /usr/lib64/openvpn/plugin/lib/openvpn-down-root.so: /usr/lib64/openvpn/plugin/lib/openvpn-down-root.so: cannot open shared object file: No such file or directory: No such file or directory (errno=2) Thu May 23 09:26:35 2013 Exiting due to fatal error The openvpn package version was bumped in Fedora 18 for some reasons from 2.</description></item><item><title>Managing many servers with Foreman</title><link>http://blog.zapletalovi.com/posts/2013-04-10-managing-many-servers-with-foreman/</link><pubDate>Wed, 10 Apr 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-04-10-managing-many-servers-with-foreman/</guid><description>Recently I joined the Foreman team - an open-source provisioning and configuration management software written in Ruby on Rails. If you manage more than one server and you need to automate server installations and configuration, maybe Foreman is good fit for you. If you use Puppet for configuration deployment, then Foreman is great fit for sure.
In this blog post, I want to share how to do a small installation everythin-on-one-box for evaluating Foreman.</description></item><item><title>Extracting strings for gettext with Vim</title><link>http://blog.zapletalovi.com/posts/2013-04-03-extracting-strings-for-gettext-with-vim/</link><pubDate>Wed, 03 Apr 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-04-03-extracting-strings-for-gettext-with-vim/</guid><description>Big news today, I will be working on Foreman open-source project from now on. Recently I was working on Katello - subscription and package management system.
The Foreman is a complete lifecycle management tool for physical and virtual servers. More info at http://www.theforeman.org
I have been extracting strings today from the codebase for gettext support. If you don&amp;rsquo;t know what that, let me briefly describe it. I need to convert all &amp;ldquo;strings&amp;rdquo; or &amp;lsquo;strings&amp;rsquo; into the following format:</description></item><item><title>Git in Practice slides</title><link>http://blog.zapletalovi.com/posts/2013-03-25-git-in-practice-slides/</link><pubDate>Mon, 25 Mar 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-03-25-git-in-practice-slides/</guid><description>This morning, I have talk about Git at the Palacky University in Olomouc. Here are slides I promised to put on my blog.
Honestly, it is not possible to give decent git overview in one hour. It was just a master plan I could not achieve. I tried at least.
Do not forget, the book you want to go for is Pro Git. Available in Czech as, believe me or not, Pro Git.</description></item><item><title>Katello on TorqueBox talk recording</title><link>http://blog.zapletalovi.com/posts/2013-03-21-katello-on-torquebox-talk-recording/</link><pubDate>Thu, 21 Mar 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-03-21-katello-on-torquebox-talk-recording/</guid><description>Last week videos from Developer Conference 2013 have been uploaded to YouTube.com, so here is my talk about Katello, TorqueBox, Ruby, JRuby, RVM, Bundler, bundler_ext and SystemTap as well as some other things.
And yes, I will reveal what The Cloud is!</description></item><item><title>Booting 3.8+ kernels on Marwell Kirkwood ARM Zyxel NSA 310</title><link>http://blog.zapletalovi.com/posts/2013-03-17-booting-38-kernels-on-marwell-kirkwood-arm-zyxel-nsa-310/</link><pubDate>Sun, 17 Mar 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-03-17-booting-38-kernels-on-marwell-kirkwood-arm-zyxel-nsa-310/</guid><description>Zyxel NSA 3xx are excellent and cheap NAS devices and finally support for model NSA 310 landed in Linus tree in the 3.8 version. Good news, but this Marwell Kirkwood-based ARM device is using DTS (Device Tree). I had no experiences with compiling DTS kernels, until this night.
So the Device Tree, or The Flattened Device Tree, (FDT) is a data structure for describing the hardware in a system. It is a derived from the device tree format used by Open Firmware to encapsulate platform information and convey it to the operating system.</description></item><item><title>Never lost your bash history again</title><link>http://blog.zapletalovi.com/posts/2013-03-11-never-lost-your-bash-history-again/</link><pubDate>Mon, 11 Mar 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-03-11-never-lost-your-bash-history-again/</guid><description>I had a cronjob which was archiving my bash history file, but after one of my Fedora upgrades, it stopped working and I lost my .bash_history. Now, that&amp;rsquo;s unfortunate!
To prevent this in the future, I have decided to take different approach. I have a script now which I run from my bash profile. It creates backups every month (leaving last 200 commands there so I will not lost the latest commands).</description></item><item><title>Migrate Fedora 18 to LightDM</title><link>http://blog.zapletalovi.com/posts/2013-03-07-migrate-fedora-18-to-lightdm/</link><pubDate>Thu, 07 Mar 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-03-07-migrate-fedora-18-to-lightdm/</guid><description>Since I am using i3 window manager for a while and I am very happy with it, I have switched from GDM over to LightDM. Installation was easy:
# sudo yum -y install lightdm-gtk # sudo systemctl disable gdm.service # sudo systemctl enable lightdm.service # sudo reboot Done!
This should work for Fedora 17+ I guess. Tested on 18 tho.</description></item><item><title>Faster backporting with git, ssh and patch</title><link>http://blog.zapletalovi.com/posts/2013-01-23-faster-backporting-with-git-ssh-and-patch/</link><pubDate>Wed, 23 Jan 2013 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2013-01-23-faster-backporting-with-git-ssh-and-patch/</guid><description>If you wort at Red Hat, be prepared to backport stuff. This is why customers pay us - they want stable releases with fixed bugs. So while working on new features upstream, we also fix bugs in released products.
Interested in working at Red Hat? Contact me! ;-)
More info at: http://jobs.redhat.com
The way we work in our team is to fix everything in the upstream project first (for me this is Katello - www.</description></item><item><title>Vim use case - fast edit in buffers</title><link>http://blog.zapletalovi.com/posts/2012-12-10-vim-use-case-fast-edit-in-buffers/</link><pubDate>Mon, 10 Dec 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-12-10-vim-use-case-fast-edit-in-buffers/</guid><description>My second topic has something do to with workflow I use everyday. I often need to edit a file(s), commit to git (usually amending the last one), build and install a package and test it. Often when I am trying my patch that fixes some bug or something.
I use tabs when doing regular feature coding. Tabs are great feature of Vim and works pretty well, but they do not play very well with many files opened.</description></item><item><title>Vim use case - make and quick fix</title><link>http://blog.zapletalovi.com/posts/2012-12-06-vim-use-case-make-and-quick-fix/</link><pubDate>Thu, 06 Dec 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-12-06-vim-use-case-make-and-quick-fix/</guid><description>I use Vim editor for more than thirteen years now. Today I realized that things that seems natural to me are not always visible to new or even skilled users. To learn Vim, you need to use it every single day. It&amp;rsquo;s a very complex tool and every person use Vim differently. There are many ways to do same things.
I&amp;rsquo;d like to share short Vim tips on my blog which I think are nice and I find them useful.</description></item><item><title>Writing katello upgrade script</title><link>http://blog.zapletalovi.com/posts/2012-11-28-writing-katello-upgrade-script/</link><pubDate>Wed, 28 Nov 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-11-28-writing-katello-upgrade-script/</guid><description>With Katello, we deliver script upgrade-katello which enables users to upgrade to the latest version interactively. Each upgrade is divided into several steps. To see all of them, do:
# ls /usr/share/katello/install/upgrade-scripts/ -1 0050_start_qpid.sh 0099_preallocate_mongo.sh 0100_start_mongodb.sh 0110_migrate_pulp.sh 0200_start_httpd.sh 0385_remove_hornet_files.sh 0390_migrate_candlepin.sh 0400_start_tomcat.sh 0410_start_elasticsearch.sh 0700_start_foreman.sh 0710_migrate_katello.sh 0711_reindex_elastic.sh 0720_create_foreman_users.rb 0800_start_katello.sh 0805_start_katello_jobs.sh 0900_katello_configure.sh Each step is just an linux executable, most of them are simple bash scripts with shebang and header which is parsed by the katello-upgrade script:</description></item><item><title>Want faster Java startups in Fedora?</title><link>http://blog.zapletalovi.com/posts/2012-11-19-want-faster-java-startups-in-fedora/</link><pubDate>Mon, 19 Nov 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-11-19-want-faster-java-startups-in-fedora/</guid><description>IBM contributed thing which is called class sharing. The thing is simple, you generate class cache which is then used when Java is starting up (and also shared across JVMs). Startups are faster.
How to use this (pretty old) feature? You re loking for -Xshare option:
$ java -X 2&amp;gt;&amp;amp;1 | grep share -Xshare:off do not attempt to use shared class data -Xshare:auto use shared class data if possible (default) -Xshare:on require using shared class data, otherwise fail.</description></item><item><title>Three way git merging with meld</title><link>http://blog.zapletalovi.com/posts/2012-09-17-three-way-git-merging-with-meld/</link><pubDate>Mon, 17 Sep 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-09-17-three-way-git-merging-with-meld/</guid><description>This article is updated version of Three-way git merging and meld and it was updated once again in 2015 (thanks to Eric Drechsel).
Although I am vim-lover, when it comes to git merging I use excellent tool called Meld instead of vim. It&amp;rsquo;s a GTK-based application written in Python and it has very nice capabilities of showing diffs. Particularly, I like how Meld shows changes on the same lines (highlighing portions of them), it&amp;rsquo;s editable text pane with source highlighting and ability to visually merge conflicts using arrow icons.</description></item><item><title>Ultra simple DHCP and caching DNS on RHEL6</title><link>http://blog.zapletalovi.com/posts/2012-09-16-ultra-simple-dhcp-and-caching-dns-on-rhel6/</link><pubDate>Sun, 16 Sep 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-09-16-ultra-simple-dhcp-and-caching-dns-on-rhel6/</guid><description>I had to configure DHCP and DNS caching server on a small LAN today, but I needed to change several A DNS entries for specific services that has different IP addresses externally and internally.
It turns out it is not possible to do this easily with BIND. The only way to do this is to create zone with all the setting and zone transfer. It looks like overkill to me.</description></item><item><title>The i3 4.2 tiling win manager</title><link>http://blog.zapletalovi.com/posts/2012-08-28-new-in-fedora-17-i3-42-tiling-wm/</link><pubDate>Tue, 28 Aug 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-08-28-new-in-fedora-17-i3-42-tiling-wm/</guid><description>I was keeping sight on i3 for some time after I saw Michael&amp;rsquo;s presentation at Google the other day. Last weekend, I upgraded my Fedora 17 and when I noticed i3 version 4.2 in the repositories, I gave it a try. First of all, I have to admit I&amp;rsquo;ve fallen in love. Totally.
It&amp;rsquo;s a tiling window manager which is lightweight yet powerful. What I like about i3 is ease of adopting it.</description></item><item><title>Meaningful use of the ThinkPad's ThinkVantage button</title><link>http://blog.zapletalovi.com/posts/2012-08-26-meaningful-use-of-the-thinkpads-thinkvantage-button/</link><pubDate>Sun, 26 Aug 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-08-26-meaningful-use-of-the-thinkpads-thinkvantage-button/</guid><description>I find this button pretty useless and I like That Was easy button. So the use is pretty clear. Download the sample:
wget http://mhwalkers.freevar.com/sounds/that_was_easy.wav -O \ ~/.cache/what_was_easy.wav Load the sample:
pactl upload-sample ~/.cache/that_was_easy.wav that_was_easy This obviously works only for PulseAudio users. Always test before use!
pactl play-sample that_was_easy Now bind this to the ThinkVantage button. In my case (i3 tiling windows manager) it&amp;rsquo;s:
bindsym XF86Launch1 exec /usr/bin/pactl play-sample that_was_easy You can use xbindkeys program if your windows manager cannot handle this:</description></item><item><title>HTML and XHTML built in support in Vim</title><link>http://blog.zapletalovi.com/posts/2012-08-20-html-and-xhtml-built-in-support-in-vim/</link><pubDate>Mon, 20 Aug 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-08-20-html-and-xhtml-built-in-support-in-vim/</guid><description>For some reason, everytime I read something about Vim and (X)HTML support, guys are referring to many weird plugins and extra tools, which is often outdated.
Many folks do not know, that Vim 7+ has decent support for XML/XHTML/HTML languages (no plugins needed!) with possibilities to extend it with any XML-based language you want. What you can do is to use DTD/RNG converters that prepares Vim definition which is used to give you omni completion.</description></item><item><title>Like vi and mc? Try vifm</title><link>http://blog.zapletalovi.com/posts/2012-08-01-like-vi-and-mc-try-vifm/</link><pubDate>Wed, 01 Aug 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-08-01-like-vi-and-mc-try-vifm/</guid><description>I am vim-lover and I sometimes fire off Midnight Commander when I want to browse some content visually. Not spending much time in it, but I find this file commander very cool. Last weekend I bumped into vifm.
Installation in Fedora is pretty straightforward, I like &amp;ldquo;q&amp;rdquo; key alias for running it (and I have remapped this key in vifm to quit - by default it&amp;rsquo;s for macros):
$ yum -y install vifm $ alias q=&amp;quot;vifm&amp;quot; $ rpm -ql vifm /usr/bin/vifm /usr/bin/vifm-pause /usr/bin/vifmrc-converter /usr/share/man/man1/vifm.</description></item><item><title>My Git aliases again</title><link>http://blog.zapletalovi.com/posts/2012-07-30-my-git-aliases-again/</link><pubDate>Mon, 30 Jul 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-07-30-my-git-aliases-again/</guid><description>After more intensive work with git I have defined my own set of aliases that helps me to interact with git every day. Some of them are borrowed from Google, Red Hat folks or others but most of them are my own work. Please note this will only work with Git 1.5+.
This is an updated blog post with some bugs fixed and more commands :-)
# vim: ts=2:et # .</description></item><item><title>Initializing git repo with httpd anon access</title><link>http://blog.zapletalovi.com/posts/2012-07-26-initializing-git-repo-with-httpd-anon-access/</link><pubDate>Thu, 26 Jul 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-07-26-initializing-git-repo-with-httpd-anon-access/</guid><description>Another tutorial how to setup git repository with ssh read-write access and anonymous httpd access. But this time, I want to focus on getting it working on RHEL6 (Fedora should work too). There&amp;rsquo;s one trick I want to record on my blog ;-)
Fist of all, let&amp;rsquo;s configure httpd to serve user directories. My first thought was to create a file in /etc/httpd/conf.d, but this is not working since UserDir option is explicitely turned off.</description></item><item><title>Decibel Audio Player back in Fedora</title><link>http://blog.zapletalovi.com/posts/2012-06-26-decibel-audio-player-back-in-fedora/</link><pubDate>Tue, 26 Jun 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-06-26-decibel-audio-player-back-in-fedora/</guid><description>If they told you your favourite audio player is lightweight, they lied to you. Decibel Audio Player is the one that does the right thing. It can play. You can browse directories. It can shuffle tracks and show album cover. It's written in Python. Did I wrote it can play?
No SQLite, no MySQL, no NoSQL. Although there is a possibility to build a database via simple plug-in, the main workflow are, belive me or not, files and directories.</description></item><item><title>Getting TP-LINK TL-WN722NC work under RHEL6</title><link>http://blog.zapletalovi.com/posts/2012-05-05-getting-tp-link-tl-wn722nc-work-under/</link><pubDate>Sat, 05 May 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-05-05-getting-tp-link-tl-wn722nc-work-under/</guid><description>TP-LINK TL-WN722NC is a wonderful and cheap USB wifi stick which provides stable connection and has extra USB cradle bundled with it (so you can put it on a window or something). I have to admit there are better solutions than USB sticks, but sometimes you need to solve a problem and this ten bucks piece of hardware can do it for ya.
Unfortunately the driver (ath9k_htc) is still in testing, thus not available in default RHEL6 kernels.</description></item><item><title>When github says I cannot merge</title><link>http://blog.zapletalovi.com/posts/2012-04-27-when-github-says-i-cannot-merge/</link><pubDate>Fri, 27 Apr 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-04-27-when-github-says-i-cannot-merge/</guid><description>We are evaluating github for our Katello open-source project. While I like plain git more, I have to say github has pretty convenient merge reviews and it's very fast (Rackspace UK-based datacenters are faster than US-based fedorahosted.org; at least&amp;nbsp;for me).
Anyway, today I hit my very first git conflict during git pull review process. For some time, github shows this very nice Automerge button, but it only works when request can be clearly merged.</description></item><item><title>Android SDK emulator audio on 64bit Fedora 16</title><link>http://blog.zapletalovi.com/posts/2012-04-24-android-sdk-emulator-audio-on-fedora/</link><pubDate>Tue, 24 Apr 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-04-24-android-sdk-emulator-audio-on-fedora/</guid><description>And this is how to get audio working on Android SDK device emulator on Fedora 16+ 64bits. First of all you need 32bit java (OpenJDK works, but take care) and some libs:
# yum install glibc.i686 glibc-devel.i686 libstdc++.i686 zlib-devel.i686 ncurses-devel.i686 libX11-devel.i686 libXrender.i686 libXrandr.i686
Now if you run the emulator with some debug settings, it turns out some 32bit libraries are missing:
# emulator -avd MY_AVD_NAME -debug audio
I have tried various combinations of OSS PulseAudio wrapper (padsp) until I found it works using default setting; ALSA using PulseAudio perhaps.</description></item><item><title>Setup a SystemTap permission change trap</title><link>http://blog.zapletalovi.com/posts/2012-04-17-setup-systemtap-permission-change-trap/</link><pubDate>Tue, 17 Apr 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-04-17-setup-systemtap-permission-change-trap/</guid><description>We were investigating issue today - something - some process - have changed permission of a very important file in one of our Katello testing installations. We only know it happened over the night. The task is to catch the instigator. We can use SystemTap for that. Prepare our environment:
yum -y install systemtap systemtap-runtime kernel-debuginfo-`uname -r` kernel-debuginfo-common-`uname -i`-`uname -r` kernel-devel-`uname -r`
Our target file will be /test:
touch /test</description></item><item><title>Tarball extractor bash script "Dancepill"</title><link>http://blog.zapletalovi.com/posts/2012-04-14-tarball-extractor-bash-script-dancepill/</link><pubDate>Sat, 14 Apr 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-04-14-tarball-extractor-bash-script-dancepill/</guid><description>Dancepill is a fast extract script for Bash.
The problem
You want to extract directory fast. Using midnight commander or other extraction tools is very slow. Use dancepill, in your .bashrc do:
source path/to/your/git/clone/e
Logout or source it in your current terminal and start extracting:
e tarball.tar.gz
e tarball.tar.bzip2
e tarball.xz
e tarball.zip
e whatever
Please note the script introduces function "e"; stands for "extract" ;-)
Additional features
If the archive does not contain only one file or directory, dancepill will create an extra directory for you.</description></item><item><title>How to setup testing virtual network in libvirt</title><link>http://blog.zapletalovi.com/posts/2012-04-05-how-to-setup-testing-virtual-network-in/</link><pubDate>Thu, 05 Apr 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-04-05-how-to-setup-testing-virtual-network-in/</guid><description>From the last week I am working on Katello (systems management software for subscriptions and content) and Foreman (system management software for provisioning and configuration) integration. I need to get everything running on one physical box using libvirt. I had to do three rounds until I finally configured everything correctly (actually doing my third round now). Anyway, let me share one libvirt-related idea that came to my mind today.</description></item><item><title>Set screen power-save dim timeout in Fedora 16+</title><link>http://blog.zapletalovi.com/posts/2012-03-25-set-screen-power-save-dim-timeout-in/</link><pubDate>Sun, 25 Mar 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-03-25-set-screen-power-save-dim-timeout-in/</guid><description>I cannot believe I use Fedora with the default ten seconds screen dimming for almost two years now. When running on battery, this is very annoying. I need to think more than 10 seconds during coding, and this is driving me crazy.
So I found a nice little post about this and sharing. To determine your value just run:
$ gsettings get org.gnome.settings-daemon.plugins.power idle-dim-time
10
To set it to lets say reasonable thirty seconds, just do this:</description></item><item><title>PostgreSQL fails to start on RHEL 6 sometimes</title><link>http://blog.zapletalovi.com/posts/2012-03-06-postgresql-fails-to-start-on-rhel-6/</link><pubDate>Tue, 06 Mar 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-03-06-postgresql-fails-to-start-on-rhel-6/</guid><description>We were having issues with PostgreSQL startup and it was pretty undeterministic. For some reason, PostgreSQL failed to start from time to time:
[root@beta ~]# service postgresql start
Starting postgresql service: &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [ &amp;nbsp;FAIL &amp;nbsp;]
Apparently, when I tried to list processes, it was running. Something wrong is with the sysv init script in RHEL 6 or CentOS 6 (or other clones).</description></item><item><title>Fedora 16 hidden feature - autojump</title><link>http://blog.zapletalovi.com/posts/2012-02-21-fedora-16-hidden-feature-autojump/</link><pubDate>Tue, 21 Feb 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-02-21-fedora-16-hidden-feature-autojump/</guid><description>While I was correcting bad formatting (thank you Google/Blogger) for my previous post about Apple and LLVM vs GCC, I realized I did not write about "new" Fedora 16 feature. Well, it's just a new package. But it rocks!
Autojump is a small utility written in Python which helps you to navigate through your directory structure. It "learns" directories you use the most and allows you to move, or jump if you want, them.</description></item><item><title>The Apple way - LLVM</title><link>http://blog.zapletalovi.com/posts/2012-02-20-apple-way-llvm/</link><pubDate>Mon, 20 Feb 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-02-20-apple-way-llvm/</guid><description>There is a very interesting discussion on the Fedora devel mailing list about LLVM and GCC compilators started with short reaction on Apple's migration to LLVM in their Xcode development environment. The original author asks if llvm is ready to do same for several important linux packages.
Fedora developers were confused with that statement asking what is the point. Matthew Garrett pointed out there are already some packages in Fedora which are being built with LLVM, but there is no plan for whole migration to LLVM.</description></item><item><title>Probing Ruby apps with SystemTap in RHEL 6</title><link>http://blog.zapletalovi.com/posts/2012-01-05-probing-ruby-apps-with-systemtap-in/</link><pubDate>Thu, 05 Jan 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-01-05-probing-ruby-apps-with-systemtap-in/</guid><description>There is one small'n'hidden feature of RHEL 6.2 that popped up recently as an enhancement errata (RHSA-2011-1581). With this update, SystemTap probes have been added to the Ruby package. I was waiting for this feature, because at the time I was reading Aaron Patterson's excelent articleabout Ruby probing, this was not possible in Fedora or Red Hat Enterprise Linux by default. I mean without compilation and installation of DTrace or SystemTap.</description></item><item><title>Setting hostname properly in Fedora and Red Hat</title><link>http://blog.zapletalovi.com/posts/2011-12-07-setting-hostname-properly-in-fedora-and/</link><pubDate>Wed, 07 Dec 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-12-07-setting-hostname-properly-in-fedora-and/</guid><description>I have been playing with hostnames yesterday and I had to stop for a while today doing a little research. Setting up a hostname is not a hard task, in Fedora and Red Hat it's a matter of editing one file:
# grep HOSTNAME /etc/sysconfig/network
HOSTNAME=test.lan
Here you set the whole FQDN. If you ever seen entries like DOMAINNAME in this file, they are wrong for Fedora or RHEL. If you want to change hostname without rebooting few steps are necessary:</description></item><item><title>Setup mirrors properly in Fedora 16</title><link>http://blog.zapletalovi.com/posts/2011-11-24-setup-mirrors-properly-in-fedora-16/</link><pubDate>Thu, 24 Nov 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-11-24-setup-mirrors-properly-in-fedora-16/</guid><description>Fedora 16 (and older versions) comes already preconfigured so yum downloads packages from nearest mirror. That is cool, but once you are using proxy for speeding up you will be always re-downloading packages again, because mirrors are picked up in a random order.
If you uncomment the baseurl and comment out mirrorlist in the repositories, the situation is the same. The main download site does not provide RPM packages directly, but redirect to mirrors only based on geo location.</description></item><item><title>How to install Lingea Lexicon 5 in Fedora 16</title><link>http://blog.zapletalovi.com/posts/2011-11-23-how-to-install-lingea-lexicon-5-in/</link><pubDate>Wed, 23 Nov 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-11-23-how-to-install-lingea-lexicon-5-in/</guid><description>Lingea Lexicon is the best dictionary out there. And not only for linux. It has very fast fuzzy search, decent interface and high-quality corpus for many languages. Where other dictionaries fail, this one is returning correct answers. I am happy user of English and German big dictionaries, but unfortunately I was not able to install it into my new 64bit Fedora 16.
Not sure what is wrong with their LD_LIBRARY_PATH setting (they distribute all required libraries along with the program), but this did the job for me:</description></item><item><title>Start using Ruby RVM on RHEL 6</title><link>http://blog.zapletalovi.com/posts/2011-11-12-start-using-ruby-rvm-on-rhel-6/</link><pubDate>Sat, 12 Nov 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-11-12-start-using-ruby-rvm-on-rhel-6/</guid><description>Rubyists know RVM very well, I tried it several times. This time I am doing on RHEL 6. The installation instructions from the RVM site differs slightly when applied on a RHEL box, so here is my tutorial. I extended the process a bit with some tunings. As you will see I will create a dedicated user (running it on a server box) and configure everything slightly. Let's go.</description></item><item><title>How did I tune my Verne</title><link>http://blog.zapletalovi.com/posts/2011-11-10-how-did-i-tune-my-verne/</link><pubDate>Thu, 10 Nov 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-11-10-how-did-i-tune-my-verne/</guid><description>So I am basically done with tuning my new installtion of Fedora 16 Verne. Let me summarize this a little bit over here now.
Gnome Shell Extensions
Before I can start I have to bind F1-F4 keys to swtiching workspaces one to four. It's pretty easy to do it in the Gnome 3 keyboard settings, but the thing is you can only bind numbers 2, 3 and 4 when they exist.</description></item><item><title>New postgresql-setup command in Fedora 16</title><link>http://blog.zapletalovi.com/posts/2011-11-05-new-postgresql-setup-command-in-fedora/</link><pubDate>Sat, 05 Nov 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-11-05-new-postgresql-setup-command-in-fedora/</guid><description>Faced this error in Fedora 16?
#&amp;nbsp;service postgresql start
Redirecting to /bin/systemctl &amp;nbsp;start postgresql.service
Job failed. See system logs and 'systemctl status' for details.
If you work with PostgreSQL and execute service postgresql initdb, it wont work. Simply because the startup scripts for PostgreSQL and MySQL were ported to systemd. There is a brand new command called postgresql-setup for that. Initialization is as easy as:
# sudo postgresql-setup initdb</description></item><item><title>How to easily mount ISO files for Apache</title><link>http://blog.zapletalovi.com/posts/2011-10-25-how-to-easily-mount-iso-files-for/</link><pubDate>Tue, 25 Oct 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-10-25-how-to-easily-mount-iso-files-for/</guid><description>I play with yum repositories and ISO files very often, therefore it is vital to have such files and directories avaiable via local Apache httpd. I had this idea of mounting ISO files into directories and using these as yum repositories. I leveraged fuseiso program, but there's a trick.
Fuseiso works per-user by default and few steps need to be done to publish those directories under different (apache) user. The solution is to use allow_other FUSE option:</description></item><item><title>Help us testing Fedora 16</title><link>http://blog.zapletalovi.com/posts/2011-10-05-help-us-testing-fedora-16/</link><pubDate>Wed, 05 Oct 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-10-05-help-us-testing-fedora-16/</guid><description>Fedora 16 Beta is out and you can help us with testing. Download installation media, live CD or custom spins and report all issues to our Bugzilla. One tiny bugzilla can change much!</description></item><item><title>Configure Red Hat or Fedora as a guest template</title><link>http://blog.zapletalovi.com/posts/2011-08-30-configure-red-hat-or-fedora-as-guest/</link><pubDate>Tue, 30 Aug 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-08-30-configure-red-hat-or-fedora-as-guest/</guid><description>I have several tips how to configure Red Hat Enterprise Linux or Fedora as a guest template. That it an image used for fast provisioning of systems. My tips works with RHEL virtualization, RHEV hypervisor or any other virtualization technologies.
Tip: Do not monitor virtual discs.
Stop and disable disc SMART monitoring. Since discs are virtual, there is no need of monitoring them for hardware failures. Use smartd daemon on the host, but not guests.</description></item><item><title>Copy-on-write with KVM</title><link>http://blog.zapletalovi.com/posts/2011-08-28-copy-on-write-with-kvm/</link><pubDate>Sun, 28 Aug 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-08-28-copy-on-write-with-kvm/</guid><description>While KVM/QEMU snapshoting is still a dirty feature (quite slow), I love copy-on-write disc image format of the QEMU. It is actually the best way how to quiclky provision pre-installed systems for testing and development. The idea is easy:
Install a base operating system, configure it for your specific purposes.Stop it. You wont use it anymore, only copy-on-write "children". You may start it to do some additional configuration when you forgot something for example.</description></item><item><title>How to set timezone from shell quickly</title><link>http://blog.zapletalovi.com/posts/2011-08-25-how-to-set-timezone-from-shell-quickly/</link><pubDate>Thu, 25 Aug 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-08-25-how-to-set-timezone-from-shell-quickly/</guid><description>The easiest trick is to override /etc/localtime:
# ln -sf /usr/share/zoneinfo/Europe/Prague /etc/localtime
According to the BIOS clocks and BIOS-UTC setting of the OS it is usually good idea to correct time:
# date +%T -s "22:30"
It's also quite good idea to start NTP daemon:
# service ntpd restart
# chkconfig ntpd on
For Fedora/RHEL systems you should also update sysconfig file to make this permanent:
# echo 'ZONE="Europe/Prague"' > /etc/sysconfig/clock</description></item><item><title>Elluminate, OpenJDK and PulseAudio</title><link>http://blog.zapletalovi.com/posts/2011-08-01-elluminate-openjdk-and-pulseaudio/</link><pubDate>Mon, 01 Aug 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-08-01-elluminate-openjdk-and-pulseaudio/</guid><description>I was constantly having sound issues with Elluminate after my upgrade to Fedora 15. The audio had recurring silent pauses about one second long. It was driving me crazy when I was watching recorded sessions (for on-line ones we are using tele-bridge).
Today I **saw red**. I was suspecting network, but after a quick audio test (Tools - Audio - Setup Wizard) it turned out its rather java audio issue.</description></item><item><title>My yum aliases</title><link>http://blog.zapletalovi.com/posts/2011-06-03-my-yum-aliases/</link><pubDate>Fri, 03 Jun 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-06-03-my-yum-aliases/</guid><description>I am using yum a lot. Everyday. Typing sudo yum -y is boring. Now, guess what.
$ alias | grep yum
alias ycu='sudo yum check-update'
alias yi='sudo yum install'
alias yli='sudo yum localinstall --nogpgcheck'
alias ypr='sudo yum provides'
alias yprw='sudo yum provides $(which $1)'
alias yr='sudo yum remove'
alias ys='sudo yum search'
alias yu='sudo yum update'
alias yut='sudo yum --enablerepo=updates-testing update'
alias yyi='sudo yum -y install'
alias yyr='sudo yum -y remove'</description></item><item><title>Issues with tint2 in Fedora 15</title><link>http://blog.zapletalovi.com/posts/2011-06-01-issues-with-tint2-in-fedora-15/</link><pubDate>Wed, 01 Jun 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-06-01-issues-with-tint2-in-fedora-15/</guid><description>Having issues with tint2 using the new kernel from Fedora 15? It's the same one from Debian.
$ tint2
real transparency off.... depth: 24
xRandr: Found crtc's: 2
xRandr: Linking output LVDS1 with crtc 0
warning : monitor not found. tint2 default to all monitors.
ERROR: battery applet can't open energy_now
Segmentation fault (core dumped)
I reported and fixed the issue for Fedora rawhide and 15. I also asked package maintainer Germán Racca to push it into the updates.</description></item><item><title>Instalace NVidia ovladačů ve Fedoře</title><link>http://blog.zapletalovi.com/posts/2011-05-03-instalace-nvidia-ovladacu-ve-fedore/</link><pubDate>Tue, 03 May 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-05-03-instalace-nvidia-ovladacu-ve-fedore/</guid><description>Po upgradu na novou grafickou kartu u svého domácího PC jsem si musel najít návod na správnou instalaci ovladačů. Neseděly mi totiž verze jaderného modulu a ovladače samotného. Pokud instalujete NVidia ovladače, doporučuji si přečíst zmíněný link a k tomu ještě přidávám jedno.
a) Odstraňte staré verze ovladačů: sudo yum remove kmod-nvidia-* xorg-x11-drv-nvidia-*
b) Zjistěte si minimální verzi ovladače, kterou můžete použít. Zejména novější karty jsou v Linuxu podporovány až o pár měsíců později.</description></item><item><title>Fedora 15 branch freeze</title><link>http://blog.zapletalovi.com/posts/2011-02-07-fedora-15-branch-freeze/</link><pubDate>Mon, 07 Feb 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-02-07-fedora-15-branch-freeze/</guid><description>Packages for Fedora 15 are emerging tomorrow. There's Branch Freeze event showing the "face" of the next Fedora version.
At the Branch Freeze event, all packages are branched from master in source control. This is to allow the branched tree to stabilize and enter a bug-fix and polish phase of development. Builds from the branch that are deemed stable will be published into their own repo on the mirrors beside rawhide.</description></item><item><title>How to prepare a gemfile package for Fedora</title><link>http://blog.zapletalovi.com/posts/2011-01-31-how-to-prepare-gemfile-package-for/</link><pubDate>Mon, 31 Jan 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-01-31-how-to-prepare-gemfile-package-for/</guid><description>It's a piece of cake to create a gemfile RPM package using the gem2rpm tool, but Fedora Package Guidelines for Ruby compliance is not that straightforward. Let me explain basic issues a packager will be facing to.
The fist part is a duck soup. Really. Set the gem2rpm against downloaded gem file. Most likely you'll need to redirect it's standard output to a file. That's your starting point spec file.</description></item><item><title>Nejrychlejší rozbalovač lbzip2 ve Fedoře</title><link>http://blog.zapletalovi.com/posts/2010-12-21-nejrychlejsi-rozbalovac-lbzip2-ve/</link><pubDate>Tue, 21 Dec 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-12-21-nejrychlejsi-rozbalovac-lbzip2-ve/</guid><description>V aktualizacích Fedory 14 přistály další dva balíčky, které jsem vytvořil. Kromě zvukového javového API tritonus, který není příliš zajímavý, to byla aplikace lbzip2. Jedná se o implementaci programů bzip2 a bunzip2 optimalozovanou pro vícejaderné stroje, kterou napsal kolega z brněnského Red Hatu Laszlo Ersek. Program lbzip2 je patrně nejrychlejší rozbalovač bzip2 tarballů na světě. A ani v kompresi příliš nezaostává za konkurencí a drží se na předních místech.</description></item><item><title>Druhý balík ve Fedoře</title><link>http://blog.zapletalovi.com/posts/2010-12-03-druhy-balik-ve-fedore/</link><pubDate>Fri, 03 Dec 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-12-03-druhy-balik-ve-fedore/</guid><description>Do aktualizací Fedory 14 dorazil druhý můj balík - loook. Jedná se o velmi jednoduchý prográmek v Pythonu s uživatelským rozhraním v Tk, který je v podstatě jednoduchým vyhledávačem (grepem) pro OpenOffice.org soubory. Používat se dá z příkazové řádky i pomocí GUI.
Takže pokud vám pojem jako sémantický desktop nic neříká a přesto občas hledáte nějaký text v hromadě OOo dokumentů, možná je utilita právě pro vás.</description></item><item><title>Změna pozadí v GDM</title><link>http://blog.zapletalovi.com/posts/2010-11-28-zmena-pozadi-v-gdm/</link><pubDate>Sun, 28 Nov 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-11-28-zmena-pozadi-v-gdm/</guid><description>Změna pozadí plochy u GDM (Gnome Display Manager - úvodní přihlašovací obrazovka) není tak snadná, jak se zprvu zdálo. Nejprve jsem musel lokalizovat v gconf-editoru klíč /desktop/gnome/background/picture_filename, který obsahuje v mém případě (Fedora 14) hodnotu /usr/share/gnome-background-properties/desktop-backgrounds-laughlin.xml. Tento soubor jsem si odkopíroval, zeditoval (obsahuje tři odkazy na PNG soubory různých velikostí a poměrů stran) a hodnotu v gconf-editoru změnil.</description></item><item><title>Stal jsem se Fedora Package Maintainerem</title><link>http://blog.zapletalovi.com/posts/2010-11-25-stal-jsem-se-fedora-package/</link><pubDate>Thu, 25 Nov 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-11-25-stal-jsem-se-fedora-package/</guid><description>Ještě před několika týdny jsem hledal Fedora Package Sponsora. Je to již asi čtrnáct dní, co se mě ujal sponzor Hans de Goede a první výsledek naší společné práce již dorazil do aktualizací Fedory 14.
Dnes v noci byl zveřejněn můj zcela nový balíček Docky. Uživatelé Fedory 14 jej mohou ihned nainstalovat a používat. Na cestě jsou další dva balíčky.
Rád bych tímto poděkoval Hansovi za jeho ochotu a značnou trpělivost.</description></item><item><title>Přepínání ploch pomocí F1, F2, F3, F4</title><link>http://blog.zapletalovi.com/posts/2010-11-23-prepinani-ploch-pomoci-f1-f2-f3-f4/</link><pubDate>Tue, 23 Nov 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-11-23-prepinani-ploch-pomoci-f1-f2-f3-f4/</guid><description>Moje pracovní prostředí OpenBox a program Docky mě začaly trošku zlobit po upgradu Fedory na verzi 14, konkrétně kompozitní manažer tu a tam zanechal na obrazovce (až do restartu X Window) nějaký ten artefakt. Jelikož je v této verzi zbrusu nová verze Xfce4, zkusil jsem ji. A byl jsem nadšen. Projekt se zase posunul o míle kupředu, a já jsem se rozhodl toto prostředí otestovat.
Když jsem posledně psal o programu Terminator, který usnadňuje práci s mnoha terminály (split-screen terminals), ještě jsem netušil, že jich budu potřebovat tolik.</description></item><item><title>Instalace digiKamu ve Fedoře (Gnome)</title><link>http://blog.zapletalovi.com/posts/2010-11-21-instalace-digikamu-ve-fedore-gnome/</link><pubDate>Sun, 21 Nov 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-11-21-instalace-digikamu-ve-fedore-gnome/</guid><description>Dneska testuji digiKam 1.5.0 ve Fedoře 14. Tento program opravdu vyzrál a má mnoho funkcí. Ale hlavně první testy ukazují, že je i velmi rychlý. Moji velkou databázi fotek naindexoval dokonce dříve, než Bibble 5.1, který o sobě tvrdí, jak je rychlý. Fotky se načítají bleskově, a přitom má digiKam databázi náhledů jen nějakých 300 MB (z celkové velikosti necelých 60 GB fotek).
Při instalaci jsem ale narazil na problém.</description></item><item><title>Aktivace mazání souborů v Gnome</title><link>http://blog.zapletalovi.com/posts/2010-11-20-aktivace-mazani-souboru-v-gnome/</link><pubDate>Sat, 20 Nov 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-11-20-aktivace-mazani-souboru-v-gnome/</guid><description>Standardní instalace pracovního prostředí Gnome neumožňuje uživateli přímo mazat soubory. V kontektové nabídce souboru v programu Nautilus je pouze volba Move To Trash (Přesunout do koše). Pokud byste tam snad chtěli mít také položku Delete (Smazat), stačí provést následující příkaz:
$ gconftool-2 -t bool -s /apps/nautilus/preferences/enable_delete true
Hotovo, položka je dostupná ihned.</description></item><item><title>Sdílení sudo hesla mezi terminály</title><link>http://blog.zapletalovi.com/posts/2010-11-15-sdileni-sudo-hesla-mezi-terminaly/</link><pubDate>Mon, 15 Nov 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-11-15-sdileni-sudo-hesla-mezi-terminaly/</guid><description>Nedávno jsem psal o tom, jak sdílet historii mezi terminály. Velmi úspěšný příspěvek, mimochodem ;-) Dneska se podíváme na sudo - výborný nástroj na který jsem si zvykl při používání Ubuntu. Delegování práv je někdy velmi výhodné, avšak opisovat stále dokola heslo je nepříjemné. Jako root tedy můžete upravit soubor /etc/sudoers příkazem visudo a vložit:
Defaults timestamp_timeout = -1
Od tohoto okamžiku stačí zadat heslo jen jednou a na daném terminálu již můžete vesele používat sudo příkazy bez obtěžování.</description></item><item><title>Jak blokovat určitý program od internetu</title><link>http://blog.zapletalovi.com/posts/2010-11-04-jak-blokovat-urcity-program-od/</link><pubDate>Thu, 04 Nov 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-11-04-jak-blokovat-urcity-program-od/</guid><description>Blokovat jeden program od internetu je v Linuxu snadné. Ostatně jako všechno. Následující trik spočívá ve vytvoření speciální skupiny "noinet", zřízení pravidla v linuxovém firewallu na tuto skupinu a spouštění programů, které chceme blokovat, pod touto skupinou.
Následující příklad by měl fungovat ve většině distribucí. Testováno na Fedoře.
groupadd noinetsudo usermod -a -G noinet lzapsudo iptables -A OUTPUT -m owner --gid-owner noinet -j DROPsudo service iptables savesg noinet firefoxCož znamená:vytvoříme skupinu noinetpřidáme se do nínastavíme firewall tak, aby odřízl od internetu všechny programy běžící s touto skupinouuložíme nastavení iptables na diskspuštění programu "</description></item><item><title>Miniaturní webový server</title><link>http://blog.zapletalovi.com/posts/2010-10-07-miniaturni-webovy-server/</link><pubDate>Thu, 07 Oct 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-10-07-miniaturni-webovy-server/</guid><description>Jelikož ladím nějaké věci ohledně kickstartů na Fedoře a RHELu (kickstart = instalace bez interakce uživatele), potřeboval jsem nějaký jednoduchý HTTP servřík. Nejlépe úplně malinkatý. Ačkoliv existuje plno různých skriptů (www server v Pythonu, Perlu, Bashi, Tcl), zvolil jsem prográmek mongoose.
Jedná se o miniaturní web server (RPM balíček má 30 kB a obsahem je jen binárka a manuálová stránka). Stačí se postavit do adresáře, který je třeba na chvíli vystavit přes http protokol, a program spustit.</description></item><item><title>Síť v minimal instalaci Fedory 13</title><link>http://blog.zapletalovi.com/posts/2010-10-01-sit-v-minimal-instalaci-fedory-13/</link><pubDate>Fri, 01 Oct 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-10-01-sit-v-minimal-instalaci-fedory-13/</guid><description>Překvapilo mě (celkem logické) chování instalačního programu Anaconda ve Fedoře 13 (a zřejmě i jiných verzích) v podobě nenastavování sítě u minimální instalace. Týká se to pouze "klasické" instalace (tedy ne LiveCD). Síť je třeba po instalaci nahodit. Třeba takto:
# ifup eth0
# yum install system-config-network-tui
# system-config-network
V posledním příkazu je schováno nastavení sítě pomocí grafického rozhraní. Typicky stačí jen potvrdit (Save and Quit). Případně to můžete provést ručně stručně.</description></item><item><title>Sháním Fedora sponzora</title><link>http://blog.zapletalovi.com/posts/2010-09-19-shanim-fedora-sponzora/</link><pubDate>Sun, 19 Sep 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-09-19-shanim-fedora-sponzora/</guid><description>O víkendu jsem se rozhodl, že se poprvé pokusím protlačit dva balíky do Fedory. Prozatím jsem přispíval pouze do distribuce Gentoo a vytvářel nějaká ta Ubuntu "pé pé emka". Jelikož jsem však díky Mirkovi Suchému (a jeho přednášce minulý týden) dostal chuť na balení (a další pokračování v něm), zvolil jsem aplikaci, kterou denně používám.
Jedná se o vynikající MacOS-like dok s názvem Docky. Tato aplikace dělá přesně to, co potřebuju.</description></item><item><title>Pozvánka na FUDCon 2010 v Zurichu</title><link>http://blog.zapletalovi.com/posts/2010-09-17-pozvanka-na-fudcon-2010-v-zurichu/</link><pubDate>Fri, 17 Sep 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-09-17-pozvanka-na-fudcon-2010-v-zurichu/</guid><description>Tento víkend se v Zurichu koná Fedora Users and Developers Conference. Dnes (v pátek) ve 14:00 bude mít přednášku Mirek Suchý z našeho týmu na téma Going Open Source. Mirek se bude snažit srhnout nashromážděné zkušenosti z produktu Red Hat Network (RHN Satellite). V roce 2008 se společnost Red Hat rozhodla pro open-sourcování projektu pod názvem Spacewalk a v přednášce padne mnoho zajímavých témat ohledně spolupráce s komunitou a každodenní dřině, kterou práce na open source projektu představuje.</description></item><item><title>Aliasy na yum</title><link>http://blog.zapletalovi.com/posts/2010-08-28-aliasy-na-yum/</link><pubDate>Sat, 28 Aug 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-08-28-aliasy-na-yum/</guid><description>Nadefinoval jsem si dnes pár aliasů týkajících se práce s balíčky ve Fedoře. Podobně jako v Ubuntu mám aliasy agi nebo agu, ve Fedoře je to (dejte na konec souboru .bashrc):
alias ycu="sudo yum check-update"
alias ys="sudo yum search"
alias yys="sudo yum -C search"
alias yi="sudo yum install"
alias yyi="sudo yum -y install"
alias yyyi="sudo yum -Cy install"
alias yu="sudo yum update"
alias yyu="sudo yum -y update"
alias yr="sudo yum remove"</description></item><item><title>Jak vypnout SELinux</title><link>http://blog.zapletalovi.com/posts/2010-08-27-jak-vypnout-selinux/</link><pubDate>Fri, 27 Aug 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-08-27-jak-vypnout-selinux/</guid><description>V systémech Fedora a Red Hat bývá SELinux implicitně zapnut a pokud jej nevyhodíte už při instalaci, budete jej v systému mít. Někdy může být značně otravný, jindy neaktuální pravidla mohou snížit stabilitu některých programů. Můžete jej buď úplně vypnout (disabled), nebo jej ponechat zapnutý v režimu "monitorování". Programům, které dělají podezřelé věci, SELinux umožní akci, ale uživatele upozorní (permissive).
A jak že takové vypnutí (nebo zmírnění) SELinuxu "naklikat"? Snadno.</description></item><item><title>Mark Shuttleworth v blogové přestřelce</title><link>http://blog.zapletalovi.com/posts/2010-08-02-mark-shuttleworth-v-blogove-prestrelce/</link><pubDate>Mon, 02 Aug 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-08-02-mark-shuttleworth-v-blogove-prestrelce/</guid><description>Možná si vzpomenete na nedávno zveřejněnou statistiku přispěvovatelů do projektu Gnome. Z tohoto dokumentu kromě jiného vyplynulo, že vývojáři společnosti Red Hat přispívají o mnoho více, než vývojáři společnosti Canonical, která stojí za Ubuntu. A to v poměru šestnáct ku jedné.
Toho využil Greg DeKoenigsberg (bývalý zaměstnanec Red Hatu) k tomu, aby na svém blogu atakoval Marka Shuttleworha z Canonicalu, který předtím v jednom z komentářů pod svým blogem označil Red Hat jako příliš uzavřenou společnost.</description></item></channel></rss>