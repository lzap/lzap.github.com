<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>rhel on Lukáš Zapletal</title><link>http://blog.zapletalovi.com/tags/rhel/</link><description>Recent content in rhel on Lukáš Zapletal</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Wed, 31 Mar 2021 00:00:00 +0000</lastBuildDate><atom:link href="http://blog.zapletalovi.com/tags/rhel/index.xml" rel="self" type="application/rss+xml"/><item><title>Enable serial console for libvirt</title><link>http://blog.zapletalovi.com/posts/2021-03-31-enable-serial-console-in-libvirt/</link><pubDate>Wed, 31 Mar 2021 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2021-03-31-enable-serial-console-in-libvirt/</guid><description>QEMU/KVM libvirt virtual machine can be acessed via serial console. When a new VM is created, serial console device is created. However to fully utilize this, several steps are needed on the guest machine.
The first option is to start getty service on serial console to get a login prompt when system finishes booting. This is as easy as:
# systemctl enable --now serial-getty@ttyS0.service To access serial console via libvirt command line do:</description></item><item><title>Different yum behavior in RHEL7 and 8</title><link>http://blog.zapletalovi.com/posts/2019-06-04-different-yum-behavior-in-rhel7-and-8/</link><pubDate>Tue, 04 Jun 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-06-04-different-yum-behavior-in-rhel7-and-8/</guid><description>Beware, there is a change in behaviour in yum. Example
# yum -y install vim blahblah On RHEL7 it
installs vim, informs about non-existing package blahblah, error code is 0. On RHEL8 it
errors out about non-existing package blahblah, vim is not installed, error code is 1. This is an intentional change. As much as I hate it, I understand that it was the perfect time to do it :-)</description></item><item><title>How to report a SELinux bug</title><link>http://blog.zapletalovi.com/posts/2019-06-04-how-to-report-a-selinux-bug/</link><pubDate>Tue, 04 Jun 2019 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2019-06-04-how-to-report-a-selinux-bug/</guid><description>A friendly reminder how to report a SELinux bug. First off, find that there actually is a denial:
# ausearch -m AVC If there is, let&amp;rsquo;s create a good report. First, install additional tools. On EL7 do:
# yum -y install setools-console policycoreutils-python policycoreutils selinux-policy-devel On EL8 one package was renamed:
# yum -y install setools-console policycoreutils-devel policycoreutils selinux-policy-devel Now, generate interfaces for audit2allow:
# sepolgen-ifgen As the next step I actually recommend to turn off enforcing mode although it can sometimes generate lots of unrelated noise (if domains are not right).</description></item><item><title>Delivering cron and logwatch emails to gmail in RHEL</title><link>http://blog.zapletalovi.com/posts/2018-09-19-delivering-cron-emails-to-gmail-in-rhel/</link><pubDate>Wed, 19 Sep 2018 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2018-09-19-delivering-cron-emails-to-gmail-in-rhel/</guid><description>One of my servers has no real DNS name, there is no MX record and I can hardly confiture postfix for e-mail delivery. While relaying e-mails to another SMTP server is an option, it&amp;rsquo;s actually not needed to configure MTA in order to get emails delivered from cron and logwatch. One can use MUA called mailx to do the job.
The goal is to avoid more complex configuration of postfix or (jeeeez) sendmail, so this is an alternative approach.</description></item><item><title>Accessing libvirt VMs via telnet</title><link>http://blog.zapletalovi.com/posts/2018-02-20-accessing-libvirt-vms-via-telnet/</link><pubDate>Tue, 20 Feb 2018 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2018-02-20-accessing-libvirt-vms-via-telnet/</guid><description>There are many &amp;ldquo;tricks&amp;rdquo; floating around how to connect to VM when you have a networking issue and ssh is not available. The idea is to use serial console to get shell access. Here is how to do this properly with RHEL7 host and guest.
First, create a VM with serial console configured with remote TCP server. There are multiple options, I find TCP server in &amp;rsquo;telnet&amp;rsquo; mode the most flexible configuration because most scripting languages has the protocol built-in.</description></item><item><title>Hidden gem of Fedora: virt-builder</title><link>http://blog.zapletalovi.com/posts/2018-02-06-hidden-gem-of-fedora-virt-builder/</link><pubDate>Tue, 06 Feb 2018 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2018-02-06-hidden-gem-of-fedora-virt-builder/</guid><description>Or I should say hidden gem of Fedora, CentOS and RHEL. This fantastic tool is part of package named libguestfs-tools-c and it&amp;rsquo;s fast image builder. To create Fedora 27 10GB image with root password set to &amp;ldquo;redhat&amp;rdquo;:
virt-builder fedora-27 --size=10G \ --root-password password:redhat To start the image use libvirt utility:
virt-install --import --name fedora --ram 2048 \ --disk path=fedora-27.img,format=raw --os-variant fedora27 To start Fedora 25 and immediately install Xfce desktop:</description></item><item><title>CentOS and security updates</title><link>http://blog.zapletalovi.com/posts/2017-08-01-centos-and-security-updates/</link><pubDate>Tue, 01 Aug 2017 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2017-08-01-centos-and-security-updates/</guid><description>I often see articles, blog posts or even video tutorials on how to apply security-only errata in CentOS environments or set a cron job to do this regularly. While it can be very useful to keep components on a specific version and only updating those which has security fixes, it has one drawback.
It does not work in CentOS.
The thing is that yum-plugin-security plugin which is available in CentOS installs just fine and operates properly returning no security updates when people test this.</description></item><item><title>Image based deployment via dd and nbd</title><link>http://blog.zapletalovi.com/posts/2015-11-20-image-based-deployment-via-dd-and-nbd/</link><pubDate>Fri, 20 Nov 2015 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2015-11-20-image-based-deployment-via-dd-and-nbd/</guid><description>My train to Pilsen had about 300+ people onboard and apparently super-modern ultra-fast WiFi technology can&amp;rsquo;t handle that many people. At least when administrator sets C class IPv4 network. People have cell phones, tablets and laptops. It&amp;rsquo;s no surprise that the DHCP server ran out of resources since I see like 500+ devices around.
Hey, Leo Express, I am looking at you!
Luckily, not being able to connect to the internet I started hacking discovery image.</description></item><item><title>Initializing git repo with httpd anon access</title><link>http://blog.zapletalovi.com/posts/2012-07-26-initializing-git-repo-with-httpd-anon-access/</link><pubDate>Thu, 26 Jul 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-07-26-initializing-git-repo-with-httpd-anon-access/</guid><description>Another tutorial how to setup git repository with ssh read-write access and anonymous httpd access. But this time, I want to focus on getting it working on RHEL6 (Fedora should work too). There&amp;rsquo;s one trick I want to record on my blog ;-)
Fist of all, let&amp;rsquo;s configure httpd to serve user directories. My first thought was to create a file in /etc/httpd/conf.d, but this is not working since UserDir option is explicitely turned off.</description></item><item><title>Setup a SystemTap permission change trap</title><link>http://blog.zapletalovi.com/posts/2012-04-17-setup-systemtap-permission-change-trap/</link><pubDate>Tue, 17 Apr 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-04-17-setup-systemtap-permission-change-trap/</guid><description>We were investigating issue today - something - some process - have changed permission of a very important file in one of our Katello testing installations. We only know it happened over the night. The task is to catch the instigator. We can use SystemTap for that. Prepare our environment:
yum -y install systemtap systemtap-runtime kernel-debuginfo-`uname -r` kernel-debuginfo-common-`uname -i`-`uname -r` kernel-devel-`uname -r`
Our target file will be /test:
touch /test</description></item><item><title>How to setup testing virtual network in libvirt</title><link>http://blog.zapletalovi.com/posts/2012-04-05-how-to-setup-testing-virtual-network-in/</link><pubDate>Thu, 05 Apr 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-04-05-how-to-setup-testing-virtual-network-in/</guid><description>From the last week I am working on Katello (systems management software for subscriptions and content) and Foreman (system management software for provisioning and configuration) integration. I need to get everything running on one physical box using libvirt. I had to do three rounds until I finally configured everything correctly (actually doing my third round now). Anyway, let me share one libvirt-related idea that came to my mind today.</description></item><item><title>PostgreSQL fails to start on RHEL 6 sometimes</title><link>http://blog.zapletalovi.com/posts/2012-03-06-postgresql-fails-to-start-on-rhel-6/</link><pubDate>Tue, 06 Mar 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-03-06-postgresql-fails-to-start-on-rhel-6/</guid><description>We were having issues with PostgreSQL startup and it was pretty undeterministic. For some reason, PostgreSQL failed to start from time to time:
[root@beta ~]# service postgresql start
Starting postgresql service: &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [ &amp;nbsp;FAIL &amp;nbsp;]
Apparently, when I tried to list processes, it was running. Something wrong is with the sysv init script in RHEL 6 or CentOS 6 (or other clones).</description></item><item><title>Probing Ruby apps with SystemTap in RHEL 6</title><link>http://blog.zapletalovi.com/posts/2012-01-05-probing-ruby-apps-with-systemtap-in/</link><pubDate>Thu, 05 Jan 2012 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2012-01-05-probing-ruby-apps-with-systemtap-in/</guid><description>There is one small'n'hidden feature of RHEL 6.2 that popped up recently as an enhancement errata (RHSA-2011-1581). With this update, SystemTap probes have been added to the Ruby package. I was waiting for this feature, because at the time I was reading Aaron Patterson's excelent articleabout Ruby probing, this was not possible in Fedora or Red Hat Enterprise Linux by default. I mean without compilation and installation of DTrace or SystemTap.</description></item><item><title>Setting hostname properly in Fedora and Red Hat</title><link>http://blog.zapletalovi.com/posts/2011-12-07-setting-hostname-properly-in-fedora-and/</link><pubDate>Wed, 07 Dec 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-12-07-setting-hostname-properly-in-fedora-and/</guid><description>I have been playing with hostnames yesterday and I had to stop for a while today doing a little research. Setting up a hostname is not a hard task, in Fedora and Red Hat it's a matter of editing one file:
# grep HOSTNAME /etc/sysconfig/network
HOSTNAME=test.lan
Here you set the whole FQDN. If you ever seen entries like DOMAINNAME in this file, they are wrong for Fedora or RHEL. If you want to change hostname without rebooting few steps are necessary:</description></item><item><title>Start using Ruby RVM on RHEL 6</title><link>http://blog.zapletalovi.com/posts/2011-11-12-start-using-ruby-rvm-on-rhel-6/</link><pubDate>Sat, 12 Nov 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-11-12-start-using-ruby-rvm-on-rhel-6/</guid><description>Rubyists know RVM very well, I tried it several times. This time I am doing on RHEL 6. The installation instructions from the RVM site differs slightly when applied on a RHEL box, so here is my tutorial. I extended the process a bit with some tunings. As you will see I will create a dedicated user (running it on a server box) and configure everything slightly. Let's go.</description></item><item><title>Configure Red Hat or Fedora as a guest template</title><link>http://blog.zapletalovi.com/posts/2011-08-30-configure-red-hat-or-fedora-as-guest/</link><pubDate>Tue, 30 Aug 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-08-30-configure-red-hat-or-fedora-as-guest/</guid><description>I have several tips how to configure Red Hat Enterprise Linux or Fedora as a guest template. That it an image used for fast provisioning of systems. My tips works with RHEL virtualization, RHEV hypervisor or any other virtualization technologies.
Tip: Do not monitor virtual discs.
Stop and disable disc SMART monitoring. Since discs are virtual, there is no need of monitoring them for hardware failures. Use smartd daemon on the host, but not guests.</description></item><item><title>Copy-on-write with KVM</title><link>http://blog.zapletalovi.com/posts/2011-08-28-copy-on-write-with-kvm/</link><pubDate>Sun, 28 Aug 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-08-28-copy-on-write-with-kvm/</guid><description>While KVM/QEMU snapshoting is still a dirty feature (quite slow), I love copy-on-write disc image format of the QEMU. It is actually the best way how to quiclky provision pre-installed systems for testing and development. The idea is easy:
Install a base operating system, configure it for your specific purposes.Stop it. You wont use it anymore, only copy-on-write "children". You may start it to do some additional configuration when you forgot something for example.</description></item><item><title>Connect to your ssh boxes faster</title><link>http://blog.zapletalovi.com/posts/2011-05-28-connect-to-your-ssh-boxes-faster/</link><pubDate>Sat, 28 May 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-05-28-connect-to-your-ssh-boxes-faster/</guid><description>If you want ultra-fast connection login times to your ssh servers you may like to change several values in the /etc/ssh/sshd_config file along with RSA authentication:
GSSAPIAuthentication no
UseDNS no
You can use this only if you don't need GSS or reverse DNS of course. No more delays. Every milisecond counts!</description></item><item><title>RHEL 6.1 is out</title><link>http://blog.zapletalovi.com/posts/2011-05-19-rhel-61-is-out/</link><pubDate>Thu, 19 May 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-05-19-rhel-61-is-out/</guid><description>On May 19th, Red Hat released the first service pack since the release of Red Hat Enterprise Linux 6. As with every service pack, Red Hat Enterprise Linux 6.1 consolidates all patches and security updates since the introduction of Red Hat Enterprise Linux 6, while maintaining application compatibility, ISV and IHV support.
More info.</description></item><item><title>Ondemand governor cannot work on Intel Atom D4x0 and D5x0</title><link>http://blog.zapletalovi.com/posts/2011-04-18-ondemand-governor-cannot-work-on-intel/</link><pubDate>Mon, 18 Apr 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-04-18-ondemand-governor-cannot-work-on-intel/</guid><description>To my surprise my Intel Atom D410 with max. TDP 10W does not feature Enhanced Intel SpeedStep technology. The linux kernel reports ondemand, conservative and performance governors, but I am not able to set any of these.
# echo ondemand > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
# dmesg | tail -n 1
ondemand governor failed, too long transition latency of HW, fallback to performance governor
The thing is PowerTop utility advices to run this command in order to get power consumption down.</description></item><item><title>EATON NOVA AVR UPS</title><link>http://blog.zapletalovi.com/posts/2011-04-02-eaton-nova-avr-ups/</link><pubDate>Sat, 02 Apr 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-04-02-eaton-nova-avr-ups/</guid><description>Dnes jsem byl velmi spokojen s instalací UPSky EATON NOVA AVR 625. Tak bezproblémovou instalaci na Linuxu jsem opravdu nečekal, zejména po zkušenosti s jinou značkou a také při pomyšlení na její cenu 1333 Kč.
Do systému Red Hat Enterprise Linux 6.0 jsem po zapojení přes USB kabel nainstaloval oficiální RPM balíček od firmy Eaton (k dispozici na stránkách zdarma). A dále? No to je právě ono. Nic. Vše ihned funguje, server je okamžitě chráněn.</description></item><item><title>Linux support on Intel D410PT</title><link>http://blog.zapletalovi.com/posts/2011-03-16-linux-support-on-intel-d410pt/</link><pubDate>Wed, 16 Mar 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-03-16-linux-support-on-intel-d410pt/</guid><description>There are some rumours about Intel D410PT Atom-based motherboard not working under Linux on the internet. Some user reported the board is not booting Linux-based CD-ROM, others are having problems with booting process getting stucked.
Ignoring the stuck boot process that is usually resolved by connecting a keyboard to the box the first problem has a simple solution. When product user manual v1.0 states it only support Windows XP/Vista/7 it does not mean there is no Linux support.</description></item><item><title>RHEL 6 and networking</title><link>http://blog.zapletalovi.com/posts/2011-03-15-rhel-6-and-networking/</link><pubDate>Tue, 15 Mar 2011 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2011-03-15-rhel-6-and-networking/</guid><description>To someone surprise Red Hat Enterprise Linux 6 does not configure network when you do the default minimal installation. You can still make the Anaconda installer to do it for you but you need to hit Configure network button on the domain name setting page. If you forget you don't have a network. Tough luck.
Since RHEL6 use NetworkManager by default users that just installed text-only server can be surprised twice as their /etc/sysconfig/network-scripts/ifcfg-eth0 can look like:</description></item><item><title>Trable v RHELu 6</title><link>http://blog.zapletalovi.com/posts/2010-11-30-trable-v-rhelu-6/</link><pubDate>Tue, 30 Nov 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-11-30-trable-v-rhelu-6/</guid><description>Začal jsem trošku trénovat na zkoušku RHCE, která mě čeká přísí týden. Jak je známo součástí kombinované zkoušky RHCT/RHCE je také troubleshooting, tedy odstranění závad. Na internetu je k dispozici program Trouble Maker. Jeho cíl je snadný - podle předem stanoveného scénáře "rozbije" systém. Samozřejmě umí vše vrátit do původního stavu, pokud by se uživateli nepovedlo chybu odstranit. Funguje s mnoha linuxovými systémy včetně RHEL5 a RHEL6. Instalace po RHEL6 je následující (varuji že instalace na jiný než systém k tomu určený je nebezpečná):</description></item><item><title>RHEL 6 je hotov</title><link>http://blog.zapletalovi.com/posts/2010-11-10-rhel-6-je-hotov/</link><pubDate>Wed, 10 Nov 2010 00:00:00 +0000</pubDate><guid>http://blog.zapletalovi.com/posts/2010-11-10-rhel-6-je-hotov/</guid><description>Možná mi to nebudete věřit, ale manželka detektiva Columba existuje a Red Hat Enterprise Linux 6 opravdu vyjde tento rok. Bylo nesmírně zajímavé každý den sledovat LCD obrazovku s počtem chyb, které ještě blokují vydání "relu-siks". Doslova každým dnem se číslo zmenšovalo. Tento nejvíc očekávaný linuxový operační systém současnosti byl právě oficiálně oznámen společností Red Hat (kompletní tisková zpráva). Ve firmě vypuknou oslavy, jako snad nikdy před tím. Bylo to zřejmě největší a nejtěžší vydání v historii firmy.</description></item></channel></rss>